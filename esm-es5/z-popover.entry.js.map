{"version":3,"names":["stylesCss","ZPopoverStyle0","DOCUMENT_ELEMENT","document","documentElement","getParentElement","element","parentNode","shadowRoot","host","parentElement","findScrollableParent","parent","_a","window","getComputedStyle","overflow","overflowX","overflowY","scrollHeight","clientHeight","scrollWidth","clientWidth","computeOffset","targetParentOffset","rect","getBoundingClientRect","width","height","top","left","offsetParent","offsetLeft","body","scrollY","offsetTop","DOMMatrix","style","transform","webkitTransform","domMatrix","m41","m42","parentWidth","parentHeight","innerWidth","innerHeight","offsetWidth","offsetHeight","right","bottom","ZPopover","PopoverPosition","AUTO","prototype","closePopoverWithKeyboard","e","this","closable","key","KeyboardCode","ESC","open","handleOutsideClick","composedPath","includes","target","triggerElemClicked","bindTo","HTMLElement","contains","closest","stopPropagation","positionChange","emit","position","currentPosition","validatePosition","newValue","Object","values","onOpen","_this","cancelAnimationFrame","animationFrameRequestId","setPosition_1","setPosition","requestAnimationFrame","hasAttribute","removeAttribute","undefined","openChange","disconnectedCallback","ownerDocument","querySelector","scrollContainer","scrollingBoundingRect","offsetContainer","relativeBoundingRect","boundingRect","scrollTop","scrollLeft","overflowBottom","Math","max","overflowRight","availableTop","min","availableBottom","availableLeft","availableRight","availableHeight","availableWidth","positions","push","LEFT","RIGHT","unshift","TOP","BOTTOM","join","offsetRight","offsetBottom","offsetModifier","center","sizeModifier","TOP_RIGHT","concat","maxHeight","maxWidth","TOP_LEFT","BOTTOM_RIGHT","BOTTOM_LEFT","RIGHT_BOTTOM","RIGHT_TOP","LEFT_BOTTOM","LEFT_TOP","setAttribute","componentWillLoad","render","h"],"sources":["src/components/z-popover/styles.css?tag=z-popover&encapsulation=shadow","src/components/z-popover/index.tsx"],"sourcesContent":[":host {\n  --z-popover-theme--surface: var(--color-surface01);\n  --z-popover-theme--text: var(--color-default-text);\n  --z-popover-padding: 0;\n  --z-popover-shadow-filter: drop-shadow(0 1px 2px var(--shadow-color-base));\n\n  position: relative;\n  display: none;\n  min-width: calc(var(--space-unit) * 8);\n  min-height: calc(var(--space-unit) * 4);\n  align-items: center;\n  justify-content: center;\n  padding: var(--z-popover-padding);\n  background: var(--z-popover-theme--surface);\n  border-radius: var(--border-radius-small);\n  color: var(--z-popover-theme--text);\n  fill: currentcolor;\n  filter: var(--z-popover-shadow-filter);\n  font-family: var(--font-family-sans);\n  text-align: center;\n}\n\n:host([open][current-position]),\n:host([open=\"true\"][current-position]) {\n  display: flex;\n}\n\n:host([center][current-position=\"top\"]),\n:host([center][current-position=\"bottom\"]) {\n  transform: translateX(-50%);\n}\n\n:host([center][current-position=\"right\"]),\n:host([center][current-position=\"left\"]) {\n  transform: translateY(-50%);\n}\n\n:host([current-position^=\"top\"]) {\n  margin: 0 0 var(--space-unit);\n}\n\n:host([current-position^=\"bottom\"]) {\n  margin: var(--space-unit) 0 0;\n}\n\n:host([current-position^=\"left\"]) {\n  margin: 0 var(--space-unit) 0 0;\n}\n\n:host([current-position^=\"right\"]) {\n  margin: 0 0 0 var(--space-unit);\n}\n\n/* Arrow style */\n\n:host([current-position])::before {\n  --arrow-size: 6px;\n  --arrow-edge-offset: calc(100% - var(--space-unit) - (var(--arrow-size) / 2));\n  --arrow-center-x-offset: calc(50% - (var(--arrow-size) / 2));\n  --arrow-center-y-offset: calc(100% - (var(--arrow-size) / 2));\n\n  position: absolute;\n  display: block;\n  width: var(--arrow-size);\n  height: var(--arrow-size);\n  background: var(--z-popover-theme--surface);\n  content: \"\";\n  transform: rotate(45deg);\n}\n\n:host([show-arrow=\"false\"])::before,\n:host(:not([show-arrow]))::before {\n  display: none;\n}\n\n:host([current-position^=\"top\"])::before {\n  top: var(--arrow-center-y-offset);\n}\n\n:host([current-position^=\"bottom\"])::before {\n  bottom: var(--arrow-center-y-offset);\n}\n\n:host([current-position=\"top\"])::before,\n:host([current-position=\"bottom\"])::before {\n  right: var(--arrow-edge-offset);\n}\n\n:host([current-position=\"right\"])::before,\n:host([current-position=\"left\"])::before {\n  bottom: var(--arrow-edge-offset);\n}\n\n:host([current-position=\"right\"])::before {\n  right: var(--arrow-center-y-offset);\n}\n\n:host([current-position=\"left\"])::before {\n  left: var(--arrow-center-y-offset);\n}\n\n:host([current-position=\"top_right\"])::before,\n:host([current-position=\"bottom_right\"])::before {\n  right: var(--arrow-edge-offset);\n}\n\n:host([current-position=\"top_left\"])::before,\n:host([current-position=\"bottom_left\"])::before {\n  left: var(--arrow-edge-offset);\n}\n\n:host([current-position=\"right_top\"])::before,\n:host([current-position=\"left_top\"])::before {\n  top: var(--arrow-edge-offset);\n}\n\n:host([current-position=\"right_top\"])::before,\n:host([current-position=\"right_bottom\"])::before {\n  right: var(--arrow-center-y-offset);\n}\n\n:host([current-position=\"left_top\"])::before,\n:host([current-position=\"left_bottom\"])::before {\n  left: var(--arrow-center-y-offset);\n}\n\n:host([current-position=\"right_bottom\"])::before,\n:host([current-position=\"left_bottom\"])::before {\n  bottom: var(--arrow-edge-offset);\n}\n\n:host([center][current-position=\"top\"])::before,\n:host([center][current-position=\"bottom\"])::before {\n  right: auto;\n  left: var(--arrow-center-x-offset);\n}\n\n:host([center][current-position=\"right\"])::before,\n:host([center][current-position=\"left\"])::before {\n  top: var(--arrow-center-x-offset);\n  bottom: auto;\n}\n\n::slotted(*) {\n  overflow: auto;\n  flex: 1 auto;\n}\n","import {Component, Element, Event, EventEmitter, Listen, Prop, State, Watch, h} from \"@stencil/core\";\nimport {KeyboardCode, PopoverPosition} from \"../../beans\";\n\nconst DOCUMENT_ELEMENT = document.documentElement;\n\nfunction getParentElement(element: Element): Element {\n  if (element.parentNode === element.shadowRoot) {\n    return element.shadowRoot.host;\n  }\n\n  return element.parentElement;\n}\n\n/**\n * Find the closest scrollable parent of a node.\n *\n * @param {Element} element The node\n */\nfunction findScrollableParent(element: Element): Element {\n  let parent = getParentElement(element);\n\n  while (parent && parent !== DOCUMENT_ELEMENT) {\n    const {overflow, overflowX, overflowY} = window.getComputedStyle(parent);\n    if (overflow === \"hidden\" || overflowY === \"hidden\" || overflowX === \"hidden\") {\n      return parent;\n    }\n\n    if (\n      (parent.scrollHeight > parent.clientHeight && overflow !== \"visible\" && overflowY !== \"visible\") ||\n      (parent.scrollWidth > parent.clientWidth && overflow !== \"visible\" && overflowX !== \"visible\")\n    ) {\n      return parent;\n    }\n\n    parent = getParentElement(parent);\n  }\n\n  return DOCUMENT_ELEMENT;\n}\n\n/**\n * Calculate computed offset.\n * It includes matrix transformations.\n * @param element The target element.\n * @param targetParentOffset The relative offset parent.\n * @return A client rect object.\n */\nfunction computeOffset(element: HTMLElement, targetParentOffset?: HTMLElement): Record<string, number> {\n  const rect = element.getBoundingClientRect();\n  const width = rect.width;\n  const height = rect.height;\n\n  let top = 0;\n  let left = 0;\n  let offsetParent = element;\n  while (offsetParent && offsetParent != targetParentOffset) {\n    left += offsetParent.offsetLeft;\n\n    // document.body sometimes has offsetTop == 0 but still has an\n    // offset because of children margins!\n    if (offsetParent === document.body) {\n      top += offsetParent.getBoundingClientRect().top + window.scrollY;\n    } else {\n      top += offsetParent.offsetTop;\n    }\n\n    if (window.DOMMatrix) {\n      const style = window.getComputedStyle(offsetParent);\n      const transform = style.transform || style.webkitTransform;\n      const domMatrix = new DOMMatrix(transform);\n      if (domMatrix) {\n        left += domMatrix.m41;\n        if (offsetParent !== document.body) {\n          top += domMatrix.m42;\n        }\n      }\n    }\n\n    if (!offsetParent.offsetParent) {\n      break;\n    }\n\n    offsetParent = offsetParent.offsetParent as HTMLElement;\n  }\n\n  let parentWidth: number;\n  let parentHeight: number;\n  if (offsetParent === document.body) {\n    parentWidth = window.innerWidth;\n    parentHeight = window.innerHeight;\n  } else {\n    parentWidth = offsetParent.offsetWidth;\n    parentHeight = offsetParent.offsetHeight;\n  }\n\n  const right = parentWidth - left - rect.width;\n  const bottom = parentHeight - top - rect.height;\n\n  return {top, right, bottom, left, width, height};\n}\n\n/**\n * Popover component.\n *\n * @cssprop --z-popover-theme--surface - background color of the popover.\n * @cssprop --z-popover-theme--text - foreground color of the popover.\n * @cssprop --z-popover-padding - padding of the popover.\n * @cssprop --z-popover-shadow-filter - drop-shadow filter of the popover. Defaults to `drop-shadow(0 1px 2px var(--shadow-color-base))`.\n */\n@Component({\n  tag: \"z-popover\",\n  styleUrl: \"styles.css\",\n  shadow: true,\n})\nexport class ZPopover {\n  /** Popover position. */\n  @Prop({reflect: true})\n  position: PopoverPosition = PopoverPosition.AUTO;\n\n  /**\n   * The open state of the popover.\n   */\n  @Prop({reflect: true, mutable: true})\n  open = false;\n\n  /**\n   * The selector or the element bound with the popover.\n   * If string css selector is provided make sure to use a valid selector.\n   */\n  @Prop()\n  bindTo?: string | HTMLElement;\n\n  /**\n   * Whether to show popover's arrow.\n   */\n  @Prop({reflect: true})\n  showArrow = false;\n\n  /**\n   * Whether to center the popup on the main side (according to \"position\").\n   */\n  @Prop({reflect: true})\n  center = false;\n\n  /**\n   * If true, the popover can be closed by clicking outside of it or pressing the escape key.\n   * Otherwise, it will be closed only programmatically (by setting `open` to `false`).\n   */\n  @Prop()\n  closable = true;\n\n  /**\n   * The current position of the popover.\n   */\n  @State()\n  currentPosition?: PopoverPosition;\n\n  /**\n   * Position change event.\n   */\n  @Event()\n  positionChange: EventEmitter;\n\n  /**\n   * Open change event.\n   */\n  @Event()\n  openChange: EventEmitter;\n\n  @Element() host: HTMLZPopoverElement;\n\n  private animationFrameRequestId?: number;\n\n  @Listen(\"keyup\", {target: \"window\"})\n  closePopoverWithKeyboard(e: KeyboardEvent): void {\n    if (this.closable && e.key === KeyboardCode.ESC) {\n      this.open = false;\n    }\n  }\n\n  /**\n   * Close the popover when clicking outside of its content.\n   * Stop event propagation if the click was fired by popover's trigger element,\n   * to prevent close and reopen glitches.\n   * @param {MouseEvent} e\n   */\n  @Listen(\"click\", {target: \"body\", capture: true})\n  handleOutsideClick(e: MouseEvent): void {\n    if (!this.closable || !this.open) {\n      return;\n    }\n\n    if (!e.composedPath().includes(this.host)) {\n      const target = e.target as HTMLElement;\n      const triggerElemClicked =\n        this.bindTo instanceof HTMLElement ? this.bindTo.contains(target) : target.closest(this.bindTo);\n      if (triggerElemClicked) {\n        e.stopPropagation();\n      }\n\n      this.open = false;\n      this.positionChange.emit({position: this.currentPosition});\n    }\n  }\n\n  @Watch(\"position\")\n  validatePosition(newValue: PopoverPosition): void {\n    if (newValue && !Object.values(PopoverPosition).includes(newValue as PopoverPosition)) {\n      this.position = PopoverPosition.AUTO;\n    }\n\n    this.currentPosition = this.position;\n    this.positionChange.emit({position: this.currentPosition});\n  }\n\n  /**\n   * Setup popover behaviors on opening.\n   */\n  @Watch(\"open\")\n  onOpen(): void {\n    cancelAnimationFrame(this.animationFrameRequestId);\n    if (this.open) {\n      const setPosition = (): void => {\n        if (this.open) {\n          this.setPosition();\n          this.animationFrameRequestId = requestAnimationFrame(setPosition);\n        }\n      };\n\n      setPosition();\n    } else if (this.host.hasAttribute(\"current-position\")) {\n      this.host.removeAttribute(\"current-position\");\n      this.currentPosition = undefined;\n    }\n\n    this.openChange.emit({open: this.open});\n  }\n\n  disconnectedCallback(): void {\n    cancelAnimationFrame(this.animationFrameRequestId);\n  }\n\n  /**\n   * Set the position of the popover.\n   */\n  private setPosition(): void {\n    let element: HTMLElement;\n    if (typeof this.bindTo === \"string\") {\n      element = this.host.ownerDocument.querySelector(this.bindTo) as HTMLElement;\n    } else if (this.bindTo) {\n      element = this.bindTo;\n    } else {\n      element = this.host.parentElement as HTMLElement;\n    }\n\n    if (!element) {\n      return;\n    }\n\n    const scrollContainer = findScrollableParent(element) as HTMLElement;\n    const scrollingBoundingRect = scrollContainer.getBoundingClientRect();\n    const offsetContainer = this.host.offsetParent as HTMLElement;\n\n    const relativeBoundingRect = offsetContainer\n      ? computeOffset(offsetContainer, scrollContainer)\n      : {top: 0, right: 0, bottom: 0, left: 0};\n    const boundingRect = computeOffset(element, scrollContainer);\n\n    const top = boundingRect.top - scrollContainer.scrollTop;\n    const bottom = scrollingBoundingRect.height - (boundingRect.top + boundingRect.height) + scrollContainer.scrollTop;\n    const left = boundingRect.left - scrollContainer.scrollLeft;\n    const right = scrollingBoundingRect.width - (boundingRect.left + boundingRect.width) + scrollContainer.scrollLeft;\n\n    const overflowBottom = Math.max(0, scrollingBoundingRect.top + scrollingBoundingRect.height - window.innerHeight);\n    const overflowRight = Math.max(0, scrollingBoundingRect.left + scrollingBoundingRect.width - window.innerWidth);\n\n    const availableTop = Math.min(top, top + scrollingBoundingRect.top);\n    const availableBottom = Math.min(bottom, bottom - overflowBottom);\n    const availableLeft = Math.min(left, left + scrollingBoundingRect.left);\n    const availableRight = Math.min(right, right - overflowRight);\n\n    const availableHeight = availableTop + availableBottom + boundingRect.height;\n    const availableWidth = availableLeft + availableRight + boundingRect.width;\n\n    let position = this.currentPosition;\n    const positions: PopoverPosition[] = [];\n    if (this.position === PopoverPosition.AUTO) {\n      /**\n       * The `AUTO` position tries to place the popover in the 'safest' area,\n       * where there's more space available.\n       */\n      if (availableLeft / availableWidth > 0.6) {\n        positions.push(PopoverPosition.LEFT);\n      } else if (availableLeft / availableWidth < 0.4) {\n        positions.push(PopoverPosition.RIGHT);\n      }\n\n      if (availableTop / availableHeight > 0.9) {\n        positions.unshift(PopoverPosition.TOP);\n      } else if (availableTop / availableHeight > 0.6) {\n        positions.push(PopoverPosition.TOP);\n      } else if (availableTop / availableHeight < 0.1) {\n        positions.unshift(PopoverPosition.BOTTOM);\n      } else {\n        positions.push(PopoverPosition.BOTTOM);\n      }\n\n      position = positions.join(\"_\") as PopoverPosition;\n    }\n\n    const style = this.host.style;\n    style.position = \"absolute\";\n\n    const offsetTop = boundingRect.top - relativeBoundingRect.top;\n    const offsetRight = boundingRect.right - relativeBoundingRect.right;\n    const offsetBottom = boundingRect.bottom - relativeBoundingRect.bottom;\n    const offsetLeft = boundingRect.left - relativeBoundingRect.left;\n    const offsetModifier = this.center ? 0.5 : 0;\n    const sizeModifier = this.center ? 0.5 : 0;\n\n    if (position === PopoverPosition.TOP || position === PopoverPosition.TOP_RIGHT) {\n      style.top = \"auto\";\n      style.right = \"auto\";\n      style.bottom = `${offsetBottom + boundingRect.height}px`;\n\n      style.left = `${offsetLeft + boundingRect.width * offsetModifier}px`;\n      style.maxHeight = `${availableTop}px`;\n      if (position === PopoverPosition.TOP_RIGHT) {\n        style.maxWidth = `${availableRight + boundingRect.width * sizeModifier}px`;\n      }\n    } else if (position === PopoverPosition.TOP_LEFT) {\n      style.top = \"auto\";\n      style.right = `${offsetRight + boundingRect.width * offsetModifier}px`;\n      style.bottom = `${offsetBottom + boundingRect.height}px`;\n      style.left = \"auto\";\n      style.maxWidth = `${availableLeft}px`;\n      style.maxHeight = `${availableTop}px`;\n    } else if (position === PopoverPosition.BOTTOM || position === PopoverPosition.BOTTOM_RIGHT) {\n      style.top = `${offsetTop + boundingRect.height}px`;\n      style.right = \"auto\";\n      style.bottom = \"auto\";\n      style.left = `${offsetLeft + boundingRect.width * offsetModifier}px`;\n      style.maxHeight = `${availableBottom}px`;\n      if (position === PopoverPosition.BOTTOM_RIGHT) {\n        style.maxWidth = `${availableRight + boundingRect.width * sizeModifier}px`;\n      }\n    } else if (position === PopoverPosition.BOTTOM_LEFT) {\n      style.top = `${offsetTop + boundingRect.height}px`;\n      style.right = `${offsetRight + boundingRect.width * offsetModifier}px`;\n      style.bottom = \"auto\";\n      style.left = \"auto\";\n      style.maxWidth = `${availableLeft}px`;\n      style.maxHeight = `${availableBottom}px`;\n    } else if (position === PopoverPosition.RIGHT || position === PopoverPosition.RIGHT_BOTTOM) {\n      style.top = `${offsetTop + boundingRect.height * offsetModifier}px`;\n      style.right = \"auto\";\n      style.bottom = \"auto\";\n      style.left = `${offsetLeft + boundingRect.width}px`;\n      style.maxWidth = `${availableRight}px`;\n      style.maxHeight = `${availableBottom + boundingRect.height * sizeModifier}px`;\n    } else if (position === PopoverPosition.RIGHT_TOP) {\n      style.top = \"auto\";\n      style.right = \"auto\";\n      style.bottom = `${offsetBottom + boundingRect.height * offsetModifier}px`;\n      style.left = `${offsetLeft + boundingRect.width}px`;\n      style.maxWidth = `${availableRight}px`;\n      style.maxHeight = `${availableTop + boundingRect.height * sizeModifier}px`;\n    } else if (position === PopoverPosition.LEFT || position === PopoverPosition.LEFT_BOTTOM) {\n      style.top = `${offsetTop + boundingRect.height * offsetModifier}px`;\n      style.right = `${offsetRight + boundingRect.width}px`;\n      style.bottom = \"auto\";\n      style.left = \"auto\";\n      style.maxWidth = `${availableLeft}px`;\n      style.maxHeight = `${availableBottom + boundingRect.height * sizeModifier}px`;\n    } else if (position === PopoverPosition.LEFT_TOP) {\n      style.top = \"auto\";\n      style.right = `${offsetRight + boundingRect.width}px`;\n      style.bottom = `${offsetBottom + boundingRect.height * offsetModifier}px`;\n      style.left = \"auto\";\n      style.maxWidth = `${availableLeft}px`;\n      style.maxHeight = `${availableTop + boundingRect.height * sizeModifier}px`;\n    }\n\n    this.currentPosition = position || this.position;\n    this.host.setAttribute(\"current-position\", this.currentPosition);\n  }\n\n  componentWillLoad(): void {\n    this.validatePosition(this.position);\n    this.onOpen();\n  }\n\n  render(): HTMLSlotElement {\n    return <slot></slot>;\n  }\n}\n"],"mappings":"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","ignoreList":[]}