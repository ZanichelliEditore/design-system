import{r as registerInstance,c as createEvent,h,g as getElement}from"./index-ab5f1eaa.js";import{P as PopoverPosition,g as KeyboardCode}from"./index-2255c6c8.js";var stylesCss=':host{--z-popover-theme--surface:var(--color-surface01);--z-popover-theme--text:var(--color-default-text);--z-popover-padding:0;--z-popover-shadow-filter:drop-shadow(0 1px 2px var(--shadow-color-base));position:relative;display:none;min-width:calc(var(--space-unit) * 8);min-height:calc(var(--space-unit) * 4);-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:var(--z-popover-padding);background:var(--z-popover-theme--surface);border-radius:var(--border-radius-small);color:var(--z-popover-theme--text);fill:currentcolor;-webkit-filter:var(--z-popover-shadow-filter);filter:var(--z-popover-shadow-filter);font-family:var(--font-family-sans);text-align:center}:host([open][current-position]),:host([open="true"][current-position]){display:-ms-flexbox;display:flex}:host([center][current-position="top"]),:host([center][current-position="bottom"]){-webkit-transform:translateX(-50%);transform:translateX(-50%)}:host([center][current-position="right"]),:host([center][current-position="left"]){-webkit-transform:translateY(-50%);transform:translateY(-50%)}:host([current-position^="top"]){margin:0 0 var(--space-unit)}:host([current-position^="bottom"]){margin:var(--space-unit) 0 0}:host([current-position^="left"]){margin:0 var(--space-unit) 0 0}:host([current-position^="right"]){margin:0 0 0 var(--space-unit)}:host([current-position])::before{--arrow-size:6px;--arrow-edge-offset:calc(100% - var(--space-unit) - (var(--arrow-size) / 2));--arrow-center-x-offset:calc(50% - (var(--arrow-size) / 2));--arrow-center-y-offset:calc(100% - (var(--arrow-size) / 2));position:absolute;display:block;width:var(--arrow-size);height:var(--arrow-size);background:var(--z-popover-theme--surface);content:"";-webkit-transform:rotate(45deg);transform:rotate(45deg)}:host([show-arrow="false"])::before,:host(:not([show-arrow]))::before{display:none}:host([current-position^="top"])::before{top:var(--arrow-center-y-offset)}:host([current-position^="bottom"])::before{bottom:var(--arrow-center-y-offset)}:host([current-position="top"])::before,:host([current-position="bottom"])::before{right:var(--arrow-edge-offset)}:host([current-position="right"])::before,:host([current-position="left"])::before{bottom:var(--arrow-edge-offset)}:host([current-position="right"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left"])::before{left:var(--arrow-center-y-offset)}:host([current-position="top_right"])::before,:host([current-position="bottom_right"])::before{right:var(--arrow-edge-offset)}:host([current-position="top_left"])::before,:host([current-position="bottom_left"])::before{left:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="left_top"])::before{top:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="right_bottom"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left_top"])::before,:host([current-position="left_bottom"])::before{left:var(--arrow-center-y-offset)}:host([current-position="right_bottom"])::before,:host([current-position="left_bottom"])::before{bottom:var(--arrow-edge-offset)}:host([center][current-position="top"])::before,:host([center][current-position="bottom"])::before{right:auto;left:var(--arrow-center-x-offset)}:host([center][current-position="right"])::before,:host([center][current-position="left"])::before{top:var(--arrow-center-x-offset);bottom:auto}::slotted(*){overflow:auto;-ms-flex:1 auto;flex:1 auto}';var ZPopoverStyle0=stylesCss;var DOCUMENT_ELEMENT=document.documentElement;function getParentElement(t){if(t.parentNode.host){return t.parentNode.host}return t.parentNode}function findScrollableParent(t){var o=getParentElement(t);while(o&&o!==DOCUMENT_ELEMENT){var e=window.getComputedStyle(o),r=e.overflow,i=e.overflowX,s=e.overflowY;if(r==="hidden"||s==="hidden"||i==="hidden"){return o}if(o.scrollHeight>o.clientHeight&&r!=="visible"&&s!=="visible"||o.scrollWidth>o.clientWidth&&r!=="visible"&&i!=="visible"){return o}o=getParentElement(o)}return DOCUMENT_ELEMENT}function computeOffset(t,o){var e=t.getBoundingClientRect();var r=e.width;var i=e.height;var s=0;var n=0;var a=t;while(a&&a!=o){n+=a.offsetLeft;if(a===document.body){s+=a.getBoundingClientRect().top+window.scrollY}else{s+=a.offsetTop}if(window.DOMMatrix){var f=window.getComputedStyle(a);var p=f.transform||f.webkitTransform;var h=new DOMMatrix(p);if(h){n+=h.m41;if(a!==document.body){s+=h.m42}}}if(!a.offsetParent){break}a=a.offsetParent}var c;var v;if(a===document.body){c=window.innerWidth;v=window.innerHeight}else{c=a.offsetWidth;v=a.offsetHeight}var u=c-n-e.width;var l=v-s-e.height;return{top:s,right:u,bottom:l,left:n,width:r,height:i}}var ZPopover=function(){function t(t){registerInstance(this,t);this.positionChange=createEvent(this,"positionChange",7);this.openChange=createEvent(this,"openChange",7);this.position=PopoverPosition.AUTO;this.open=false;this.bindTo=undefined;this.showArrow=false;this.center=false;this.closable=true;this.currentPosition=undefined}t.prototype.closePopoverWithKeyboard=function(t){if(this.closable&&t.key===KeyboardCode.ESC){this.open=false}};t.prototype.handleOutsideClick=function(t){if(!this.closable||!this.open){return}if(!t.composedPath().includes(this.host)){var o=t.target;var e=this.bindTo instanceof HTMLElement?this.bindTo.contains(o):o.closest(this.bindTo);if(e){t.stopPropagation()}this.open=false;this.positionChange.emit({position:this.currentPosition})}};t.prototype.validatePosition=function(t){if(t&&!Object.values(PopoverPosition).includes(t)){this.position=PopoverPosition.AUTO}this.currentPosition=this.position;this.positionChange.emit({position:this.currentPosition})};t.prototype.onOpen=function(){var t=this;cancelAnimationFrame(this.animationFrameRequestId);if(this.open){var o=function(){if(t.open){t.setPosition();t.animationFrameRequestId=requestAnimationFrame(o)}};o()}else if(this.host.hasAttribute("current-position")){this.host.removeAttribute("current-position");this.currentPosition=undefined}this.openChange.emit({open:this.open})};t.prototype.disconnectedCallback=function(){cancelAnimationFrame(this.animationFrameRequestId)};t.prototype.setPosition=function(){var t;if(typeof this.bindTo==="string"){t=this.host.ownerDocument.querySelector(this.bindTo)}else if(this.bindTo){t=this.bindTo}else{t=this.host.parentElement}if(!t){return}var o=findScrollableParent(t);var e=o.getBoundingClientRect();var r=this.host.offsetParent;var i=r?computeOffset(r,o):{top:0,right:0,bottom:0,left:0};var s=computeOffset(t,o);var n=s.top-o.scrollTop;var a=e.height-(s.top+s.height)+o.scrollTop;var f=s.left-o.scrollLeft;var p=e.width-(s.left+s.width)+o.scrollLeft;var h=Math.max(0,e.top+e.height-window.innerHeight);var c=Math.max(0,e.left+e.width-window.innerWidth);var v=Math.min(n,n+e.top);var u=Math.min(a,a-h);var l=Math.min(f,f+e.left);var b=Math.min(p,p-c);var d=v+u+s.height;var m=l+b+s.width;var P=this.currentPosition;var w=[];if(this.position===PopoverPosition.AUTO){if(l/m>.6){w.push(PopoverPosition.LEFT)}else if(l/m<.4){w.push(PopoverPosition.RIGHT)}if(v/d>.9){w.unshift(PopoverPosition.TOP)}else if(v/d>.6){w.push(PopoverPosition.TOP)}else if(v/d<.1){w.unshift(PopoverPosition.BOTTOM)}else{w.push(PopoverPosition.BOTTOM)}P=w.join("_")}var g=this.host.style;g.position="absolute";var x=s.top-i.top;var y=s.right-i.right;var E=s.bottom-i.bottom;var z=s.left-i.left;var _=this.center?.5:0;var M=this.center?.5:0;if(P===PopoverPosition.TOP||P===PopoverPosition.TOP_RIGHT){g.top="auto";g.right="auto";g.bottom="".concat(E+s.height,"px");g.left="".concat(z+s.width*_,"px");g.maxHeight="".concat(v,"px");if(P===PopoverPosition.TOP_RIGHT){g.maxWidth="".concat(b+s.width*M,"px")}}else if(P===PopoverPosition.TOP_LEFT){g.top="auto";g.right="".concat(y+s.width*_,"px");g.bottom="".concat(E+s.height,"px");g.left="auto";g.maxWidth="".concat(l,"px");g.maxHeight="".concat(v,"px")}else if(P===PopoverPosition.BOTTOM||P===PopoverPosition.BOTTOM_RIGHT){g.top="".concat(x+s.height,"px");g.right="auto";g.bottom="auto";g.left="".concat(z+s.width*_,"px");g.maxHeight="".concat(u,"px");if(P===PopoverPosition.BOTTOM_RIGHT){g.maxWidth="".concat(b+s.width*M,"px")}}else if(P===PopoverPosition.BOTTOM_LEFT){g.top="".concat(x+s.height,"px");g.right="".concat(y+s.width*_,"px");g.bottom="auto";g.left="auto";g.maxWidth="".concat(l,"px");g.maxHeight="".concat(u,"px")}else if(P===PopoverPosition.RIGHT||P===PopoverPosition.RIGHT_BOTTOM){g.top="".concat(x+s.height*_,"px");g.right="auto";g.bottom="auto";g.left="".concat(z+s.width,"px");g.maxWidth="".concat(b,"px");g.maxHeight="".concat(u+s.height*M,"px")}else if(P===PopoverPosition.RIGHT_TOP){g.top="auto";g.right="auto";g.bottom="".concat(E+s.height*_,"px");g.left="".concat(z+s.width,"px");g.maxWidth="".concat(b,"px");g.maxHeight="".concat(v+s.height*M,"px")}else if(P===PopoverPosition.LEFT||P===PopoverPosition.LEFT_BOTTOM){g.top="".concat(x+s.height*_,"px");g.right="".concat(y+s.width,"px");g.bottom="auto";g.left="auto";g.maxWidth="".concat(l,"px");g.maxHeight="".concat(u+s.height*M,"px")}else if(P===PopoverPosition.LEFT_TOP){g.top="auto";g.right="".concat(y+s.width,"px");g.bottom="".concat(E+s.height*_,"px");g.left="auto";g.maxWidth="".concat(l,"px");g.maxHeight="".concat(v+s.height*M,"px")}this.currentPosition=P||this.position;this.host.setAttribute("current-position",this.currentPosition)};t.prototype.componentWillLoad=function(){this.validatePosition(this.position);this.onOpen()};t.prototype.render=function(){return h("slot",{key:"a7a3830d93abc15bc7138815f9820bc8cda7ab35"})};Object.defineProperty(t.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{position:["validatePosition"],open:["onOpen"]}},enumerable:false,configurable:true});return t}();ZPopover.style=ZPopoverStyle0;export{ZPopover as z_popover};
//# sourceMappingURL=z-popover.entry.js.map