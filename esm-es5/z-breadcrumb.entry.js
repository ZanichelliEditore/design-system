var __spreadArray=this&&this.__spreadArray||function(e,i,t){if(t||arguments.length===2)for(var r=0,n=i.length,a;r<n;r++){if(a||!(r in i)){if(!a)a=Array.prototype.slice.call(i,0,r);a[r]=i[r]}}return e.concat(a||Array.prototype.slice.call(i))};import{r as registerInstance,c as createEvent,h,a as Host,g as getElement}from"./index-ab5f1eaa.js";import{U as BreadcrumbPathStyle,V as BreadcrumbHomepageVariant,p as Device,g as KeyboardCode,P as PopoverPosition,i as ListSize}from"./index-a7f69d42.js";import{g as getDevice,a as handleKeyboardSubmit}from"./utils-0ce33738.js";import"./breakpoints-680e0e56.js";var stylesCss=":host{font-family:var(--font-family-sans);font-weight:var(--font-rg);--line-clamp-popover:0;--line-clamp-mobile:1}*{-webkit-box-sizing:border-box;box-sizing:border-box}button{padding:0;border:none;margin:0;background-color:transparent}nav{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}ol{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:0;margin:0;-webkit-column-gap:var(--space-unit);-moz-column-gap:var(--space-unit);column-gap:var(--space-unit);list-style:none}li{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:start;justify-content:flex-start;-webkit-column-gap:var(--space-unit);-moz-column-gap:var(--space-unit);column-gap:var(--space-unit)}ol li>a,ol li>button{font-size:var(--font-size-2);letter-spacing:0.16px;line-height:1.4}a:focus,button:focus{-webkit-box-shadow:var(--shadow-focus-primary);box-shadow:var(--shadow-focus-primary);outline:none}a{color:var(--color-link-primary);white-space:nowrap}a.missing-path{color:var(--color-default-text)}.text-ellipsis{display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:var(--line-clamp-mobile);text-overflow:ellipsis;white-space:initial}nav.semibold>ol>li>a:not(.missing-path),nav.semibold>ol>li>button{font-weight:var(--font-sb);text-decoration:none}nav.underlined a,nav.underlined button{text-decoration:underline}z-icon{--z-icon-width:16px;--z-icon-height:16px;display:block;fill:var(--color-link-primary)}z-icon.separator{--z-icon-width:10px;--z-icon-height:10px;fill:var(--gray500)}button.dots{display:inline-block;color:var(--color-link-primary);cursor:pointer}.hidden-paths-popover .popover-content{max-width:302px;padding:calc(var(--space-unit) / 2) var(--space-unit);text-align:left}.hidden-paths-popover .popover-content a{font-weight:var(--font-rg);text-decoration:none}.hidden-paths-popover{--z-popover-theme--surface:var(--color-surface02);--z-popover-padding:0}.hidden-paths-popover::before,.full-path-tooltip::before{--arrow-edge-offset:calc(100% - (var(--space-unit) * 2.55))}.full-path-tooltip{--z-popover-theme--surface:var(--color-surface05);--z-popover-theme--text:var(--color-text-inverse);--z-popover-padding:0}.tooltip-content{padding:0 var(--space-unit);font-size:var(--font-size-2)}@media (min-width: 768px){.text-ellipsis{-webkit-line-clamp:var(--line-clamp-popover)}}@media (max-width: 767px){li a{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-column-gap:var(--space-unit);-moz-column-gap:var(--space-unit);column-gap:var(--space-unit)}}";var ZBreadcrumbStyle0=stylesCss;var ZBreadcrumb=function(){function e(e){registerInstance(this,e);this.clickOnNode=createEvent(this,"clickOnNode",7);this.collapsedElements=[];this.currentIndex=0;this.truncatePosition=null;this.pathStyle=BreadcrumbPathStyle.UNDERLINED;this.homepageVariant=BreadcrumbHomepageVariant.ICON;this.maxNodesToShow=5;this.preventFollowUrl=false;this.overflowMenuItemRows=0;this.truncateChar=30;this.viewPortWidth=undefined;this.hasOverflow=false;this.popoverEllipsisOpen=false}e.prototype.handleResize=function(){this.viewPortWidth=getDevice();if(this.viewPortWidth!==Device.MOBILE&&this.wrapElement&&this.wrapElement.scrollWidth>this.wrapElement.clientWidth){this.hasOverflow=true}};e.prototype.handlePropChange=function(){this.initializeBreadcrumb()};e.prototype.handleResizeUp=function(e,i){if(e===Device.MOBILE||i===Device.MOBILE&&e===Device.TABLET||i===Device.MOBILE&&e===Device.DESKTOP||i===Device.MOBILE&&e===Device.DESKTOP_WIDE||i===Device.TABLET&&e===Device.DESKTOP||i===Device.TABLET&&e===Device.DESKTOP_WIDE||i===Device.DESKTOP&&e===Device.DESKTOP_WIDE){this.initializeBreadcrumb()}};e.prototype.componentWillLoad=function(){this.viewPortWidth=getDevice();this.initializeBreadcrumb()};e.prototype.componentWillRender=function(){if(this.viewPortWidth!==Device.MOBILE&&this.hasOverflow){this.checkEllipsisOrOverflowMenu();this.hasOverflow=false}};e.prototype.componentDidRender=function(){if(this.collapsedElementsRef){this.anchorElements=Array.from(this.hostElement.shadowRoot.querySelectorAll("z-list-group a"))}if(this.viewPortWidth!==Device.MOBILE&&this.wrapElement.scrollWidth>this.wrapElement.clientWidth){this.hasOverflow=true}};e.prototype.initializeBreadcrumb=function(){if(this.viewPortWidth===Device.MOBILE){this.pathsList=this.getPathsItemsList().filter((function(e){return!!e.path}))}else{this.pathsList=this.getPathsItemsList()}this.homepageNode=this.pathsList.shift();this.pathListCopy=__spreadArray([],this.pathsList,true);this.collapsedElements=[];if(this.pathsList.length>this.maxNodesToShow){this.collapsedElements=this.pathsList.splice(0,this.pathsList.length-2)}};e.prototype.checkEllipsisOrOverflowMenu=function(){var e,i;for(var t=0;t<this.pathsList.length;t++){if(this.pathsList[t].text.length<=this.truncateChar){continue}if(this.truncatePosition>0){(e=this.collapsedElements).push.apply(e,this.pathListCopy.splice(0,this.truncatePosition));this.pathsList.splice(0,this.truncatePosition);this.truncatePosition=0;return}else if(this.truncatePosition===0){(i=this.collapsedElements).push.apply(i,this.pathListCopy.splice(0,this.truncatePosition+1));this.pathsList.splice(0,this.truncatePosition+1);this.truncatePosition=null;return}if(t!==this.pathsList.length-1){var r=this.truncateWithEllipsis(this.pathsList[t].text,this.truncateChar);this.currentEllipsisText=this.pathsList[t].text;this.pathsList[t].text=r;this.pathsList[t].hasTooltip=true;this.truncatePosition=t;return}}};e.prototype.truncateWithEllipsis=function(e,i){if(e.length<=i){return e}return e.substring(0,i-1)+"&mldr;"};e.prototype.getPathsItemsList=function(){return Array.from(this.hostElement.children).map((function(e){return{text:e.textContent,path:e.href,hasTooltip:false}}))};e.prototype.renderHomepageNode=function(){var e=this;return h("li",null,h("a",{class:{"homepage-text":this.homepageVariant===BreadcrumbHomepageVariant.TEXT},href:this.homepageNode.path,onClick:function(i){return e.handlePreventFollowUrl(i,e.homepageNode)},innerHTML:this.homepageVariant===BreadcrumbHomepageVariant.ICON?'<z-icon name="home" />':this.homepageNode.text||"Home"}),this.pathsList.length>0&&h("z-icon",{class:"separator",name:"chevron-right"}))};e.prototype.togglePopover=function(){if(!this.collapsedElementsRef.open){this.collapsedElementsRef.open=true}};e.prototype.handlePreventFollowUrl=function(e,i){if(this.preventFollowUrl){e.preventDefault();this.clickOnNode.emit(i.path)}};e.prototype.handleOverflowMenuAccessibility=function(e){var i=this.anchorElements.length;if(e.key===KeyboardCode.TAB){e.preventDefault();return}e.stopPropagation();var t=[KeyboardCode.ARROW_DOWN,KeyboardCode.ARROW_UP];if(t.includes(e.key)){e.preventDefault();if(e.key===KeyboardCode.ARROW_DOWN){this.currentIndex=i===this.currentIndex+1?0:this.currentIndex+1}if(e.key===KeyboardCode.ARROW_UP){this.currentIndex=this.currentIndex<=0?i-1:this.currentIndex-1}this.anchorElements[this.currentIndex].focus()}if(e.key===KeyboardCode.ESC){this.triggerButton.focus()}};e.prototype.renderOverflowMenu=function(){var e=this;return h("li",null,h("z-popover",{class:"hidden-paths-popover",ref:function(i){return e.collapsedElementsRef=i},bindTo:this.triggerButton,position:PopoverPosition.BOTTOM_RIGHT,closable:true,showArrow:true},h("div",{class:"popover-content"},h("z-list",null,h("z-list-group",{size:ListSize.SMALL},this.collapsedElements.map((function(i,t,r){return h("div",null,h("z-list-element",{clickable:true},h("a",{class:"text-ellipsis",href:i.path,onClick:function(t){return e.handlePreventFollowUrl(t,i)},onKeyDown:function(i){return e.handleOverflowMenuAccessibility(i)},innerHTML:i.text})),t<r.length-1&&h("z-divider",{color:"color-surface03"}))})))))),h("button",{class:"dots",ref:function(i){return e.triggerButton=i},"aria-label":"Mostra piÃ¹ breadcrumb","aria-haspopup":"true",onClick:function(){e.togglePopover()},onKeyDown:function(i){handleKeyboardSubmit(i,e.togglePopover.bind(e));setTimeout((function(){e.anchorElements[0].focus()}),100)},innerHTML:"&mldr;"}),this.pathsList.length>0&&h("z-icon",{class:"separator",name:"chevron-right"}))};e.prototype.renderMobileItems=function(){var e=this;var i=this.pathsList[this.pathsList.length-1];if(!i){return}return h("li",null,h("a",{"aria-current":i.path?undefined:"page",href:i.path,onClick:function(t){return e.handlePreventFollowUrl(t,i)}},h("z-icon",{name:"chevron-left"}),h("span",{class:{"missing-path":!i.path,"text-ellipsis":true}},i.text)))};e.prototype.renderItems=function(){var e=this;var i;return __spreadArray([this.renderHomepageNode(),this.collapsedElements.length>0&&this.renderOverflowMenu()],this.pathsList.map((function(t,r){return h("li",null,t.hasTooltip&&h("z-popover",{class:"full-path-tooltip",bindTo:i,open:e.popoverEllipsisOpen,position:PopoverPosition.BOTTOM_RIGHT,closable:false,showArrow:true},h("span",{class:"tooltip-content"},e.currentEllipsisText)),h("a",{class:{"missing-path":!t.path},ref:function(e){return i=e},"aria-current":t.path?undefined:"page",href:t.path,onClick:function(i){return e.handlePreventFollowUrl(i,t)},onMouseOver:function(){if(t.hasTooltip){e.popoverEllipsisOpen=true}},onMouseLeave:function(){if(t.hasTooltip){e.popoverEllipsisOpen=false}},innerHTML:t.text}),r!==e.pathsList.length-1&&h("z-icon",{class:"separator",name:"chevron-right"}))})),true)};e.prototype.render=function(){var e=this;return h(Host,{key:"bba9d5bf2b1316c4e29eebcc00cb23c3e6635a36",style:{"--line-clamp-popover":"".concat(this.overflowMenuItemRows)}},h("nav",{key:"4d916bcbb730f4e3cd0d051b630336db7222aa30",ref:function(i){return e.wrapElement=i},"aria-label":"Breadcrumb",class:{semibold:this.pathStyle===BreadcrumbPathStyle.SEMIBOLD,underlined:this.pathStyle===BreadcrumbPathStyle.UNDERLINED}},h("ol",{key:"654d8e9cad8417a155f1bc349b7b16687c8db96e"},this.viewPortWidth===Device.MOBILE?this.renderMobileItems():this.renderItems())))};Object.defineProperty(e.prototype,"hostElement",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{maxNodesToShow:["handlePropChange"],viewPortWidth:["handleResizeUp"]}},enumerable:false,configurable:true});return e}();ZBreadcrumb.style=ZBreadcrumbStyle0;export{ZBreadcrumb as z_breadcrumb};
//# sourceMappingURL=z-breadcrumb.entry.js.map