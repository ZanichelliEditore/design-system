import{r as i,c as t,h as n}from"./p-98268a57.js";import{P as e}from"./p-20d02305.js";import{h as s}from"./p-8c4c18e1.js";import"./p-d69e14fb.js";const o=class{constructor(n){i(this,n),this.flipCard=t(this,"flipCard",7),this.htmltabindex=0,this.hiddenContent=!1,this.tooltip=!1,this.emitFlipCard=this.emitFlipCard.bind(this)}emitFlipCard(i=!1){this.flipCard.emit(i)}componentWillLoad(){this.setStringOrArray()}componentWillUpdate(){this.setStringOrArray()}componentDidRender(){this.handleContentHeight()}handleContentHeight(){return(this.contentWrapper||this.infoWrapper)&&(this.contentWrapper.scrollHeight>this.contentWrapper.offsetHeight||this.infoWrapper.scrollHeight>this.infoWrapper.offsetHeight)?(this.infoWrapper.style.height=this.contentWrapper.offsetHeight-this.onlineLicenseWrapper.offsetHeight-this.offlineLicenseWrapper.offsetHeight+"px",this.hiddenContent=!0):this.hiddenContent=!1}setStringOrArray(){this.cardData="string"==typeof this.data?JSON.parse(this.data):this.data}renderCloseIcon(){return n("z-icon",{name:"multiply-circled-filled",height:18,width:18,onClick:()=>this.emitFlipCard(!1),tabindex:this.htmltabindex,onKeyUp:i=>{s(i,this.emitFlipCard,!1)}})}renderGeneralSection(){var i,t;const e=null===(i=null==this?void 0:this.cardData)||void 0===i?void 0:i.title,s=null===(t=null==this?void 0:this.cardData)||void 0===t?void 0:t.description;return n("section",{class:"info-wrapper "+(this.hiddenContent?"hidden":""),onClick:()=>{this.hiddenContent&&(this.tooltip=!this.tooltip)},ref:i=>this.infoWrapper=i},this.renderAuthor(),this.renderYear(),e,n("br",null),s)}renderAuthor(){var i;const t=null===(i=null==this?void 0:this.cardData)||void 0===i?void 0:i.author;return t?n("span",null,"Autore: ",n("b",null,t),n("br",null)):null}renderYear(){var i;const t=null===(i=null==this?void 0:this.cardData)||void 0===i?void 0:i.year;return t?n("span",null,"Anno: ",n("b",null,t),n("br",null)):null}renderTooltip(){if(!this.tooltip)return;if(!this.cardData)return;const{title:i,year:t,author:s,description:o}=this.cardData;return n("z-popover",{position:e.right,onClick:()=>this.tooltip=!1},`${i} ${t} ${s} ${o}`)}setExpirationLicenseMessage(i){return"online"===i&&this.cardData.onlineLicense.expired||"offline"===i&&this.cardData.offlineLicense.expired?n("span",{class:"expired"},"SCADUTA"):"online"===i&&this.cardData.onlineLicense.expiring||"offline"===i&&this.cardData.offlineLicense.expiring?n("span",{class:"expiring"},"IN SCADENZA"):void 0}renderOnlineLicenseSection(){var i;if(null===(i=null==this?void 0:this.cardData)||void 0===i?void 0:i.onlineLicense)return n("section",{ref:i=>this.onlineLicenseWrapper=i},n("span",{class:"license-heading"},n("span",null,"Licenza online"),this.setExpirationLicenseMessage("online")),"Scadenza il ",n("b",null,this.cardData.onlineLicense.expiration),n("br",null))}renderOfflineLicenseSection(){var i;if(null===(i=null==this?void 0:this.cardData)||void 0===i?void 0:i.offlineLicense)return n("section",{ref:i=>this.offlineLicenseWrapper=i},n("span",{class:"license-heading"},n("span",null,"Licenza offline"),this.setExpirationLicenseMessage("offline")),"Scadenza il ",n("b",null,this.cardData.offlineLicense.expiration),n("br",null),"Installazioni disponibili:"," ",n("b",null,this.cardData.offlineLicense.installations))}render(){return n("div",null,this.renderCloseIcon(),n("div",{class:"content-wrapper",ref:i=>this.contentWrapper=i},this.renderGeneralSection(),this.renderTooltip(),this.renderOnlineLicenseSection(),this.renderOfflineLicenseSection()),n("div",{class:"cta-wrapper"},n("slot",null)))}};o.style=':host{font-family:var(--font-family-sans);font-weight:var(--font-rg);width:100%}:host>div{background:var(--color-surface01);width:calc(100% + calc(var(--space-unit) * 2));margin-left:calc(-1 * var(--space-unit));height:402px;border:var(--border-size-small) solid var(--color-primary01);box-shadow:0px 2px 4px 0px rgba(66, 69, 72, 0.35);border-radius:0px;box-sizing:border-box;padding:calc(var(--space-unit) * 2) calc(var(--space-unit) * 3);position:relative}:host>div>z-icon{fill:var(--color-primary01);cursor:pointer;position:absolute;top:var(--space-unit);right:var(--space-unit)}:host>div{display:grid}:host>div>div.cta-wrapper{align-self:end;display:flex;flex-direction:column;flex-wrap:nowrap;justify-content:space-between}:host>div>div.content-wrapper{overflow:hidden;position:relative;align-self:stretch}:host>div>div.content-wrapper>section{border-bottom:var(--border-size-small) solid var(--color-surface04);color:var(--color-surface05);padding:var(--space-unit) 0;font-size:14px;line-height:20px;box-sizing:border-box}:host>div>div.content-wrapper>section:last-child{border-bottom:none}:host>div>div.content-wrapper>section.info-wrapper{position:relative;overflow:hidden;box-sizing:border-box}:host>div>div.content-wrapper>section.info-wrapper.hidden:after{background:linear-gradient(\n    180deg,\n    rgba(255, 0, 0, 0),\n    rgba(255, 0, 0, 0) 60%,\n    white\n  );content:"";position:absolute;pointer-events:none;top:0;left:0;right:0;bottom:0}:host>div>div.content-wrapper>section>span.license-heading{display:flex;justify-content:space-between}:host>div>div.content-wrapper>section>span.license-heading>span.expired{color:var(--color-secondary02);font-size:12px;font-weight:600}:host>div>div.content-wrapper>section>span.license-heading>span.expiring{color:var(--color-warning01);font-size:12px;font-weight:600}:host>div>div.content-wrapper>z-popover{position:absolute;top:0px;left:calc(var(--space-unit) * 4)}';export{o as z_myz_card_info}