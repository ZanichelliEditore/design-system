import{r as t,c as i,h as s,H as e,g as o}from"./p-d17ebc2f.js";import{V as h,W as r,p as a,P as n,g as l,i as p}from"./p-e1d9785e.js";import{g as c,a as d}from"./p-aa5e3e61.js";import"./p-b497e33e.js";const u=class{constructor(s){t(this,s),this.clickOnNode=i(this,"clickOnNode",7),this.pathStyle=h.UNDERLINED,this.homepageVariant=r.ICON,this.maxNodesToShow=5,this.preventFollowUrl=!1,this.overflowMenuItemRows=0,this.truncateChar=30,this.hasOverflow=!1,this.popoverEllipsisOpen=!1,this.collapsedElements=[],this.currentIndex=0,this.truncatePosition=null}handleResize(){this.viewPortWidth=c(),this.viewPortWidth!==a.MOBILE&&this.wrapElement&&this.wrapElement.scrollWidth>this.wrapElement.clientWidth&&(this.hasOverflow=!0)}handlePropChange(){this.initializeBreadcrumb(this.viewPortWidth===a.MOBILE)}handleResizeUp(t,i){(t===a.MOBILE||i===a.MOBILE&&t===a.TABLET||i===a.MOBILE&&t===a.DESKTOP||i===a.MOBILE&&t===a.DESKTOP_WIDE||i===a.TABLET&&t===a.DESKTOP||i===a.TABLET&&t===a.DESKTOP_WIDE||i===a.DESKTOP&&t===a.DESKTOP_WIDE)&&this.initializeBreadcrumb(this.viewPortWidth===a.MOBILE)}componentWillLoad(){this.viewPortWidth=c(),this.initializeBreadcrumb(this.viewPortWidth===a.MOBILE)}componentWillRender(){this.viewPortWidth!==a.MOBILE&&this.hasOverflow&&(this.checkEllipsisOrOverflowMenu(),this.hasOverflow=!1)}componentDidRender(){this.collapsedElementsRef&&(this.anchorElements=Array.from(this.hostElement.shadowRoot.querySelectorAll("z-list-group a"))),this.viewPortWidth!==a.MOBILE&&this.wrapElement.scrollWidth>this.wrapElement.clientWidth&&(this.hasOverflow=!0)}initializeBreadcrumb(t){this.pathsList=t?this.getPathsItemsList().filter((t=>!!t.path)):this.getPathsItemsList(),this.totalLenght=this.pathsList.length,this.homepageNode=this.pathsList.shift(),this.pathListCopy=JSON.parse(JSON.stringify(this.pathsList)),this.collapsedElements=[],this.totalLenght>this.maxNodesToShow&&(this.collapsedElements=this.pathsList.splice(0,this.pathsList.length-2))}checkEllipsisOrOverflowMenu(){if(this.pathListCopy.length>0)for(let t=0;t<this.pathsList.length;t++)if(this.pathsList[t].text.length>this.truncateChar){if(null!==this.truncatePosition){if(this.truncatePosition>0)return this.pathListCopy.splice(0,this.truncatePosition).forEach((t=>{this.collapsedElements.push(t)})),this.pathsList.splice(0,this.truncatePosition),void(this.truncatePosition=0);if(0===this.truncatePosition){const t=this.pathListCopy.splice(0,this.truncatePosition+1);return this.collapsedElements.push(...t),this.pathsList.splice(0,this.truncatePosition+1),void(this.truncatePosition=null)}}if(t!==this.pathsList.length-1){const i=this.truncateWithEllipsis(this.pathsList[t].text,this.truncateChar);return this.currentEllipsisText=this.pathsList[t].text,this.pathsList[t].text=i,this.pathsList[t].hasTooltip=!0,void(this.truncatePosition=t)}}}truncateWithEllipsis(t,i){return t.length>i?t.substring(0,i-1)+"&mldr;":t}getPathsItemsList(){return Array.from(this.hostElement.children).map((t=>({text:t.textContent,path:t.href,hasTooltip:!1})))}renderMobileBreadcrumb(){return s("nav",{"aria-label":"Breadcrumb",class:{underlined:this.pathStyle===h.UNDERLINED,semibold:this.pathStyle===h.SEMIBOLD}},s("ol",null,this.renderNode(this.pathsList[this.pathsList.length-1],!0)))}renderHomepageNode(t){return s("li",null,s("a",{class:{"homepage-icon":this.homepageVariant===r.ICON,"homepage-text":this.homepageVariant===r.TEXT},href:t.path,onClick:i=>this.handlePreventFollowUrl(i,t)},this.homepageVariant===r.ICON?s("z-icon",{name:"home",fill:"color-link-primary",height:16,width:16}):"Home"))}renderNode(t,i){return s("li",null,t.hasTooltip&&s("z-popover",{class:"full-path-tooltip","bind-to":this.triggerEllipsis,open:this.popoverEllipsisOpen,position:n.BOTTOM_RIGHT,closable:!1,showArrow:!0},s("span",{class:"tooltip-content"},this.currentEllipsisText)),s("a",{class:{"missing-path":!t.path,"text-ellipsis":i},ref:t=>this.triggerEllipsis=t,"aria-current":t.path?void 0:"page",href:t.path,onClick:i=>this.handlePreventFollowUrl(i,t),onMouseOver:()=>{t.hasTooltip&&(this.popoverEllipsisOpen=!0)},onMouseLeave:()=>{t.hasTooltip&&(this.popoverEllipsisOpen=!1)},innerHTML:i?`<z-icon fill="color-link-primary" name="chevron-left"></z-icon> ${t.text}`:t.text}))}renderBreadcrumb(){return s("nav",{ref:t=>this.wrapElement=t,"aria-label":"Breadcrumb",class:{underlined:this.pathStyle===h.UNDERLINED,semibold:this.pathStyle===h.SEMIBOLD}},s("ol",null,this.renderHomepageNode(this.homepageNode),this.collapsedElements.length?this.renderOverflowMenu():"",this.pathsList.map((t=>this.renderNode(t,!1)))))}togglePopover(){this.collapsedElementsRef.open||(this.collapsedElementsRef.open=!0)}handlePreventFollowUrl(t,i){this.preventFollowUrl&&(t.preventDefault(),this.clickOnNode.emit(i.path))}handleOverflowMenuAccessibility(t){const i=this.anchorElements.length;t.key!==l.TAB?(t.stopPropagation(),[l.ARROW_DOWN,l.ARROW_UP].includes(t.key)&&(t.preventDefault(),t.key===l.ARROW_DOWN&&(this.currentIndex=i===this.currentIndex+1?0:this.currentIndex+1),t.key===l.ARROW_UP&&(this.currentIndex=this.currentIndex<=0?i-1:this.currentIndex-1),this.anchorElements[this.currentIndex].focus()),t.key===l.ESC&&this.triggerButton.focus()):t.preventDefault()}renderOverflowMenu(){if(this.collapsedElements.length)return s("li",null,s("z-popover",{class:"hidden-paths-popover",ref:t=>this.collapsedElementsRef=t,"bind-to":this.triggerButton,position:n.BOTTOM_RIGHT,closable:!0,showArrow:!0},s("div",{class:"popover-content"},s("z-list",null,s("z-list-group",{size:p.SMALL},this.collapsedElements.map(((t,i,e)=>s("div",null,s("z-list-element",{clickable:!0},s("a",{class:"text-ellipsis",href:t.path,onClick:i=>this.handlePreventFollowUrl(i,t),onKeyDown:t=>this.handleOverflowMenuAccessibility(t)},t.text)),i<e.length-1&&s("z-divider",{color:"color-surface03"})))))))),s("button",{"aria-label":"Mostra piÃ¹ breadcrumb","aria-haspopup":"true",ref:t=>this.triggerButton=t,class:"dots",onClick:()=>{this.togglePopover()},onKeyDown:t=>{d(t,this.togglePopover.bind(this)),setTimeout((()=>{this.anchorElements[0].focus()}),100)}},"..."))}render(){return s(e,{style:{"--line-clamp-popover":`${this.overflowMenuItemRows}`}},this.viewPortWidth===a.MOBILE?this.renderMobileBreadcrumb():this.renderBreadcrumb())}get hostElement(){return o(this)}static get watchers(){return{maxNodesToShow:["handlePropChange"],viewPortWidth:["handleResizeUp"]}}};u.style=':host{font-family:var(--font-family-sans);font-weight:var(--font-rg);--line-clamp-popover:0;--line-clamp-mobile:1}button{padding:0;border:none;margin:0;background-color:transparent}nav{display:flex;height:30px;align-items:center;padding-left:calc(var(--space-unit) / 2);overflow-x:hidden}li{display:flex;align-items:baseline}:host a:focus,:host button:focus{box-shadow:var(--shadow-focus-primary);outline:0}:host a{color:var(--color-link-primary);font-size:var(--font-size-2);text-decoration:none;white-space:nowrap}:host a.homepage-icon{display:list-item}:host a.homepage-text{display:initial;margin-top:calc(var(--space-unit) / 4);margin-right:var(--space-unit)}:host a.missing-path{color:var(--color-text01)}:host a.text-ellipsis{display:-webkit-box !important;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:var(--line-clamp-mobile);text-overflow:ellipsis;white-space:normal}:host ol{display:flex;padding:0;margin:0;list-style-type:none}:host ol>li:not(:first-child,:last-child){margin-right:var(--space-unit)}nav.underlined>ol>li a:not(.missing-path),nav.underlined>ol>li button{text-decoration:underline}nav.semibold>ol>li a:not(.missing-path),nav.semibold>ol>li button{font-weight:var(--font-sb)}:host z-icon{margin-right:var(--space-unit);--z-icon-width:12px;--z-icon-height:12px}:host button.dots{display:inline-block;color:var(--color-link-primary);cursor:pointer}:host .hidden-paths-popover .popover-content{max-width:302px;padding:calc(var(--space-unit) / 2) var(--space-unit);text-align:left}:host .hidden-paths-popover .popover-content a{font-weight:var(--font-rg);text-decoration:none}:host .hidden-paths-popover{--z-popover-theme--surface:var(--color-surface02);--z-popover-padding:0}:host .hidden-paths-popover::before,.full-path-tooltip::before{--arrow-edge-offset:calc(100% - (var(--space-unit) * 2.55))}:host .full-path-tooltip{--z-popover-theme--surface:var(--color-surface05);--z-popover-theme--text:var(--color-text-inverse);--z-popover-padding:0}:host .tooltip-content{padding:0 var(--space-unit);font-size:var(--font-size-2)}@media (min-width: 768px){:host ol>li+li::before{display:inline-block;width:10px;height:10px;flex:1;margin-right:2px;color:var(--color-disabled03);content:"\\203A"}:host a.text-ellipsis{-webkit-line-clamp:var(--line-clamp-popover)}}';export{u as z_breadcrumb}