import{r as t,c as e,h as s,a as i,g as o}from"./p-cfa39bd3.js";import{g as n}from"./p-6037cdf3.js";const a=':host{display:inline-flex;flex-direction:column;align-items:flex-start;justify-content:center;padding:0;font-family:var(--font-family-sans)}:host,::slotted(*),*{box-sizing:border-box}::slotted(a){text-decoration:none}::slotted(*){color:var(--color-default-text);font-family:var(--font-family-sans);font-weight:var(--font-rg)}:host(:is([active],[open])) .label,.label:hover{border-color:var(--color-secondary01)}:host(:is([active],[open])) .label ::slotted(*),.label:focus:focus-visible ::slotted(*),.label:hover ::slotted(*){font-weight:var(--font-bd)}.label{display:flex;width:100%;align-items:center;padding:calc(var(--space-unit) * 2) calc(var(--space-unit) / 2);border:0;border-bottom:var(--border-size-small) solid var(--color-surface05);margin:0;background:transparent;border-radius:0;cursor:pointer;text-align:left}::slotted([data-text]){display:inline-flex;flex-direction:column}::slotted([data-text])::after{overflow:hidden;height:0;content:attr(data-text);content:attr(data-text) / "";font-weight:var(--font-bd);pointer-events:none;user-select:none;visibility:hidden}@media speech{::slotted([data-text])::after{display:none}}.label ::slotted(*){width:100%;margin:0;font-size:var(--font-size-3);line-height:1.25}.label:focus:focus-visible{box-shadow:var(--shadow-focus-primary);outline:none}.label z-icon{margin-left:calc(var(--space-unit) * 4);fill:var(--color-default-icon)}.items{display:flex;width:100%;flex-direction:column;padding:calc(var(--space-unit) / 2);padding-bottom:calc(var(--space-unit) * 1.5)}.items>::slotted([slot="section"]){display:inline-flex;padding:calc(var(--space-unit) / 2);margin:0;font-size:var(--font-size-2);line-height:1.4;outline:none}.items>::slotted([slot="section"]:focus:focus-visible){box-shadow:var(--shadow-focus-primary);color:var(--color-secondary01)}.items>::slotted([slot="section"]:hover),.items>::slotted([slot="section"]:focus:focus-visible),.items>::slotted([slot="section"][active]){color:var(--color-secondary01);font-weight:var(--font-bd)}';const l=a;const c=class{constructor(s){t(this,s);this.opened=e(this,"opened",7);this.closed=e(this,"closed",7);this.currentIndex=-1;this.currentCanvasOpenStatus=false;this.active=undefined;this.open=undefined;this.hasContent=undefined}canvasOpenStatusChanged(t){this.currentCanvasOpenStatus=t.detail}handleKeyDown(t){if(t.code===n.ENTER){return}if(this.open&&!this.currentCanvasOpenStatus){this.handleNavigationSideArrow(t)}this.handleArrowsNav(t)}handleNavigationSideArrow(t){if(t.code!==n.ARROW_RIGHT&&t.code!==n.ARROW_LEFT){return}if(t.code===n.ARROW_RIGHT){const t=this.hostElement.parentElement.nextElementSibling;if(t){const e=t.shadowRoot.querySelector(".menu-label");console.log(this.hostElement.parentElement);e.focus()}this.open=false;t.setAttribute("open","true")}else if(t.code===n.ARROW_LEFT){const t=this.hostElement.parentElement.previousElementSibling;if(t){const e=t.shadowRoot.querySelector(".menu-label");e.focus()}t.setAttribute("open","true");this.open=false}}handleArrowsNav(t){const e=Array.from(this.hostElement.querySelectorAll('[slot="section"]'));if(this.open){t.preventDefault();t.stopPropagation();if(t.code===n.ARROW_DOWN||t.code===n.ARROW_UP){let s;e.forEach((t=>t.setAttribute("tabindex","-1")));if(t.code===n.ARROW_DOWN){s=this.getNextItem(e,1)}else if(t.code===n.ARROW_UP){s=this.getNextItem(e,-1)}if(s){s.setAttribute("tabindex","0");s.focus()}}else if(t.code===n.ESC){this.focusToParentAndCloseMenu()}else if(t.shiftKey&&t.code===n.TAB){this.focusToParentAndCloseMenu()}}}getNextItem(t,e){if(this.currentIndex===-1){this.currentIndex=e===1?0:t.length-1;return t[this.currentIndex]}this.currentIndex=(this.currentIndex+e+t.length)%t.length;return t[this.currentIndex]}focusToParentAndCloseMenu(){const t=this.hostElement.shadowRoot.querySelector("button");t.focus();this.currentIndex=-1;this.open=false}toggle(){if(!this.hasContent){return}this.open=!this.open;this.open?this.opened.emit():this.closed.emit()}handleClick(t){if(!this.open||this.hostElement.contains(t.target)){return}this.open=false;this.closed.emit()}checkContent(){this.hasContent=this.hostElement.querySelectorAll('[slot="section"]').length>0}onLabelSlotChange(t){const e=t.target.assignedElements()[0];e.dataset.text=(e===null||e===void 0?void 0:e.innerText)||null}focusFirstSectionItemOnKeyUp(){const t=this.hostElement.querySelectorAll('[slot="section"]')[0];if(t){t.focus();this.currentIndex=0}}componentWillLoad(){this.checkContent()}render(){return s(i,{key:"1370ec8c9379a204ed8bfb387ef53f6ad976ce0f",role:"menu",open:this.open},s("button",{key:"4a474f4f47b9f72f3621a4c1f043f287ebf98d66",class:"label","aria-pressed":this.open?"true":"false",onClick:this.toggle.bind(this),onKeyUp:this.focusFirstSectionItemOnKeyUp.bind(this)},s("slot",{key:"1332d96212421fd936b1ee1e295c856219bfb1cc",onSlotchange:this.onLabelSlotChange.bind(this)}),this.hasContent&&s("z-icon",{key:"04b94f8f22bd56d16f7cdb3f394024c5726435e5",name:this.open?"chevron-up":"chevron-down"})),this.open&&s("div",{key:"01353c9f9b57cce04361849e79c3264f5f106472",class:"items"},s("slot",{key:"29379c69dff6189d4226246eb859dad6c67ca0ec",name:"section",onSlotchange:this.checkContent.bind(this)})))}get hostElement(){return o(this)}};c.style=l;export{c as z_menu_section};
//# sourceMappingURL=p-8c517cd7.entry.js.map