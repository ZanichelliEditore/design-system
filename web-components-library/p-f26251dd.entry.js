import{r as t,c as o,h as e,g as r}from"./p-98268a57.js";import{P as i,q as s}from"./p-ed1cd6b1.js";import{a as n}from"./p-7f1cc90f.js";import"./p-d69e14fb.js";const a=document.documentElement;function p(t){return t.parentNode.host?t.parentNode.host:t.parentNode}function h(t,o){const e=t.getBoundingClientRect(),r=e.width,i=e.height;let s,n,a=0,p=0,h=t;for(;h&&h!=o;){if(p+=h.offsetLeft,h===document.body?a+=h.getBoundingClientRect().top+window.scrollY:a+=h.offsetTop,window.DOMMatrix){const t=window.getComputedStyle(h),o=new DOMMatrix(t.transform||t.webkitTransform);o&&(p+=o.m41,h!==document.body&&(a+=o.m42))}if(!h.offsetParent)break;h=h.offsetParent}return h===document.body?(s=window.innerWidth,n=window.innerHeight):(s=h.offsetWidth,n=h.offsetHeight),{top:a,right:s-p-e.width,bottom:n-a-e.height,left:p,width:r,height:i}}const c=class{constructor(e){t(this,e),this.positionChange=o(this,"positionChange",7),this.openChange=o(this,"openChange",7),this.position=i.AUTO,this.open=!1,this.showArrow=!1,this.center=!1}closePopoverWithKeyboard(t){t.key===s.ESC&&(this.open=!1)}handleOutsideClick(t){n(t.target).find((t=>"z-popover"===t.nodeName.toLowerCase()))||(this.open=!1,this.positionChange.emit({position:this.currentPosition}))}validatePosition(t){t&&Object.values(i).every((o=>t!==o))&&(this.position=i.AUTO),this.currentPosition=this.position,this.positionChange.emit({position:this.currentPosition})}onOpen(){if(cancelAnimationFrame(this.animationFrameRequestId),this.open){const t=()=>{this.open&&(this.setPosition(),this.animationFrameRequestId=requestAnimationFrame(t))};t()}else{const t=this.host.style;t.removeProperty("top"),t.removeProperty("right"),t.removeProperty("bottom"),t.removeProperty("left"),t.removeProperty("max-width"),t.removeProperty("max-height"),this.currentPosition=void 0}this.openChange.emit({open:this.open})}disconnectedCallback(){cancelAnimationFrame(this.animationFrameRequestId)}setPosition(){let t;if(t="string"==typeof this.bindTo?this.host.ownerDocument.querySelector(this.bindTo):this.bindTo?this.bindTo:this.host.parentElement,!t)return;const o=function(t){let o=p(t);for(;o&&o!==a;){const{overflow:t,overflowX:e,overflowY:r}=window.getComputedStyle(o);if("hidden"===t||"hidden"===r||"hidden"===e)return o;if(o.scrollHeight>o.clientHeight&&"visible"!==t&&"visible"!==r||o.scrollWidth>o.clientWidth&&"visible"!==t&&"visible"!==e)return o;o=p(o)}return a}(t),e=o.getBoundingClientRect(),r=this.host.offsetParent,s=r?h(r,o):{top:0,right:0,bottom:0,left:0},n=h(t,o),c=n.top-o.scrollTop,f=e.height-(n.top+n.height)+o.scrollTop,l=n.left-o.scrollLeft,u=e.width-(n.left+n.width)+o.scrollLeft,b=Math.max(0,e.top+e.height-window.innerHeight),d=Math.max(0,e.left+e.width-window.innerWidth),v=Math.min(c,c+e.top),w=Math.min(f,f-b),m=Math.min(l,l+e.left),x=Math.min(u,u-d),g=v+w+n.height,$=m+x+n.width;let z=this.currentPosition;const _=[];this.position===i.AUTO&&(m/$>.6?_.push(i.LEFT):m/$<.4&&_.push(i.RIGHT),v/g>.9?_.unshift(i.TOP):v/g>.6?_.push(i.TOP):v/g<.1?_.unshift(i.BOTTOM):_.push(i.BOTTOM),z=_.join("_"));const y=this.host.style;y.position="absolute";const M=n.top-s.top,j=n.right-s.right,k=n.bottom-s.bottom,C=n.left-s.left,O=this.center?.5:0,P=this.center?.5:0;z===i.TOP||z===i.TOP_RIGHT?(y.top="auto",y.right="auto",y.bottom=`${k+n.height}px`,y.left=`${C+n.width*O}px`,y.maxHeight=`${v}px`,z===i.TOP_RIGHT&&(y.maxWidth=`${x+n.width*P}px`)):z===i.TOP_LEFT?(y.top="auto",y.right=`${j+n.width*O}px`,y.bottom=`${k+n.height}px`,y.left="auto",y.maxWidth=`${m}px`,y.maxHeight=`${v}px`):z===i.BOTTOM||z===i.BOTTOM_RIGHT?(y.top=`${M+n.height}px`,y.right="auto",y.bottom="auto",y.left=`${C+n.width*O}px`,y.maxHeight=`${w}px`,z===i.BOTTOM_RIGHT&&(y.maxWidth=`${x+n.width*P}px`)):z===i.BOTTOM_LEFT?(y.top=`${M+n.height}px`,y.right=`${j+n.width*O}px`,y.bottom="auto",y.left="auto",y.maxWidth=`${m}px`,y.maxHeight=`${w}px`):z===i.RIGHT||z===i.RIGHT_BOTTOM?(y.top=`${M+n.height*O}px`,y.right="auto",y.bottom="auto",y.left=`${C+n.width}px`,y.maxWidth=`${x}px`,y.maxHeight=`${w+n.height*P}px`):z===i.RIGHT_TOP?(y.top="auto",y.right="auto",y.bottom=`${k+n.height*O}px`,y.left=`${C+n.width}px`,y.maxWidth=`${x}px`,y.maxHeight=`${v+n.height*P}px`):z===i.LEFT||z===i.LEFT_BOTTOM?(y.top=`${M+n.height*O}px`,y.right=`${j+n.width}px`,y.bottom="auto",y.left="auto",y.maxWidth=`${m}px`,y.maxHeight=`${w+n.height*P}px`):z===i.LEFT_TOP&&(y.top="auto",y.right=`${j+n.width}px`,y.bottom=`${k+n.height*O}px`,y.left="auto",y.maxWidth=`${m}px`,y.maxHeight=`${v+n.height*P}px`),this.currentPosition=z||this.position,this.host.setAttribute("current-position",this.currentPosition)}componentWillLoad(){this.validatePosition(this.position),this.onOpen()}render(){return e("slot",null)}get host(){return r(this)}static get watchers(){return{position:["validatePosition"],open:["onOpen"]}}};c.style=":host{--z-popover-theme--surface:var(--color-surface01);--z-popover-theme--text:var(--color-text01);--z-popover-padding:var(--space-unit);--z-popover-shadow-filter:drop-shadow(0 1px 2px var(--shadow-color-base));--arrow-size:6px;--edge-offset:calc(-1 * (var(--arrow-size) + calc(var(--space-unit) * 2)));position:relative;display:flex;align-items:center;justify-content:center;padding:var(--z-popover-padding);min-width:calc(var(--space-unit) * 8);min-height:calc(var(--space-unit) * 4);color:var(--z-popover-theme--text);fill:currentColor;font-family:var(--font-family-sans);text-align:center;border-radius:var(--border-radius-small);background:var(--z-popover-theme--surface);filter:var(--z-popover-shadow-filter)}:host(:not([open])),:host([open=\"false\"]){display:none}:host([center][current-position='top']),:host([center][current-position='bottom']){transform:translateX(-50%)}:host([center][current-position='right']),:host([center][current-position='left']){transform:translateY(-50%)}:host([current-position])::before{--arrow-edge-offset:calc(100% - var(--arrow-size) - var(--space-unit));--arrow-center-x-offset:calc(50% - calc(var(--arrow-size) / 2));--arrow-center-y-offset:calc(100% - calc(var(--arrow-size) / 2));display:block;content:'';position:absolute;width:var(--arrow-size);height:var(--arrow-size);background:var(--z-popover-theme--surface);transform:rotate(45deg)}:host([show-arrow=false])::before,:host(:not([show-arrow]))::before{display:none}:host([current-position^='top'])::before{top:var(--arrow-center-y-offset)}:host([current-position^='bottom'])::before{bottom:var(--arrow-center-y-offset)}:host([current-position='top'])::before,:host([current-position='bottom'])::before{left:var(--arrow-center-x-offset)}:host([current-position='right'])::before,:host([current-position='left'])::before{top:var(--arrow-center-x-offset)}:host([current-position='right'])::before{right:var(--arrow-center-y-offset)}:host([current-position='left'])::before{left:var(--arrow-center-y-offset)}:host([current-position='top_right'])::before,:host([current-position='bottom_right'])::before{right:calc(var(--arrow-edge-offset) + var(--arrow-size))}:host([current-position='top_right']:not([center]))::before,:host([current-position='bottom_right']:not([center]))::before,:host([current-position='top_right'][center=\"false\"])::before,:host([current-position='bottom_right'][center=\"false\"])::before{right:calc(var(--arrow-edge-offset) - var(--arrow-size) + 1px)}:host([current-position='top_left'])::before,:host([current-position='bottom_left'])::before{left:calc(var(--arrow-edge-offset) + var(--arrow-size))}:host([current-position='top_left']:not([center]))::before,:host([current-position='bottom_left']:not([center]))::before,:host([current-position='top_left'][center=\"false\"])::before,:host([current-position='bottom_left'][center=\"false\"])::before{left:calc(var(--arrow-edge-offset) - var(--arrow-size) + 1px)}:host([current-position='right_top'])::before,:host([current-position='left_top'])::before{bottom:var(--arrow-size)}:host([current-position='right_top'])::before,:host([current-position='right_bottom'])::before{right:var(--arrow-center-y-offset)}:host([current-position='left_top'])::before,:host([current-position='left_bottom'])::before{left:var(--arrow-center-y-offset)}:host([current-position='right_bottom'])::before,:host([current-position='left_bottom'])::before{top:var(--arrow-size)}::slotted(*){flex:1 auto;overflow:auto}";export{c as z_popover_deprecated}