import{r as t,c as i,h as s}from"./p-98268a57.js";import{h}from"./p-e43e61ac.js";import{h as e}from"./p-bfa3593e.js";import"./p-112455b1.js";import"./p-d79f69f2.js";import"./p-d69e14fb.js";const a=class{constructor(s){t(this,s),this.goToPage=i(this,"goToPage",7),this.changeStartPage=i(this,"changeStartPage",7),this.addPageToHistory=i(this,"addPageToHistory",7),this.currentpage=1,this.startpage=1,this.listhistoryrow=[],this.currentPages=[],this.velocityConstantMultiplier=2,this.navigateRight=this.navigateRight.bind(this),this.navigateLeft=this.navigateLeft.bind(this),this.emitGoToPage=this.emitGoToPage.bind(this)}componentDidLoad(){this.scrollPage=this.scrollPage.bind(this);let t=new h(this.bar);t.on("swiperight",this.scrollPage),t.on("swipeleft",this.scrollPage)}componentWillRender(){this.initPagination()}componentWillUpdate(){this.initPagination()}initPagination(){this.loadPages(),this.historyraw&&this.parsehistoryraw(this.historyraw)}parsehistoryraw(t){this.listhistoryrow=[...JSON.parse(t)]}scrollPage(t){let i=Math.round(Math.abs(t.velocity))*this.velocityConstantMultiplier;const s=Math.max(1,i);switch(t.type){case"swiperight":if(!this.canNavigateLeft())break;const t=this.startpage-s;this.emitChangeStartPage(t>1?t:1);break;case"swipeleft":if(!this.canNavigateRight())break;const i=this.startpage+s;this.emitChangeStartPage(i<this.pages-this.visiblepages+1?i:this.pages-this.visiblepages+1)}}emitGoToPage(t){this.currentpage=t,this.goToPage.emit({page:t}),this.addPageToHistory.emit({page:t})}emitChangeStartPage(t){this.startpage=t,this.changeStartPage.emit({startpage:t})}emitAddPageToHistory(t){this.listhistoryrow.push(t),this.changeStartPage.emit({page:t})}loadPages(){this.currentPages.splice(0);const t=this.pageWindow();let i;for(i=0;i<t;i++)this.currentPages.push(i+this.startpage)}pageWindow(){return Math.min(this.pages,this.visiblepages)}canNavigateLeft(){return this.startpage>1}canNavigateRight(){return this.startpage+this.visiblepages-1<this.pages}navigateLeft(){this.canNavigateLeft()&&(this.startpage--,this.emitChangeStartPage(this.startpage),this.loadPages())}navigateRight(){this.canNavigateRight()&&(this.startpage++,this.emitChangeStartPage(this.startpage),this.loadPages())}render(){return s("div",{ref:t=>this.bar=t},s("z-icon",{name:"chevron-left",class:!this.canNavigateLeft()&&"disabled",onClick:()=>this.navigateLeft(),onKeyPress:t=>e(t,this.navigateLeft),tabindex:this.canNavigateLeft()?0:-1}),this.currentPages.map((t=>s("z-pagination-page",{value:t,isselected:t===this.currentpage,onClick:()=>this.emitGoToPage(t),onKeyDown:i=>e(i,this.emitGoToPage,t),isvisited:this.listhistoryrow.includes(t)}))),s("z-icon",{name:"chevron-right",class:!this.canNavigateRight()&&"disabled",onClick:()=>this.navigateRight(),onKeyPress:t=>e(t,this.navigateRight),tabindex:this.canNavigateRight()?0:-1}))}};a.style=":host>div{height:48px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-around;align-items:center;align-content:center}:host>div>z-icon{cursor:pointer;margin:calc(var(--space-unit) * 2) 0;color:var(--color-primary01);fill:var(--color-primary01)}:host>div>z-icon.disabled{cursor:default;pointer-events:none;color:var(--color-disabled01);fill:var(--color-disabled01)}";export{a as z_pagination_bar}