{"version":3,"names":["stylesCss","ZMyzCardFooterStyle0","ZMyzCardFooter","exports","class_1","prototype","handleToggle","this","isOpen","firstElem_1","getFirstListItem","requestAnimationFrame","focus","getTitleAuthors","allowTooltipAuthors","autori","componentWillLoad","opened","elementsEllipsis","elementAuthorsHasEllipsis","ellipsisAuthors","offsetWidth","scrollWidth","retrieveClass","isopen","real","cardtype","LicenseType","REAL","trial","TRIAL","temp","TEMP","customContent","footerTransitionHandler","e","includes","propertyName","host","querySelector","render","_this","h","key","class","Object","assign","wrapper","onTransitionEnd","name","titolo","content","ref","el","title","isbn","concat"],"sources":["src/snowflakes/myz/card/z-myz-card-footer/styles.css?tag=z-myz-card-footer&encapsulation=shadow","src/snowflakes/myz/card/z-myz-card-footer/index.tsx"],"sourcesContent":["footer {\n  position: relative;\n  z-index: 5;\n  top: 0;\n  width: auto;\n  height: calc(var(--space-unit) * 6);\n  padding: 0;\n  border-top: var(--border-size-medium) solid var(--color-surface03);\n  margin: 0;\n  background-color: var(--color-surface01);\n  border-radius: 0 0 var(--border-radius) var(--border-radius);\n  color: var(--color-surface05);\n  font-family: var(--font-family-sans);\n  font-weight: var(--font-rg);\n  transition:\n    height 500ms ease-in-out,\n    top 500ms ease-in-out;\n}\n\nfooter.real,\nfooter.trial,\nfooter.temp {\n  border-top: var(--border-size-medium) solid var(--blue100);\n}\n\nfooter .bold {\n  font-family: var(--font-family-sans);\n  font-weight: var(--font-sb);\n}\n\nfooter > p {\n  overflow: hidden;\n  height: 40px;\n  padding: calc(var(--space-unit) * 2) calc(var(--space-unit) * 2) var(--space-unit) calc(var(--space-unit) * 2);\n  margin: 0;\n  background-color: var(--color-surface01);\n  font-family: var(--font-family-sans);\n  font-size: 16px;\n  font-weight: var(--font-rg);\n  line-height: 22px;\n  transition: all 200ms linear;\n}\n\nfooter.isopen > p {\n  background-color: var(--gray200);\n  font-size: 14px;\n  font-weight: var(--font-sb);\n  transition: all 200ms linear;\n}\n\nfooter.isopen.real > p,\nfooter.isopen.trial > p,\nfooter.isopen.temp > p {\n  background-color: var(--blue100);\n}\n\nfooter .visible {\n  display: block;\n}\n\nfooter .hidden {\n  display: none;\n}\n\nfooter > div.content {\n  overflow: hidden;\n  height: 60px;\n}\n\nfooter > div.content > div:not(.slot-handler) {\n  padding: var(--space-unit) calc(var(--space-unit) * 2);\n}\n\nfooter > div.content > div > p {\n  overflow: hidden;\n  height: 20px;\n  padding: 0;\n  margin: 0;\n  font-size: 14px;\n  line-height: 20px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\nfooter > div.content > div > p.year-isbn {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding-top: var(--space-unit);\n}\n\nfooter > div.content > div > p.year-isbn > span.isbn {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\nfooter.isopen > div.content > div:not(.slot-handler) {\n  height: 68px;\n}\n\nfooter.isopen > div.content > div > p.authors {\n  height: 40px;\n  text-overflow: initial;\n  white-space: initial;\n}\n\nfooter.isopen > div.content > div > p.year-isbn {\n  height: 50px;\n  flex-direction: column;\n  padding-left: 0;\n}\n\nfooter.isopen > div.content > div > p.year-isbn > span.isbn {\n  display: inline-grid;\n  padding-left: 0;\n}\n\nfooter.isopen {\n  top: -212px;\n  height: 295px;\n  transition:\n    height 500ms ease-in-out,\n    top 500ms ease-in-out;\n}\n\nfooter.isopen.custom-content {\n  top: -292px;\n}\n\nfooter.isopen > div.content {\n  height: 280px;\n  transition:\n    height 500ms ease-in-out,\n    top 500ms ease-in-out;\n}\n\nfooter.isopen.custom-content > div.content {\n  height: 230px;\n}\n\n.toggle {\n  position: absolute;\n  z-index: 10;\n  top: -24px;\n  left: 16px;\n}\n\n.faded {\n  opacity: 0.3;\n  pointer-events: none;\n}\n\nfooter > p.custom-content,\nfooter .content.custom-content {\n  display: none;\n}\n\nfooter.isopen > p.custom-content,\nfooter.isopen .content.custom-content {\n  display: block;\n}\n\ndiv.wrapper {\n  position: relative;\n  height: 100%;\n}\n\ndiv.wrapper ::slotted([slot=\"content\"]) {\n  position: absolute;\n  z-index: 10;\n  top: calc(var(--space-unit) * 2);\n  display: block;\n  width: 100%;\n  height: 112px;\n  box-sizing: border-box;\n  padding: 0 calc(var(--space-unit) * 2);\n  border-top: var(--border-size-medium) solid transparent;\n  background: var(--color-white);\n}\n\ndiv.wrapper.isopen ::slotted([slot=\"content\"]) {\n  top: 0;\n  bottom: 0;\n  height: 128px;\n  padding: calc(var(--space-unit) * 2);\n  border-color: var(--blue100);\n}\n","import {Component, Element, Listen, Prop, State, h} from \"@stencil/core\";\nimport {JSXBase} from \"@stencil/core/internal\";\nimport {LicenseType} from \"../../../../beans/index\";\n\n/**\n * @slot toggle - toggle button slot\n * @slot list - card resources list slot\n */\n@Component({\n  tag: \"z-myz-card-footer\",\n  styleUrl: \"styles.css\",\n  shadow: true,\n})\nexport class ZMyzCardFooter {\n  @Element() host: HTMLZMyzCardFooterElement;\n\n  /** volume title */\n  @Prop()\n  titolo: string;\n\n  /** authors name text */\n  @Prop()\n  autori: string;\n\n  /** volume isbn */\n  @Prop()\n  isbn: string;\n\n  /** faded status */\n  @Prop()\n  faded: boolean;\n\n  /** card graphic variant (optional) */\n  @Prop()\n  cardtype?: LicenseType;\n\n  /** footer opened by default (optional) */\n  @Prop()\n  opened?: boolean = false;\n\n  /** display footer custom slotted content */\n  @Prop()\n  customContent = false;\n\n  @State()\n  isOpen = false;\n\n  @State()\n  allowTooltipAuthors = false;\n\n  private ellipsisAuthors?: HTMLElement;\n\n  @Listen(\"toggleClick\")\n  handleToggle(): void {\n    this.isOpen = !this.isOpen;\n    if (this.isOpen) {\n      const firstElem = this.getFirstListItem();\n      if (firstElem) {\n        requestAnimationFrame(() => {\n          firstElem.focus();\n        });\n      }\n    }\n  }\n\n  private getTitleAuthors(): string {\n    return this.allowTooltipAuthors ? this.autori : \"\";\n  }\n\n  componentWillLoad(): void {\n    if (this.opened) {\n      this.isOpen = true;\n    }\n  }\n\n  private elementsEllipsis(): void {\n    this.allowTooltipAuthors = this.elementAuthorsHasEllipsis() ? true : false;\n  }\n\n  private elementAuthorsHasEllipsis(): boolean {\n    return this.ellipsisAuthors.offsetWidth < this.ellipsisAuthors.scrollWidth;\n  }\n\n  private retrieveClass(): JSXBase.HTMLAttributes[\"class\"] {\n    return {\n      \"isopen\": this.isOpen,\n      \"real\": this.cardtype === LicenseType.REAL,\n      \"trial\": this.cardtype === LicenseType.TRIAL,\n      \"temp\": this.cardtype === LicenseType.TEMP,\n      \"custom-content\": this.customContent,\n    };\n  }\n\n  private footerTransitionHandler(e: TransitionEvent): void {\n    if ([\"visibility\", \"height\"].includes(e.propertyName)) {\n      this.elementsEllipsis();\n    }\n  }\n\n  private getFirstListItem(): HTMLElement {\n    return this.host.querySelector(\"[slot=list] > li a\");\n  }\n\n  render(): HTMLDivElement {\n    return (\n      <div class={{...(this.retrieveClass() as Record<string, boolean>), wrapper: true}}>\n        <footer\n          class={this.retrieveClass()}\n          onTransitionEnd={(e: TransitionEvent) => this.footerTransitionHandler(e)}\n        >\n          <span class=\"toggle\">\n            <slot name=\"toggle\" />\n          </span>\n          {this.titolo && <p class={{\"custom-content\": this.customContent}}>{this.titolo}</p>}\n          <div class={{\"content\": true, \"custom-content\": this.customContent}}>\n            <div>\n              <p\n                class=\"authors\"\n                ref={(el) => (this.ellipsisAuthors = el as HTMLElement)}\n              >\n                <span title={this.getTitleAuthors()}>\n                  <span\n                    aria-description=\"Autori\"\n                    class=\"bold\"\n                  >\n                    {this.autori}\n                  </span>\n                </span>\n              </p>\n              <p class=\"year-isbn\">\n                <span class=\"isbn\">\n                  <span>\n                    <span\n                      aria-description=\"ISBN edizione cartacea\"\n                      class=\"bold\"\n                    >\n                      {this.isbn}\n                    </span>{\" \"}\n                    (ed. cartacea)\n                  </span>\n                </span>\n              </p>\n            </div>\n            <div class={`slot-handler ${this.isOpen ? \"visible\" : \"hidden\"}`}>\n              <slot name=\"list\" />\n            </div>\n          </div>\n        </footer>\n        {this.customContent && <slot name=\"content\" />}\n      </div>\n    );\n  }\n}\n"],"mappings":"gMAAA,IAAMA,EAAY,s3GAClB,IAAAC,EAAeD,E,ICYFE,EAAcC,EAAA,+B,iJAyBN,M,mBAIH,M,YAGP,M,yBAGa,K,CAKtBC,EAAAC,UAAAC,aAAA,WACEC,KAAKC,QAAUD,KAAKC,OACpB,GAAID,KAAKC,OAAQ,CACf,IAAMC,EAAYF,KAAKG,mBACvB,GAAID,EAAW,CACbE,uBAAsB,WACpBF,EAAUG,O,OAMVR,EAAAC,UAAAQ,gBAAA,WACN,OAAON,KAAKO,oBAAsBP,KAAKQ,OAAS,E,EAGlDX,EAAAC,UAAAW,kBAAA,WACE,GAAIT,KAAKU,OAAQ,CACfV,KAAKC,OAAS,I,GAIVJ,EAAAC,UAAAa,iBAAA,WACNX,KAAKO,oBAAsBP,KAAKY,4BAA8B,KAAO,K,EAG/Df,EAAAC,UAAAc,0BAAA,WACN,OAAOZ,KAAKa,gBAAgBC,YAAcd,KAAKa,gBAAgBE,W,EAGzDlB,EAAAC,UAAAkB,cAAA,WACN,MAAO,CACLC,OAAUjB,KAAKC,OACfiB,KAAQlB,KAAKmB,WAAaC,EAAYC,KACtCC,MAAStB,KAAKmB,WAAaC,EAAYG,MACvCC,KAAQxB,KAAKmB,WAAaC,EAAYK,KACtC,iBAAkBzB,KAAK0B,c,EAInB7B,EAAAC,UAAA6B,wBAAA,SAAwBC,GAC9B,GAAI,CAAC,aAAc,UAAUC,SAASD,EAAEE,cAAe,CACrD9B,KAAKW,kB,GAIDd,EAAAC,UAAAK,iBAAA,WACN,OAAOH,KAAK+B,KAAKC,cAAc,qB,EAGjCnC,EAAAC,UAAAmC,OAAA,eAAAC,EAAAlC,KACE,OACEmC,EAAA,OAAAC,IAAA,2CAAKC,MAAKC,OAAAC,OAAAD,OAAAC,OAAA,GAAOvC,KAAKgB,iBAA2C,CAAEwB,QAAS,QAC1EL,EAAA,UAAAC,IAAA,2CACEC,MAAOrC,KAAKgB,gBACZyB,gBAAiB,SAACb,GAAuB,OAAAM,EAAKP,wBAAwBC,EAA7B,GAEzCO,EAAA,QAAAC,IAAA,2CAAMC,MAAM,UACVF,EAAA,QAAAC,IAAA,2CAAMM,KAAK,YAEZ1C,KAAK2C,QAAUR,EAAA,KAAAC,IAAA,2CAAGC,MAAO,CAAC,iBAAkBrC,KAAK0B,gBAAiB1B,KAAK2C,QACxER,EAAA,OAAAC,IAAA,2CAAKC,MAAO,CAACO,QAAW,KAAM,iBAAkB5C,KAAK0B,gBACnDS,EAAA,OAAAC,IAAA,4CACED,EAAA,KAAAC,IAAA,2CACEC,MAAM,UACNQ,IAAK,SAACC,GAAE,OAAMZ,EAAKrB,gBAAkBiC,CAA7B,GAERX,EAAA,QAAAC,IAAA,2CAAMW,MAAO/C,KAAKM,mBAChB6B,EAAA,QAAAC,IAAA,8DACmB,SACjBC,MAAM,QAELrC,KAAKQ,UAIZ2B,EAAA,KAAAC,IAAA,2CAAGC,MAAM,aACPF,EAAA,QAAAC,IAAA,2CAAMC,MAAM,QACVF,EAAA,QAAAC,IAAA,4CACED,EAAA,QAAAC,IAAA,8DACmB,yBACjBC,MAAM,QAELrC,KAAKgD,MACA,IAAG,qBAMnBb,EAAA,OAAAC,IAAA,2CAAKC,MAAO,gBAAAY,OAAgBjD,KAAKC,OAAS,UAAY,WACpDkC,EAAA,QAAAC,IAAA,2CAAMM,KAAK,YAIhB1C,KAAK0B,eAAiBS,EAAA,QAAAC,IAAA,2CAAMM,KAAK,Y,yHAvIf,I","ignoreList":[]}