import{r as t,c as o,h as i,H as e,g as r}from"./p-904a85e4.js";import{l as s}from"./p-3dce95ce.js";const a=document.documentElement;function n(t,o){const i=t.getBoundingClientRect(),e=i.width,r=i.height;let s,a,n=0,h=0,l=t;for(;l&&l!=o;){if(h+=l.offsetLeft,l===document.body?n+=l.getBoundingClientRect().top+window.scrollY:n+=l.offsetTop,window.DOMMatrix){const t=window.getComputedStyle(l),o=new DOMMatrix(t.transform||t.webkitTransform);o&&(h+=o.m41,l!==document.body&&(n+=o.m42))}if(!l.offsetParent)break;l=l.offsetParent}return l===document.body?(s=window.innerWidth,a=window.innerHeight):(s=l.offsetWidth,a=l.offsetHeight),{top:n,right:s-h-i.width,bottom:a-n-i.height,left:h,width:e,height:r}}const h=class{constructor(i){t(this,i),this.positionChange=o(this,"positionChange",7),this.type=s.AUTO,this.open=!1}validateType(t){t&&Object.values(s).every((o=>t!==o))&&(this.type=s.AUTO)}onPositionChange(){this.positionChange.emit({position:this.position})}disconnectedCallback(){cancelAnimationFrame(this.animationFrameRequestId)}onOpen(){if(cancelAnimationFrame(this.animationFrameRequestId),!this.content)if(this.open){const t=()=>{this.open&&(this.setPosition(),this.animationFrameRequestId=requestAnimationFrame(t))};t()}else{const t=this.host.style;t.removeProperty("top"),t.removeProperty("right"),t.removeProperty("bottom"),t.removeProperty("left")}}setPosition(){let t;if(t="string"==typeof this.bindTo?this.host.ownerDocument.querySelector(this.bindTo):this.bindTo?this.bindTo:this.host.parentElement,!t)return;const o=function(t){let o=t.parentNode;for(;o&&o!==a;){const{overflow:t,overflowX:i,overflowY:e}=window.getComputedStyle(o);if("hidden"===t||"hidden"===e||"hidden"===i)return o;if(o.scrollHeight>o.clientHeight&&"visible"!==t&&"visible"!==e||o.scrollWidth>o.clientWidth&&"visible"!==t&&"visible"!==i)return o;o=o.parentNode}return a}(t),i=o.getBoundingClientRect(),e=this.host.offsetParent,r=e?n(e,o):{top:0,right:0,bottom:0,left:0},h=n(t,o),l=h.top-o.scrollTop,p=i.height-(h.top+h.height)+o.scrollTop,c=h.left-o.scrollLeft,f=i.width-(h.left+h.width)+o.scrollLeft,d=Math.max(0,i.top+i.height-window.innerHeight),g=Math.max(0,i.left+i.width-window.innerWidth),u=Math.min(l,l+i.top),w=Math.min(p,p-d),m=Math.min(c,c+i.left),v=Math.min(f,f-g),b=u+w+h.height,x=m+v+h.width;let y=this.type;if(y===s.AUTO){const t=[];u/b>.9?t.unshift(s.TOP):u/b>.6?t.push(s.TOP):u/b<.1?t.unshift(s.BOTTOM):t.push(s.BOTTOM),m/x>.6?t.push(s.LEFT):m/x<.4&&t.push(s.RIGHT),y=t.join("_")}const z=this.host.style;this.content||(z.position="absolute");const _=h.top-r.top,M=h.right-r.right,$=h.bottom-r.bottom,C=h.left-r.left;y!==s.TOP&&y!==s.TOP_RIGHT&&y!==s.TOP_LEFT||(z.top="auto",z.bottom=`${$+h.height}px`),y!==s.BOTTOM&&y!==s.BOTTOM_RIGHT&&y!==s.BOTTOM_LEFT||(z.top=`${_+h.height}px`,z.bottom="auto"),y!==s.TOP&&y!==s.BOTTOM||(z.left=C+h.width/2-this.host.clientWidth/2+"px"),y!==s.TOP_RIGHT&&y!==s.BOTTOM_RIGHT||(z.right="auto",z.left=`${C+h.width}px`),y!==s.TOP_LEFT&&y!==s.BOTTOM_LEFT||(z.left="auto",z.right=`${M+h.width}px`),y!==s.RIGHT&&y!==s.LEFT||(z.top=_+h.height/2-this.host.clientHeight/2+"px",z.bottom="auto"),y===s.RIGHT&&(z.right="auto",z.left=`${C+h.width}px`),y===s.LEFT&&(z.left="auto",z.right=`${M+h.width}px`),this.position=y}componentWillLoad(){this.content&&(this.open=!0),this.validateType(this.type),this.onOpen()}render(){return this.content?i(e,{class:"legacy",position:this.type},this.content):i(e,{position:this.position},i("slot",null))}get host(){return r(this)}static get watchers(){return{type:["validateType"],position:["onPositionChange"],open:["onOpen"]}}};h.style=":host{--z-tooltip-theme--surface:var(--color-surface01);--z-tooltip-theme--text:var(--color-text01);--arrow-size:6px;--edge-offset:calc(-1 * (var(--arrow-size) + calc(var(--space-unit) * 2)));position:relative;display:none;align-items:center;justify-content:center;padding:var(--space-unit);min-width:calc(var(--space-unit) * 8);min-height:calc(var(--space-unit) * 4);color:var(--z-tooltip-theme--text);fill:currentColor;font-family:var(--font-family-sans);text-align:center;border-radius:var(--border-radius-small);background:var(--z-tooltip-theme--surface);filter:drop-shadow(0 4px 8px var(--shadow-color-base));will-change:filter}:host(.legacy){display:inline-flex;padding:calc(var(--space-unit) * 2);min-width:auto;min-height:auto;max-width:200px;font-style:italic;line-height:16px;letter-spacing:0.32px;font-size:12px;border:var(--border-size-small) solid var(--gray200);border-radius:var(--border-radius);filter:drop-shadow(0px 0px 2px rgba(0, 0, 0, 0.08))}:host(.legacy)::before{--arrow-size:14px}:host([position])::before{--arrow-edge-offset:calc(100% - var(--arrow-size) - var(--space-unit));--arrow-center-x-offset:calc(50% - calc(var(--arrow-size) / 2));--arrow-center-y-offset:calc(100% - calc(var(--arrow-size) / 2));content:'';position:absolute;width:var(--arrow-size);height:var(--arrow-size);background:inherit;transform:rotate(45deg)}:host([open][style*='top:']),:host([open][style*='inset:']){display:inline-flex}:host([position^='top']){margin-bottom:var(--space-unit)}:host([position='right']){margin-left:var(--space-unit)}:host([position='top_right']),:host([position='bottom_right']){margin-left:var(--edge-offset)}:host([position^='bottom']){margin-top:var(--space-unit)}:host([position='left']){margin-right:var(--space-unit)}:host([position='top_left']),:host([position='bottom_left']){margin-right:var(--edge-offset)}:host([position^='top'])::before{top:var(--arrow-center-y-offset)}:host([position^='bottom'])::before{bottom:var(--arrow-center-y-offset)}:host([position='top'])::before,:host([position='bottom'])::before{left:var(--arrow-center-x-offset)}:host([position='right'])::before,:host([position='left'])::before{top:var(--arrow-center-x-offset)}:host([position='right'])::before{right:var(--arrow-center-y-offset)}:host([position='top_right'])::before,:host([position='bottom_right'])::before{right:var(--arrow-edge-offset)}:host([position='left'])::before{left:var(--arrow-center-y-offset)}:host([position='top_left'])::before,:host([position='bottom_left'])::before{left:var(--arrow-edge-offset)}::slotted(*){flex:1 auto;overflow:auto}";export{h as z_tooltip}