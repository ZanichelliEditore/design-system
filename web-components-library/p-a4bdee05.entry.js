import{r as t,h as e,c as s,g as i}from"./p-98268a57.js";import{h as l,o as r}from"./p-41f12eeb.js";import{r as c,b as a,a as n,h as o,e as h}from"./p-ed78bb9b.js";import"./p-d69e14fb.js";const p=class{constructor(e){t(this,e),this.disabled=!1}render(){return e("label",{htmlFor:this.htmlfor,class:{disabled:this.disabled}},this.value)}};p.style="label{display:block;margin:var(--space-unit) 0;color:var(--color-text02);font-family:var(--font-family-sans);font-size:var(--font-size-1);font-weight:var(--font-sb);line-height:1.33;letter-spacing:0.32px;text-transform:uppercase;text-align:left}label.disabled{color:var(--color-disabled02)}";const d=class{constructor(e){t(this,e),this.optionSelect=s(this,"optionSelect",7),this.htmlid=`id-${c()}`,this.disabled=!1,this.readonly=!1,this.message=!0,this.autocomplete=!1,this.noresultslabel="Nessun risultato",this.isOpen=!1,this.selectedItem=null,this.itemsList=[],this.toggleSelectUl=this.toggleSelectUl.bind(this),this.selectItem=this.selectItem.bind(this),this.handleSelectFocus=this.handleSelectFocus.bind(this)}watchItems(){this.itemsList=this.getInitialItemsArray(),this.selectedItem=this.itemsList.find((t=>t.selected))}async getSelectedItem(){return this.selectedItem}async getValue(){return this.getSelectedValue()}async setValue(t){let e=[];"string"==typeof t?e.push(t):e=t,this.selectedItem=this.itemsList.find((t=>e.includes(t.id)))}emitOptionSelect(){this.optionSelect.emit({id:this.htmlid,selected:this.getSelectedValue()})}componentWillLoad(){this.watchItems()}componentWillRender(){this.filterItems(this.searchString)}getInitialItemsArray(){return"string"==typeof this.items?JSON.parse(this.items):this.items}mapSelectedItemToItemsArray(){return this.getInitialItemsArray().map((t=>{var e;return t.selected=t.id===(null===(e=this.selectedItem)||void 0===e?void 0:e.id),t}))}getSelectedValue(){var t;return null===(t=this.selectedItem)||void 0===t?void 0:t.id}filterItems(t){const e=this.mapSelectedItemToItemsArray();this.itemsList=(null==t?void 0:t.length)?e.filter((e=>e.name.toUpperCase().includes(t.toUpperCase()))).map((e=>{const s=e.name.toUpperCase().indexOf(t.toUpperCase()),i=s+t.length,l=e.name.substring(0,s)+`<strong>${e.name.substring(s,i)}</strong>`+e.name.substring(i,e.name.length);return e.name=l,e})):e}hasAutocomplete(){return!0===a(this.autocomplete)}handleInputChange(t){this.searchString=t.detail.value,this.isOpen||this.toggleSelectUl()}selectItem(t,e){t&&t.disabled||(this.itemsList=this.mapSelectedItemToItemsArray(),this.itemsList=this.itemsList.map((s=>(s.selected=!1,s.id===(t?t.id:null)&&(s.selected=e),s))),this.selectedItem=this.itemsList.find((t=>t.selected)),this.emitOptionSelect(),this.searchString&&(this.searchString=null))}arrowsSelectNav(t,e){if(![l.ARROW_DOWN,l.ARROW_UP].includes(t.key))return;let s;t.preventDefault(),t.stopPropagation(),this.isOpen||this.toggleSelectUl(),t.key===l.ARROW_DOWN?s=e+1===this.itemsList.length?0:e+1:t.key===l.ARROW_UP&&(s=e<=0?this.itemsList.length-1:e-1),this.focusSelectItem(s)}focusSelectItem(t){const e=this.element.querySelector(`#${this.htmlid}_${t}`);e&&e.focus()}toggleSelectUl(t=!1){this.disabled||this.readonly||(this.isOpen?(document.removeEventListener("click",this.handleSelectFocus),document.removeEventListener("keyup",this.handleSelectFocus),t&&this.element.querySelector(`#${this.htmlid}_input`).focus()):(document.addEventListener("click",this.handleSelectFocus),document.addEventListener("keyup",this.handleSelectFocus)),this.isOpen=!this.isOpen)}handleInputClick(t){t.composedPath().find((t=>t.classList&&t.classList.contains("resetIcon")))?t.stopPropagation():this.toggleSelectUl()}handleSelectFocus(t){if(t instanceof KeyboardEvent&&t.key===l.ESC)return t.stopPropagation(),this.toggleSelectUl(!0);t instanceof KeyboardEvent&&t.key!==l.TAB&&t.key!==l.ENTER||n(h()).find((t=>"z-input"===t.nodeName.toLowerCase()&&t.id===`${this.htmlid}_input`))||this.toggleSelectUl(t instanceof MouseEvent)}scrollToLetter(t){const e=this.itemsList.find((e=>e.name.charAt(0)===t));e&&this.focusSelectItem(this.itemsList.indexOf(e))}renderInput(){return e("z-input",{id:`${this.htmlid}_input`,htmlid:`${this.htmlid}_input`,placeholder:this.placeholder,value:!this.isOpen&&this.selectedItem?this.selectedItem.name.replace(/<[^>]+>/g,""):null,label:this.label,"aria-label":this.ariaLabel,icon:this.isOpen?"caret-up":"caret-down",hasclearicon:this.hasAutocomplete(),message:!1,disabled:this.disabled,readonly:this.readonly||!this.hasAutocomplete()&&this.isOpen,status:this.isOpen?void 0:this.status,onClick:t=>{this.handleInputClick(t)},onKeyUp:t=>{13!==t.keyCode&&t.preventDefault(),o(t,this.toggleSelectUl)},onKeyDown:t=>this.arrowsSelectNav(t,this.selectedItem?this.itemsList.indexOf(this.selectedItem):-1),onInputChange:t=>{this.handleInputChange(t)},onKeyPress:t=>{this.hasAutocomplete()||(t.preventDefault(),this.scrollToLetter(String.fromCharCode(t.keyCode)))}})}renderSelectUl(){var t;return e("div",{class:this.isOpen?"open":"closed",tabindex:"-1"},e("div",{class:"ulScrollWrapper",tabindex:"-1"},e("z-list",{role:"listbox",tabindex:this.disabled||this.readonly||!this.isOpen?-1:0,id:this.htmlid,"aria-activedescendant":null===(t=this.selectedItem)||void 0===t?void 0:t.id,"aria-multiselectable":!1,class:{disabled:this.disabled,readonly:this.readonly,filled:!!this.selectedItem,[`input_${this.status}`]:!this.isOpen&&!!this.status,input_default:this.isOpen||!this.status}},this.renderSelectUlItems())))}renderSelectUlItems(){return this.itemsList.length?this.itemsList.map(((t,s)=>e("z-list-element",{clickable:!t.disabled,disabled:t.disabled,dividerType:r.element,role:"option",tabindex:t.disabled||!this.isOpen?-1:0,"aria-selected":!!t.selected,id:`${this.htmlid}_${s}`,onClickItem:()=>this.selectItem(t,!0),onKeyDown:t=>this.arrowsSelectNav(t,s)},e("span",{class:{selected:!!t.selected},innerHTML:t.name})))):this.renderNoSearchResults()}renderNoSearchResults(){return e("z-list-element",{color:"blue500",class:"noResults"},e("z-icon",{name:"multiply-circle",fill:"blue500"}),this.noresultslabel)}renderMessage(){if(!1!==a(this.message))return e("z-input-message",{message:!0===a(this.message)?void 0:this.message,status:this.status})}render(){return e("div",{class:"selectWrapper"},this.renderInput(),this.renderSelectUl(),this.renderMessage())}get element(){return i(this)}static get watchers(){return{items:["watchItems"]}}};d.style=".sc-z-select-h{display:inline-block;width:inherit;font-family:var(--font-family-sans);font-weight:var(--font-rg);font-size:var(--font-size-3);color:var(--color-text02)}.selectWrapper.sc-z-select>z-input.sc-z-select{width:100%}.selectWrapper.sc-z-select>div.sc-z-select{position:relative}.selectWrapper.sc-z-select>div.closed.sc-z-select{height:0;overflow:hidden}.selectWrapper.sc-z-select .ulScrollWrapper.sc-z-select{background:var(--color-surface01);position:absolute;padding:calc(var(--space-unit) * 0.5) var(--space-unit);border:var(--border-size-small) solid var(--gray200);border-top:none;width:100%;box-sizing:border-box;outline:none}.selectWrapper.sc-z-select .closed.sc-z-select .ulScrollWrapper.sc-z-select{z-index:10}.selectWrapper.sc-z-select .open.sc-z-select .ulScrollWrapper.sc-z-select{z-index:20}.selectWrapper.sc-z-select .ulScrollWrapper.sc-z-select>z-list.sc-z-select{position:relative;padding:calc(var(--space-unit) * 0.5);max-height:240px;overflow:auto;outline:none;scrollbar-color:var(--color-primary01) transparent}.selectWrapper.sc-z-select .ulScrollWrapper.sc-z-select>z-list.sc-z-select::-webkit-scrollbar{background:linear-gradient(\n    to right,\n    transparent 0 3px,\n    var(--gray200) 3px 7px,\n    transparent 7px 10px\n  );width:10px;border-radius:var(--border-radius)}.selectWrapper.sc-z-select .ulScrollWrapper.sc-z-select>z-list.sc-z-select::-webkit-scrollbar-track{background-color:transparent}.selectWrapper.sc-z-select .ulScrollWrapper.sc-z-select>z-list.sc-z-select::-webkit-scrollbar-thumb{width:10px;background-color:var(--color-primary01);border-radius:var(--border-radius)}.selectWrapper.sc-z-select .ulScrollWrapper.sc-z-select>z-list.sc-z-select::-webkit-scrollbar-thumb:hover{background-color:var(--color-hover-primary)}.selectWrapper.sc-z-select .ulScrollWrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select span.sc-z-select{display:block;padding:0 calc(var(--space-unit) * 1.5)}.selectWrapper.sc-z-select .ulScrollWrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select span.selected.sc-z-select{font-weight:bold}.selectWrapper.sc-z-select .ulScrollWrapper.sc-z-select .noResults.sc-z-select z-icon.sc-z-select{margin-right:var(--space-unit)}";export{p as z_input_label,d as z_select}