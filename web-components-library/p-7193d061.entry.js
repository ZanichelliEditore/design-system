import{r as t,c as o,h as e,g as r}from"./p-10bb4f4b.js";import{P as i,g as s}from"./p-025f494e.js";const n=':host{--z-popover-theme--surface:var(--color-surface01);--z-popover-theme--text:var(--color-text01);--z-popover-padding:0;--z-popover-shadow-filter:drop-shadow(0 1px 2px var(--shadow-color-base));position:relative;display:none;min-width:calc(var(--space-unit) * 8);min-height:calc(var(--space-unit) * 4);align-items:center;justify-content:center;padding:var(--z-popover-padding);background:var(--z-popover-theme--surface);border-radius:var(--border-radius-small);color:var(--z-popover-theme--text);fill:currentcolor;filter:var(--z-popover-shadow-filter);font-family:var(--font-family-sans);text-align:center}:host([open][current-position]),:host([open="true"][current-position]){display:flex}:host([center][current-position="top"]),:host([center][current-position="bottom"]){transform:translateX(-50%)}:host([center][current-position="right"]),:host([center][current-position="left"]){transform:translateY(-50%)}:host([current-position^="top"]){margin:0 0 var(--space-unit)}:host([current-position^="bottom"]){margin:var(--space-unit) 0 0}:host([current-position^="left"]){margin:0 var(--space-unit) 0 0}:host([current-position^="right"]){margin:0 0 0 var(--space-unit)}:host([current-position])::before{--arrow-size:6px;--arrow-edge-offset:calc(100% - var(--space-unit) - (var(--arrow-size) / 2));--arrow-center-x-offset:calc(50% - (var(--arrow-size) / 2));--arrow-center-y-offset:calc(100% - (var(--arrow-size) / 2));position:absolute;display:block;width:var(--arrow-size);height:var(--arrow-size);background:var(--z-popover-theme--surface);content:"";transform:rotate(45deg)}:host([show-arrow="false"])::before,:host(:not([show-arrow]))::before{display:none}:host([current-position^="top"])::before{top:var(--arrow-center-y-offset)}:host([current-position^="bottom"])::before{bottom:var(--arrow-center-y-offset)}:host([current-position="top"])::before,:host([current-position="bottom"])::before{right:var(--arrow-edge-offset)}:host([current-position="right"])::before,:host([current-position="left"])::before{bottom:var(--arrow-edge-offset)}:host([current-position="right"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left"])::before{left:var(--arrow-center-y-offset)}:host([current-position="top_right"])::before,:host([current-position="bottom_right"])::before{right:var(--arrow-edge-offset)}:host([current-position="top_left"])::before,:host([current-position="bottom_left"])::before{left:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="left_top"])::before{top:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="right_bottom"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left_top"])::before,:host([current-position="left_bottom"])::before{left:var(--arrow-center-y-offset)}:host([current-position="right_bottom"])::before,:host([current-position="left_bottom"])::before{bottom:var(--arrow-edge-offset)}:host([center][current-position="top"])::before,:host([center][current-position="bottom"])::before{right:auto;left:var(--arrow-center-x-offset)}:host([center][current-position="right"])::before,:host([center][current-position="left"])::before{top:var(--arrow-center-x-offset);bottom:auto}::slotted(*){overflow:auto;flex:1 auto}';const a=n;const c=document.documentElement;function f(t){if(t.parentNode.host){return t.parentNode.host}return t.parentNode}function h(t){let o=f(t);while(o&&o!==c){const{overflow:t,overflowX:e,overflowY:r}=window.getComputedStyle(o);if(t==="hidden"||r==="hidden"||e==="hidden"){return o}if(o.scrollHeight>o.clientHeight&&t!=="visible"&&r!=="visible"||o.scrollWidth>o.clientWidth&&t!=="visible"&&e!=="visible"){return o}o=f(o)}return c}function p(t,o){const e=t.getBoundingClientRect();const r=e.width;const i=e.height;let s=0;let n=0;let a=t;while(a&&a!=o){n+=a.offsetLeft;if(a===document.body){s+=a.getBoundingClientRect().top+window.scrollY}else{s+=a.offsetTop}if(window.DOMMatrix){const t=window.getComputedStyle(a);const o=t.transform||t.webkitTransform;const e=new DOMMatrix(o);if(e){n+=e.m41;if(a!==document.body){s+=e.m42}}}if(!a.offsetParent){break}a=a.offsetParent}let c;let f;if(a===document.body){c=window.innerWidth;f=window.innerHeight}else{c=a.offsetWidth;f=a.offsetHeight}const h=c-n-e.width;const p=f-s-e.height;return{top:s,right:h,bottom:p,left:n,width:r,height:i}}const l=class{constructor(e){t(this,e);this.positionChange=o(this,"positionChange",7);this.openChange=o(this,"openChange",7);this.position=i.AUTO;this.open=false;this.bindTo=undefined;this.showArrow=false;this.center=false;this.closable=true;this.currentPosition=undefined}closePopoverWithKeyboard(t){if(this.closable&&t.key===s.ESC){this.open=false}}handleOutsideClick(t){if(!this.closable||!this.open){return}if(!t.composedPath().includes(this.host)){const o=t.target;const e=this.bindTo instanceof HTMLElement?this.bindTo.contains(o):o.closest(this.bindTo);if(e){t.stopPropagation()}this.open=false;this.positionChange.emit({position:this.currentPosition})}}validatePosition(t){if(t&&!Object.values(i).includes(t)){this.position=i.AUTO}this.currentPosition=this.position;this.positionChange.emit({position:this.currentPosition})}onOpen(){cancelAnimationFrame(this.animationFrameRequestId);if(this.open){const t=()=>{if(this.open){this.setPosition();this.animationFrameRequestId=requestAnimationFrame(t)}};t()}else if(this.host.hasAttribute("current-position")){this.host.removeAttribute("current-position");this.currentPosition=undefined}this.openChange.emit({open:this.open})}disconnectedCallback(){cancelAnimationFrame(this.animationFrameRequestId)}setPosition(){let t;if(typeof this.bindTo==="string"){t=this.host.ownerDocument.querySelector(this.bindTo)}else if(this.bindTo){t=this.bindTo}else{t=this.host.parentElement}if(!t){return}const o=h(t);const e=o.getBoundingClientRect();const r=this.host.offsetParent;const s=r?p(r,o):{top:0,right:0,bottom:0,left:0};const n=p(t,o);const a=n.top-o.scrollTop;const c=e.height-(n.top+n.height)+o.scrollTop;const f=n.left-o.scrollLeft;const l=e.width-(n.left+n.width)+o.scrollLeft;const u=Math.max(0,e.top+e.height-window.innerHeight);const d=Math.max(0,e.left+e.width-window.innerWidth);const b=Math.min(a,a+e.top);const v=Math.min(c,c-u);const w=Math.min(f,f+e.left);const m=Math.min(l,l-d);const g=b+v+n.height;const x=w+m+n.width;let $=this.currentPosition;const y=[];if(this.position===i.AUTO){if(w/x>.6){y.push(i.LEFT)}else if(w/x<.4){y.push(i.RIGHT)}if(b/g>.9){y.unshift(i.TOP)}else if(b/g>.6){y.push(i.TOP)}else if(b/g<.1){y.unshift(i.BOTTOM)}else{y.push(i.BOTTOM)}$=y.join("_")}const z=this.host.style;z.position="absolute";const _=n.top-s.top;const M=n.right-s.right;const k=n.bottom-s.bottom;const O=n.left-s.left;const P=this.center?.5:0;const j=this.center?.5:0;if($===i.TOP||$===i.TOP_RIGHT){z.top="auto";z.right="auto";z.bottom=`${k+n.height}px`;z.left=`${O+n.width*P}px`;z.maxHeight=`${b}px`;if($===i.TOP_RIGHT){z.maxWidth=`${m+n.width*j}px`}}else if($===i.TOP_LEFT){z.top="auto";z.right=`${M+n.width*P}px`;z.bottom=`${k+n.height}px`;z.left="auto";z.maxWidth=`${w}px`;z.maxHeight=`${b}px`}else if($===i.BOTTOM||$===i.BOTTOM_RIGHT){z.top=`${_+n.height}px`;z.right="auto";z.bottom="auto";z.left=`${O+n.width*P}px`;z.maxHeight=`${v}px`;if($===i.BOTTOM_RIGHT){z.maxWidth=`${m+n.width*j}px`}}else if($===i.BOTTOM_LEFT){z.top=`${_+n.height}px`;z.right=`${M+n.width*P}px`;z.bottom="auto";z.left="auto";z.maxWidth=`${w}px`;z.maxHeight=`${v}px`}else if($===i.RIGHT||$===i.RIGHT_BOTTOM){z.top=`${_+n.height*P}px`;z.right="auto";z.bottom="auto";z.left=`${O+n.width}px`;z.maxWidth=`${m}px`;z.maxHeight=`${v+n.height*j}px`}else if($===i.RIGHT_TOP){z.top="auto";z.right="auto";z.bottom=`${k+n.height*P}px`;z.left=`${O+n.width}px`;z.maxWidth=`${m}px`;z.maxHeight=`${b+n.height*j}px`}else if($===i.LEFT||$===i.LEFT_BOTTOM){z.top=`${_+n.height*P}px`;z.right=`${M+n.width}px`;z.bottom="auto";z.left="auto";z.maxWidth=`${w}px`;z.maxHeight=`${v+n.height*j}px`}else if($===i.LEFT_TOP){z.top="auto";z.right=`${M+n.width}px`;z.bottom=`${k+n.height*P}px`;z.left="auto";z.maxWidth=`${w}px`;z.maxHeight=`${b+n.height*j}px`}this.currentPosition=$||this.position;this.host.setAttribute("current-position",this.currentPosition)}componentWillLoad(){this.validatePosition(this.position);this.onOpen()}render(){return e("slot",{key:"5b096156553e94c50200ccd47d6ea97d65f03c54"})}get host(){return r(this)}static get watchers(){return{position:["validatePosition"],open:["onOpen"]}}};l.style=a;export{l as z_popover};
//# sourceMappingURL=p-7193d061.entry.js.map