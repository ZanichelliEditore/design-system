import{r as t,c as i,h as s}from"./p-d17ebc2f.js";import{h}from"./p-e43e61ac.js";import{h as e}from"./p-30fcd62b.js";import"./p-112455b1.js";import"./p-9ecf936d.js";import"./p-d69e14fb.js";const a=class{constructor(s){t(this,s),this.goToPage=i(this,"goToPage",7),this.changeStartPage=i(this,"changeStartPage",7),this.addPageToHistory=i(this,"addPageToHistory",7),this.currentpage=1,this.startpage=1,this.listhistoryrow=[],this.currentPages=[],this.velocityConstantMultiplier=2,this.navigateRight=this.navigateRight.bind(this),this.navigateLeft=this.navigateLeft.bind(this),this.emitGoToPage=this.emitGoToPage.bind(this)}componentDidLoad(){this.scrollPage=this.scrollPage.bind(this);const t=new h(this.bar);t.on("swiperight",this.scrollPage),t.on("swipeleft",this.scrollPage)}componentWillRender(){this.initPagination()}componentWillUpdate(){this.initPagination()}initPagination(){this.loadPages(),this.historyraw&&this.parsehistoryraw(this.historyraw)}parsehistoryraw(t){this.listhistoryrow=[...JSON.parse(t)]}scrollPage(t){const i=Math.round(Math.abs(t.velocity))*this.velocityConstantMultiplier,s=Math.max(1,i);switch(t.type){case"swiperight":this.canNavigateLeft()&&this.emitChangeStartPage(Math.max(1,this.startpage-s));break;case"swipeleft":this.canNavigateRight()&&this.emitChangeStartPage(Math.min(this.startpage+s,this.pages-this.visiblepages+1))}}emitGoToPage(t){this.currentpage=t,this.goToPage.emit({page:t}),this.addPageToHistory.emit({page:t})}emitChangeStartPage(t){this.startpage=t,this.changeStartPage.emit({startpage:t})}loadPages(){this.currentPages.splice(0);const t=this.pageWindow();let i;for(i=0;i<t;i++)this.currentPages.push(i+this.startpage)}pageWindow(){return Math.min(this.pages,this.visiblepages)}canNavigateLeft(){return this.startpage>1}canNavigateRight(){return this.startpage+this.visiblepages-1<this.pages}navigateLeft(){this.canNavigateLeft()&&(this.startpage--,this.emitChangeStartPage(this.startpage),this.loadPages())}navigateRight(){this.canNavigateRight()&&(this.startpage++,this.emitChangeStartPage(this.startpage),this.loadPages())}render(){return s("div",{ref:t=>this.bar=t},s("z-icon",{name:"chevron-left",class:!this.canNavigateLeft()&&"disabled",onClick:()=>this.navigateLeft(),onKeyPress:t=>e(t,this.navigateLeft),tabindex:this.canNavigateLeft()?0:-1}),this.currentPages.map((t=>s("z-pagination-page",{value:t,isselected:t===this.currentpage,onClick:()=>this.emitGoToPage(t),onKeyDown:i=>e(i,this.emitGoToPage,t),isvisited:this.listhistoryrow.includes(t)}))),s("z-icon",{name:"chevron-right",class:!this.canNavigateRight()&&"disabled",onClick:()=>this.navigateRight(),onKeyPress:t=>e(t,this.navigateRight),tabindex:this.canNavigateRight()?0:-1}))}};a.style=":host>div{display:flex;height:48px;flex-flow:row nowrap;align-content:center;align-items:center;justify-content:space-around}:host>div>z-icon{margin:calc(var(--space-unit) * 2) 0;color:var(--color-primary01);cursor:pointer;fill:var(--color-primary01)}:host>div>z-icon.disabled{color:var(--color-disabled01);cursor:default;fill:var(--color-disabled01);pointer-events:none}";export{a as z_pagination_bar}