{"version":3,"names":["stylesCss","ZMyzCardInfoStyle0","ZMyzCardInfo","exports","class_1","hostRef","this","emitFlipCard","bind","prototype","showBack","flipCard","emit","componentWillLoad","setStringOrArray","componentWillUpdate","componentDidRender","handleContentHeight","contentWrapper","infoWrapper","hiddenContent","scrollHeight","offsetHeight","height","onlineLicenseWrapper","offlineLicenseWrapper","style","concat","data","cardData","JSON","parse","renderCloseIcon","_this","h","name","width","onClick","tabindex","htmltabindex","onKeyUp","e","handleKeyboardSubmit","renderGeneralSection","title","_a","description","_b","class","tooltip","ref","el","renderAuthor","renderYear","author","year","renderTooltip","_c","position","PopoverPosition","RIGHT","setExpirationLicenseMessage","type","onlineLicense","expired","offlineLicense","expiring","renderOnlineLicenseSection","expiration","renderOfflineLicenseSection","installations","render","key"],"sources":["src/snowflakes/myz/card/z-myz-card-info/styles.css?tag=z-myz-card-info&encapsulation=shadow","src/snowflakes/myz/card/z-myz-card-info/index.tsx"],"sourcesContent":[":host {\n  width: 100%;\n  font-family: var(--font-family-sans);\n  font-weight: var(--font-rg);\n}\n\n:host > div {\n  position: relative;\n  display: grid;\n  width: calc(100% + calc(var(--space-unit) * 2));\n  height: 402px;\n  box-sizing: border-box;\n  padding: calc(var(--space-unit) * 2) calc(var(--space-unit) * 3);\n  border: var(--border-size-small) solid var(--color-primary01);\n  margin-left: calc(-1 * var(--space-unit));\n  background: var(--color-surface01);\n  border-radius: 0;\n  box-shadow: 0 2px 4px 0 rgb(66 69 72 / 35%);\n}\n\n:host > div > z-icon {\n  position: absolute;\n  top: var(--space-unit);\n  right: var(--space-unit);\n  cursor: pointer;\n  fill: var(--color-primary01);\n}\n\n:host > div > div.cta-wrapper {\n  display: flex;\n  flex-flow: column nowrap;\n  align-self: end;\n  justify-content: space-between;\n}\n\n:host > div > div.content-wrapper {\n  position: relative;\n  overflow: hidden;\n  align-self: stretch;\n}\n\n:host > div > div.content-wrapper > section {\n  box-sizing: border-box;\n  padding: var(--space-unit) 0;\n  border-bottom: var(--border-size-small) solid var(--color-surface04);\n  color: var(--color-surface05);\n  font-size: 14px;\n  line-height: 20px;\n}\n\n:host > div > div.content-wrapper > section:last-child {\n  border-bottom: none;\n}\n\n:host > div > div.content-wrapper > section.info-wrapper {\n  position: relative;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n\n:host > div > div.content-wrapper > section.info-wrapper.hidden::after {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background: linear-gradient(180deg, rgb(255 0 0 / 0%), rgb(255 0 0 / 0%) 60%, white);\n  content: \"\";\n  pointer-events: none;\n}\n\n:host > div > div.content-wrapper > section > span.license-heading {\n  display: flex;\n  justify-content: space-between;\n}\n\n:host > div > div.content-wrapper > section > span.license-heading > span.expired {\n  color: var(--color-secondary02);\n  font-size: 12px;\n  font-weight: 600;\n}\n\n:host > div > div.content-wrapper > section > span.license-heading > span.expiring {\n  color: var(--color-warning01);\n  font-size: 12px;\n  font-weight: 600;\n}\n\n:host > div > div.content-wrapper > z-popover {\n  position: absolute;\n  top: 0;\n  left: calc(var(--space-unit) * 4);\n}\n","import {Component, Event, EventEmitter, Prop, State, h} from \"@stencil/core\";\nimport {DictionaryData, PopoverPosition} from \"../../../../beans\";\nimport {handleKeyboardSubmit} from \"../../../../utils/utils\";\n\n/**\n * @slot  - content\n */\n@Component({\n  tag: \"z-myz-card-info\",\n  styleUrl: \"styles.css\",\n  shadow: true,\n})\nexport class ZMyzCardInfo {\n  /** dictionary info */\n  @Prop()\n  data: string | DictionaryData;\n\n  /** tabindex link attribute (optional) */\n  @Prop()\n  htmltabindex?: number = 0;\n\n  @State()\n  hiddenContent = false;\n\n  @State()\n  tooltip = false;\n\n  private cardData: DictionaryData;\n\n  private contentWrapper: HTMLElement;\n\n  private infoWrapper: HTMLElement;\n\n  private onlineLicenseWrapper: HTMLElement;\n\n  private offlineLicenseWrapper: HTMLElement;\n\n  /** flip card to front */\n  @Event()\n  flipCard: EventEmitter;\n\n  private emitFlipCard(showBack = false): void {\n    this.flipCard.emit(showBack);\n  }\n\n  constructor() {\n    this.emitFlipCard = this.emitFlipCard.bind(this);\n  }\n\n  componentWillLoad(): void {\n    this.setStringOrArray();\n  }\n\n  componentWillUpdate(): void {\n    this.setStringOrArray();\n  }\n\n  componentDidRender(): void {\n    this.handleContentHeight();\n  }\n\n  private handleContentHeight(): void {\n    if (!this.contentWrapper && !this.infoWrapper) {\n      this.hiddenContent = false;\n\n      return;\n    }\n\n    if (\n      this.contentWrapper.scrollHeight > this.contentWrapper.offsetHeight ||\n      this.infoWrapper.scrollHeight > this.infoWrapper.offsetHeight\n    ) {\n      const height =\n        this.contentWrapper.offsetHeight -\n        this.onlineLicenseWrapper.offsetHeight -\n        this.offlineLicenseWrapper.offsetHeight;\n      this.infoWrapper.style.height = `${height}px`;\n      this.hiddenContent = true;\n\n      return;\n    }\n\n    this.hiddenContent = false;\n  }\n\n  private setStringOrArray(): void {\n    if (typeof this.data === \"string\") {\n      this.cardData = JSON.parse(this.data);\n    } else {\n      this.cardData = this.data;\n    }\n  }\n\n  private renderCloseIcon(): HTMLZIconElement {\n    return (\n      <z-icon\n        name=\"multiply-circled-filled\"\n        height={18}\n        width={18}\n        onClick={() => this.emitFlipCard(false)}\n        tabindex={this.htmltabindex}\n        onKeyUp={(e: KeyboardEvent) => {\n          handleKeyboardSubmit(e, this.emitFlipCard, false);\n        }}\n      />\n    );\n  }\n\n  private renderGeneralSection(): HTMLElement {\n    const title = this?.cardData?.title;\n    const description = this?.cardData?.description;\n\n    return (\n      <section\n        class={`info-wrapper ${this.hiddenContent ? \"hidden\" : \"\"}`}\n        onClick={() => {\n          if (this.hiddenContent) {\n            this.tooltip = !this.tooltip;\n          }\n        }}\n        ref={(el) => (this.infoWrapper = el)}\n      >\n        {this.renderAuthor()}\n        {this.renderYear()}\n        {title}\n        <br />\n        {description}\n      </section>\n    );\n  }\n\n  private renderAuthor(): HTMLSpanElement {\n    const author = this?.cardData?.author;\n    if (!author) {\n      return null;\n    }\n\n    return (\n      <span>\n        Autore: <b>{author}</b>\n        <br />\n      </span>\n    );\n  }\n\n  private renderYear(): HTMLSpanElement {\n    const year = this?.cardData?.year;\n    if (!year) {\n      return null;\n    }\n\n    return (\n      <span>\n        Anno: <b>{year}</b>\n        <br />\n      </span>\n    );\n  }\n\n  private renderTooltip(): HTMLZPopoverElement {\n    if (!this.tooltip) {\n      return;\n    }\n\n    if (!this.cardData) {\n      return;\n    }\n    const {title, year, author, description} = this.cardData;\n\n    return (\n      <z-popover\n        position={PopoverPosition.RIGHT}\n        onClick={() => (this.tooltip = false)}\n      >\n        {`${title} ${year} ${author} ${description}`}\n      </z-popover>\n    );\n  }\n\n  private setExpirationLicenseMessage(type: string): HTMLSpanElement {\n    if (\n      (type === \"online\" && this.cardData.onlineLicense.expired) ||\n      (type === \"offline\" && this.cardData.offlineLicense.expired)\n    ) {\n      return <span class=\"expired\">SCADUTA</span>;\n    }\n\n    if (\n      (type === \"online\" && this.cardData.onlineLicense.expiring) ||\n      (type === \"offline\" && this.cardData.offlineLicense.expiring)\n    ) {\n      return <span class=\"expiring\">IN SCADENZA</span>;\n    }\n  }\n\n  private renderOnlineLicenseSection(): HTMLElement {\n    if (!this?.cardData?.onlineLicense) {\n      return;\n    }\n\n    return (\n      <section ref={(el) => (this.onlineLicenseWrapper = el)}>\n        <span class=\"license-heading\">\n          <span>Licenza online</span>\n          {this.setExpirationLicenseMessage(\"online\")}\n        </span>\n        Scadenza il <b>{this.cardData.onlineLicense.expiration}</b>\n        <br />\n      </section>\n    );\n  }\n\n  private renderOfflineLicenseSection(): HTMLElement {\n    if (!this?.cardData?.offlineLicense) {\n      return;\n    }\n\n    return (\n      <section ref={(el) => (this.offlineLicenseWrapper = el)}>\n        <span class=\"license-heading\">\n          <span>Licenza offline</span>\n          {this.setExpirationLicenseMessage(\"offline\")}\n        </span>\n        Scadenza il <b>{this.cardData.offlineLicense.expiration}</b>\n        <br />\n        Installazioni disponibili: <b>{this.cardData.offlineLicense.installations}</b>\n      </section>\n    );\n  }\n\n  render(): HTMLDivElement {\n    return (\n      <div>\n        {this.renderCloseIcon()}\n        <div\n          class=\"content-wrapper\"\n          ref={(el) => (this.contentWrapper = el)}\n        >\n          {this.renderGeneralSection()}\n          {this.renderTooltip()}\n          {this.renderOnlineLicenseSection()}\n          {this.renderOfflineLicenseSection()}\n        </div>\n        <div class=\"cta-wrapper\">\n          <slot />\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}