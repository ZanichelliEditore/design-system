import{r as t,c as o,h as e,g as r}from"./p-d17ebc2f.js";import{P as i,f as s}from"./p-e1ac5c4e.js";const n=document.documentElement;function a(t){return t.parentNode.host?t.parentNode.host:t.parentNode}function h(t,o){const e=t.getBoundingClientRect(),r=e.width,i=e.height;let s,n,a=0,h=0,p=t;for(;p&&p!=o;){if(h+=p.offsetLeft,p===document.body?a+=p.getBoundingClientRect().top+window.scrollY:a+=p.offsetTop,window.DOMMatrix){const t=window.getComputedStyle(p),o=new DOMMatrix(t.transform||t.webkitTransform);o&&(h+=o.m41,p!==document.body&&(a+=o.m42))}if(!p.offsetParent)break;p=p.offsetParent}return p===document.body?(s=window.innerWidth,n=window.innerHeight):(s=p.offsetWidth,n=p.offsetHeight),{top:a,right:s-h-e.width,bottom:n-a-e.height,left:h,width:r,height:i}}const p=class{constructor(e){t(this,e),this.positionChange=o(this,"positionChange",7),this.openChange=o(this,"openChange",7),this.position=i.AUTO,this.open=!1,this.showArrow=!1,this.center=!1,this.closable=!0}closePopoverWithKeyboard(t){this.closable&&t.key===s.ESC&&(this.open=!1)}handleOutsideClick(t){if(this.closable&&this.open&&!t.composedPath().includes(this.host)){const o=t.target;(this.bindTo instanceof HTMLElement?this.bindTo.contains(o):o.closest(this.bindTo))&&t.stopPropagation(),this.open=!1,this.positionChange.emit({position:this.currentPosition})}}validatePosition(t){t&&!Object.values(i).includes(t)&&(this.position=i.AUTO),this.currentPosition=this.position,this.positionChange.emit({position:this.currentPosition})}onOpen(){if(cancelAnimationFrame(this.animationFrameRequestId),this.open){const t=()=>{this.open&&(this.setPosition(),this.animationFrameRequestId=requestAnimationFrame(t))};t()}else this.host.hasAttribute("current-position")&&(this.host.removeAttribute("current-position"),this.currentPosition=void 0);this.openChange.emit({open:this.open})}disconnectedCallback(){cancelAnimationFrame(this.animationFrameRequestId)}setPosition(){let t;if(t="string"==typeof this.bindTo?this.host.ownerDocument.querySelector(this.bindTo):this.bindTo?this.bindTo:this.host.parentElement,!t)return;const o=function(t){let o=a(t);for(;o&&o!==n;){const{overflow:t,overflowX:e,overflowY:r}=window.getComputedStyle(o);if("hidden"===t||"hidden"===r||"hidden"===e)return o;if(o.scrollHeight>o.clientHeight&&"visible"!==t&&"visible"!==r||o.scrollWidth>o.clientWidth&&"visible"!==t&&"visible"!==e)return o;o=a(o)}return n}(t),e=o.getBoundingClientRect(),r=this.host.offsetParent,s=r?h(r,o):{top:0,right:0,bottom:0,left:0},p=h(t,o),c=p.top-o.scrollTop,f=e.height-(p.top+p.height)+o.scrollTop,u=p.left-o.scrollLeft,l=e.width-(p.left+p.width)+o.scrollLeft,d=Math.max(0,e.top+e.height-window.innerHeight),b=Math.max(0,e.left+e.width-window.innerWidth),v=Math.min(c,c+e.top),w=Math.min(f,f-d),m=Math.min(u,u+e.left),g=Math.min(l,l-b),x=v+w+p.height,$=m+g+p.width;let y=this.currentPosition;const z=[];this.position===i.AUTO&&(m/$>.6?z.push(i.LEFT):m/$<.4&&z.push(i.RIGHT),v/x>.9?z.unshift(i.TOP):v/x>.6?z.push(i.TOP):v/x<.1?z.unshift(i.BOTTOM):z.push(i.BOTTOM),y=z.join("_"));const _=this.host.style;_.position="absolute";const M=p.top-s.top,k=p.right-s.right,O=p.bottom-s.bottom,P=p.left-s.left,j=this.center?.5:0,C=this.center?.5:0;y===i.TOP||y===i.TOP_RIGHT?(_.top="auto",_.right="auto",_.bottom=`${O+p.height}px`,_.left=`${P+p.width*j}px`,_.maxHeight=`${v}px`,y===i.TOP_RIGHT&&(_.maxWidth=`${g+p.width*C}px`)):y===i.TOP_LEFT?(_.top="auto",_.right=`${k+p.width*j}px`,_.bottom=`${O+p.height}px`,_.left="auto",_.maxWidth=`${m}px`,_.maxHeight=`${v}px`):y===i.BOTTOM||y===i.BOTTOM_RIGHT?(_.top=`${M+p.height}px`,_.right="auto",_.bottom="auto",_.left=`${P+p.width*j}px`,_.maxHeight=`${w}px`,y===i.BOTTOM_RIGHT&&(_.maxWidth=`${g+p.width*C}px`)):y===i.BOTTOM_LEFT?(_.top=`${M+p.height}px`,_.right=`${k+p.width*j}px`,_.bottom="auto",_.left="auto",_.maxWidth=`${m}px`,_.maxHeight=`${w}px`):y===i.RIGHT||y===i.RIGHT_BOTTOM?(_.top=`${M+p.height*j}px`,_.right="auto",_.bottom="auto",_.left=`${P+p.width}px`,_.maxWidth=`${g}px`,_.maxHeight=`${w+p.height*C}px`):y===i.RIGHT_TOP?(_.top="auto",_.right="auto",_.bottom=`${O+p.height*j}px`,_.left=`${P+p.width}px`,_.maxWidth=`${g}px`,_.maxHeight=`${v+p.height*C}px`):y===i.LEFT||y===i.LEFT_BOTTOM?(_.top=`${M+p.height*j}px`,_.right=`${k+p.width}px`,_.bottom="auto",_.left="auto",_.maxWidth=`${m}px`,_.maxHeight=`${w+p.height*C}px`):y===i.LEFT_TOP&&(_.top="auto",_.right=`${k+p.width}px`,_.bottom=`${O+p.height*j}px`,_.left="auto",_.maxWidth=`${m}px`,_.maxHeight=`${v+p.height*C}px`),this.currentPosition=y||this.position,this.host.setAttribute("current-position",this.currentPosition)}componentWillLoad(){this.validatePosition(this.position),this.onOpen()}render(){return e("slot",null)}get host(){return r(this)}static get watchers(){return{position:["validatePosition"],open:["onOpen"]}}};p.style=':host{--z-popover-theme--surface:var(--color-surface01);--z-popover-theme--text:var(--color-text01);--z-popover-padding:0;--z-popover-shadow-filter:drop-shadow(0 1px 2px var(--shadow-color-base));position:relative;display:none;min-width:calc(var(--space-unit) * 8);min-height:calc(var(--space-unit) * 4);align-items:center;justify-content:center;padding:var(--z-popover-padding);background:var(--z-popover-theme--surface);border-radius:var(--border-radius-small);color:var(--z-popover-theme--text);fill:currentcolor;filter:var(--z-popover-shadow-filter);font-family:var(--font-family-sans);text-align:center}:host([open][current-position]),:host([open="true"][current-position]){display:flex}:host([center][current-position="top"]),:host([center][current-position="bottom"]){transform:translateX(-50%)}:host([center][current-position="right"]),:host([center][current-position="left"]){transform:translateY(-50%)}:host([current-position^="top"]){margin:0 0 var(--space-unit)}:host([current-position^="bottom"]){margin:var(--space-unit) 0 0}:host([current-position^="left"]){margin:0 var(--space-unit) 0 0}:host([current-position^="right"]){margin:0 0 0 var(--space-unit)}:host([current-position])::before{--arrow-size:6px;--arrow-edge-offset:calc(100% - var(--space-unit) - (var(--arrow-size) / 2));--arrow-center-x-offset:calc(50% - (var(--arrow-size) / 2));--arrow-center-y-offset:calc(100% - (var(--arrow-size) / 2));position:absolute;display:block;width:var(--arrow-size);height:var(--arrow-size);background:var(--z-popover-theme--surface);content:"";transform:rotate(45deg)}:host([show-arrow="false"])::before,:host(:not([show-arrow]))::before{display:none}:host([current-position^="top"])::before{top:var(--arrow-center-y-offset)}:host([current-position^="bottom"])::before{bottom:var(--arrow-center-y-offset)}:host([current-position="top"])::before,:host([current-position="bottom"])::before{right:var(--arrow-edge-offset)}:host([current-position="right"])::before,:host([current-position="left"])::before{bottom:var(--arrow-edge-offset)}:host([current-position="right"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left"])::before{left:var(--arrow-center-y-offset)}:host([current-position="top_right"])::before,:host([current-position="bottom_right"])::before{right:var(--arrow-edge-offset)}:host([current-position="top_left"])::before,:host([current-position="bottom_left"])::before{left:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="left_top"])::before{top:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="right_bottom"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left_top"])::before,:host([current-position="left_bottom"])::before{left:var(--arrow-center-y-offset)}:host([current-position="right_bottom"])::before,:host([current-position="left_bottom"])::before{bottom:var(--arrow-edge-offset)}:host([center][current-position="top"])::before,:host([center][current-position="bottom"])::before{right:auto;left:var(--arrow-center-x-offset)}:host([center][current-position="right"])::before,:host([center][current-position="left"])::before{top:var(--arrow-center-x-offset);bottom:auto}::slotted(*){overflow:auto;flex:1 auto}';export{p as z_popover}