import{r as t,c as o,h as r,g as e}from"./p-98268a57.js";import{P as i,u as s}from"./p-9247f214.js";const n=document.documentElement;function a(t){return t.parentNode.host?t.parentNode.host:t.parentNode}function p(t,o){const r=t.getBoundingClientRect(),e=r.width,i=r.height;let s,n,a=0,p=0,h=t;for(;h&&h!=o;){if(p+=h.offsetLeft,h===document.body?a+=h.getBoundingClientRect().top+window.scrollY:a+=h.offsetTop,window.DOMMatrix){const t=window.getComputedStyle(h),o=new DOMMatrix(t.transform||t.webkitTransform);o&&(p+=o.m41,h!==document.body&&(a+=o.m42))}if(!h.offsetParent)break;h=h.offsetParent}return h===document.body?(s=window.innerWidth,n=window.innerHeight):(s=h.offsetWidth,n=h.offsetHeight),{top:a,right:s-p-r.width,bottom:n-a-r.height,left:p,width:e,height:i}}const h=class{constructor(r){t(this,r),this.positionChange=o(this,"positionChange",7),this.openChange=o(this,"openChange",7),this.position=i.auto,this.open=!1,this.showArrow=!1,this.center=!1,this.closable=!0}closePopoverWithKeyboard(t){this.closable&&t.key===s.ESC&&(this.open=!1)}handleOutsideClick(t){this.closable&&(t.path.find((t=>t===this.host))||(this.open=!1,this.positionChange.emit({position:this.currentPosition})))}validatePosition(t){t&&!Object.values(i).includes(t)&&(this.position=i.auto),this.currentPosition=this.position,this.positionChange.emit({position:this.currentPosition})}onOpen(){if(cancelAnimationFrame(this.animationFrameRequestId),this.open){const t=()=>{this.open&&(this.setPosition(),this.animationFrameRequestId=requestAnimationFrame(t))};t()}else this.host.hasAttribute("current-position")&&(this.host.removeAttribute("current-position"),this.currentPosition=void 0);this.openChange.emit({open:this.open})}disconnectedCallback(){cancelAnimationFrame(this.animationFrameRequestId)}setPosition(){let t;if(t="string"==typeof this.bindTo?this.host.ownerDocument.querySelector(this.bindTo):this.bindTo?this.bindTo:this.host.parentElement,!t)return;const o=function(t){let o=a(t);for(;o&&o!==n;){const{overflow:t,overflowX:r,overflowY:e}=window.getComputedStyle(o);if("hidden"===t||"hidden"===e||"hidden"===r)return o;if(o.scrollHeight>o.clientHeight&&"visible"!==t&&"visible"!==e||o.scrollWidth>o.clientWidth&&"visible"!==t&&"visible"!==r)return o;o=a(o)}return n}(t),r=o.getBoundingClientRect(),e=this.host.offsetParent,s=e?p(e,o):{top:0,right:0,bottom:0,left:0},h=p(t,o),c=h.top-o.scrollTop,f=r.height-(h.top+h.height)+o.scrollTop,u=h.left-o.scrollLeft,l=r.width-(h.left+h.width)+o.scrollLeft,d=Math.max(0,r.top+r.height-window.innerHeight),b=Math.max(0,r.left+r.width-window.innerWidth),v=Math.min(c,c+r.top),w=Math.min(f,f-d),m=Math.min(u,u+r.left),g=Math.min(l,l-b),x=v+w+h.height,$=m+g+h.width;let y=this.currentPosition;const z=[];this.position===i.auto&&(m/$>.6?z.push(i.left):m/$<.4&&z.push(i.right),v/x>.9?z.unshift(i.top):v/x>.6?z.push(i.top):v/x<.1?z.unshift(i.bottom):z.push(i.bottom),y=z.join("_"));const _=this.host.style;_.position="absolute";const M=h.top-s.top,k=h.right-s.right,C=h.bottom-s.bottom,O=h.left-s.left,P=this.center?.5:0,j=this.center?.5:0;y===i.top||y===i.top_right?(_.top="auto",_.right="auto",_.bottom=`${C+h.height}px`,_.left=`${O+h.width*P}px`,_.maxHeight=`${v}px`,y===i.top_right&&(_.maxWidth=`${g+h.width*j}px`)):y===i.top_left?(_.top="auto",_.right=`${k+h.width*P}px`,_.bottom=`${C+h.height}px`,_.left="auto",_.maxWidth=`${m}px`,_.maxHeight=`${v}px`):y===i.bottom||y===i.bottom_right?(_.top=`${M+h.height}px`,_.right="auto",_.bottom="auto",_.left=`${O+h.width*P}px`,_.maxHeight=`${w}px`,y===i.bottom_right&&(_.maxWidth=`${g+h.width*j}px`)):y===i.bottom_left?(_.top=`${M+h.height}px`,_.right=`${k+h.width*P}px`,_.bottom="auto",_.left="auto",_.maxWidth=`${m}px`,_.maxHeight=`${w}px`):y===i.right||y===i.right_bottom?(_.top=`${M+h.height*P}px`,_.right="auto",_.bottom="auto",_.left=`${O+h.width}px`,_.maxWidth=`${g}px`,_.maxHeight=`${w+h.height*j}px`):y===i.right_top?(_.top="auto",_.right="auto",_.bottom=`${C+h.height*P}px`,_.left=`${O+h.width}px`,_.maxWidth=`${g}px`,_.maxHeight=`${v+h.height*j}px`):y===i.left||y===i.left_bottom?(_.top=`${M+h.height*P}px`,_.right=`${k+h.width}px`,_.bottom="auto",_.left="auto",_.maxWidth=`${m}px`,_.maxHeight=`${w+h.height*j}px`):y===i.left_top&&(_.top="auto",_.right=`${k+h.width}px`,_.bottom=`${C+h.height*P}px`,_.left="auto",_.maxWidth=`${m}px`,_.maxHeight=`${v+h.height*j}px`),this.currentPosition=y||this.position,this.host.setAttribute("current-position",this.currentPosition)}componentWillLoad(){this.validatePosition(this.position),this.onOpen()}render(){return r("slot",null)}get host(){return e(this)}static get watchers(){return{position:["validatePosition"],open:["onOpen"]}}};h.style=':host{--z-popover-theme--surface:var(--color-surface01);--z-popover-theme--text:var(--color-text01);--z-popover-padding:0;--z-popover-shadow-filter:drop-shadow(0 1px 2px var(--shadow-color-base));position:relative;display:none;align-items:center;justify-content:center;padding:var(--z-popover-padding);min-width:calc(var(--space-unit) * 8);min-height:calc(var(--space-unit) * 4);color:var(--z-popover-theme--text);fill:currentColor;font-family:var(--font-family-sans);text-align:center;border-radius:var(--border-radius-small);background:var(--z-popover-theme--surface);filter:var(--z-popover-shadow-filter)}:host([open][current-position]),:host([open="true"][current-position]){display:flex}:host([center][current-position="top"]),:host([center][current-position="bottom"]){transform:translateX(-50%)}:host([center][current-position="right"]),:host([center][current-position="left"]){transform:translateY(-50%)}:host([current-position^="top"]){margin:0 0 var(--space-unit)}:host([current-position^="bottom"]){margin:var(--space-unit) 0 0}:host([current-position^="left"]){margin:0 var(--space-unit) 0 0}:host([current-position^="right"]){margin:0 0 0 var(--space-unit)}:host([current-position])::before{--arrow-size:6px;--arrow-edge-offset:calc(100% - var(--space-unit) - (var(--arrow-size) / 2));--arrow-center-x-offset:calc(50% - (var(--arrow-size) / 2));--arrow-center-y-offset:calc(100% - (var(--arrow-size) / 2));display:block;content:"";position:absolute;width:var(--arrow-size);height:var(--arrow-size);background:var(--z-popover-theme--surface);transform:rotate(45deg)}:host([show-arrow="false"])::before,:host(:not([show-arrow]))::before{display:none}:host([current-position^="top"])::before{top:var(--arrow-center-y-offset)}:host([current-position^="bottom"])::before{bottom:var(--arrow-center-y-offset)}:host([current-position="top"])::before,:host([current-position="bottom"])::before{right:var(--arrow-edge-offset)}:host([current-position="right"])::before,:host([current-position="left"])::before{bottom:var(--arrow-edge-offset)}:host([current-position="right"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left"])::before{left:var(--arrow-center-y-offset)}:host([current-position="top_right"])::before,:host([current-position="bottom_right"])::before{right:var(--arrow-edge-offset)}:host([current-position="top_left"])::before,:host([current-position="bottom_left"])::before{left:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="left_top"])::before{top:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="right_bottom"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left_top"])::before,:host([current-position="left_bottom"])::before{left:var(--arrow-center-y-offset)}:host([current-position="right_bottom"])::before,:host([current-position="left_bottom"])::before{bottom:var(--arrow-edge-offset)}:host([center][current-position="top"])::before,:host([center][current-position="bottom"])::before{right:auto;left:var(--arrow-center-x-offset)}:host([center][current-position="right"])::before,:host([center][current-position="left"])::before{top:var(--arrow-center-x-offset);bottom:auto}::slotted(*){flex:1 auto;overflow:auto}';export{h as z_popover}