import {html} from "lit-html";
import {styleMap} from "lit-html/directives/style-map.js";
import {Meta, Story, Canvas, ArgsTable} from "@storybook/addon-docs";
import {PopoverPositions} from "../../beans";
import {getColorTokens} from "../../utils/storybook-utils";
import "./index.stories.css";
import "./index";

## ZPopover

To be sure the AUTO algorithm finds the right container when calculating the position, set its container's position to `position: relative;`

<Meta
  title="ZPopover"
  component="z-popover"
  argTypes={{
    "position": {
      options: Object.values(PopoverPositions),
      control: {type: "select"},
    },
    "--z-popover-theme--surface": {
      options: getColorTokens(),
      control: {
        type: "select",
      },
    },
    "--z-popover-theme--text": {
      options: getColorTokens(),
      control: {
        type: "select",
      },
    },
  }}
/>

# ZPopover

<Canvas>
  <Story
    name="contextual-menu-like"
    args={{
      "position": PopoverPositions.right_bottom,
      "--z-popover-theme--surface": "var(--color-surface01)",
      "--z-popover-theme--text": "var(--color-text01)",
    }}
  >
    {(args) => html`
      <div class="popover-container">
        <z-popover
          .position=${args.position}
          bind-to="#icon"
          style=${styleMap({
            "--z-popover-theme--surface": `var(${args["--z-popover-theme--surface"]})`,
            "--z-popover-theme--text": `var(${args["--z-popover-theme--text"]})`,
          })}
        >
          <div class="container">
            <z-button
              slot="trigger"
              icon="gear"
            >
              Impostazioni
            </z-button>
          </div>
        </z-popover>
        <z-icon
          id="icon"
          name="plus-square-filled"
        ></z-icon>
      </div>
      <script>
        var iconTrigger = document.querySelector("#icon");
        var popover = document.querySelector("z-popover");
        iconTrigger.addEventListener("click", () => {
          if (popover.open) {
            popover.open = false;
          } else {
            popover.open = true;
          }
        });
      </script>
    `}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="tooltip-like"
    args={{
      "position": PopoverPositions.right,
      "--z-popover-theme--surface": "var(--color-surface01)",
      "--z-popover-theme--text": "var(--color-text01)",
    }}
  >
    {(args) => html`
      <div class="popover-container popover-container-tooltip">
        <z-popover
          .position=${args.position}
          center
          show-arrow
          bind-to="#icon"
          style=${styleMap({
            "--z-popover-theme--surface": `var(${args["--z-popover-theme--surface"]})`,
            "--z-popover-theme--text": `var(${args["--z-popover-theme--text"]})`,
          })}
        >
          <div class="container">
            <z-button
              slot="trigger"
              icon="gear"
            >
              Impostazioni
            </z-button>
          </div>
        </z-popover>
        <z-icon
          id="icon"
          name="plus-square-filled"
        ></z-icon>
      </div>
      <script>
        document.querySelector("#icon").addEventListener("click", () => {
          if (document.querySelector("z-popover").open) {
            document.querySelector("z-popover").open = false;
          } else {
            document.querySelector("z-popover").open = true;
          }
        });
      </script>
    `}
  </Story>
</Canvas>

<ArgsTable of="z-popover" />
