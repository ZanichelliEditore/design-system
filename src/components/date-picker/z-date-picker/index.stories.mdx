import { html } from "lit-html";
import { Meta, Canvas, Story, ArgsTable } from "@storybook/addon-docs";

import { ZDatePickerMode } from "../../../beans";

import "./index";
import "../styles.css";
import "../index.stories.css";

<Meta
  title="DatePicker/ZDatePicker"
  component="z-date-picker"
  argTypes={{
    mode: {
      options: Object.values(ZDatePickerMode),
      control: { type: "radio" },
    },
    datePickerId: {
      control: "text",
    },
    ariaLabel: {
      control: "text",
    },
    label: {
      control: "text",
    },
  }}
/>

# ZDatePicker with date

<Canvas>
  <Story
    name="ZDatePicker with date"
    args={{
      mode: "date",
      datePickerId: "picker-01",
      label: "ZDatePicker with date",
      ariaLabel: "date-picker",
    }}
    height="180px"
  >
    {(args) => html`
      <script>
        document
          .getElementById("${args.datePickerId}")
          .addEventListener("dateSelect", (e) => {
            const input = document.getElementById("output");
            input.innerHTML = "[" + e.detail + "]";
          });
      </script>
      <div class="story-container">
        <div class="story-picker-container">
          <z-date-picker
            mode=${args.mode}
            date-picker-id=${args.datePickerId}
            id=${args.datePickerId}
            ariaLabel=${args.ariaLabel}
            label=${args.label}
          ></z-date-picker>
        </div>
        <div class="story-output-container">
          <span>OUTPUT:</span>
          <br />
          <span id="output" />
        </div>
      </div>
    `}
  </Story>
</Canvas>

# ZDatePicker with date and time

<Canvas>
  <Story
    name="ZDatePicker with date and time"
    args={{
      mode: "date-time",
      datePickerId: "picker-02",
      label: "ZDatePicker with date and time",
      ariaLabel: "date-picker",
    }}
  >
    {(args) => html`
      <script>
        document
          .getElementById("${args.datePickerId}")
          .addEventListener("dateSelect", (e) => {
            const input = document.getElementById("output");
            input.innerHTML = "[" + e.detail + "]";
          });
      </script>
      <div class="story-container">
        <div class="story-picker-container">
          <z-date-picker
            mode=${args.mode}
            date-picker-id=${args.datePickerId}
            id=${args.datePickerId}
            ariaLabel=${args.ariaLabel}
            label=${args.label}
          ></z-date-picker>
        </div>
        <div class="story-output-container">
          <span>OUTPUT:</span>
          <br />
          <span id="output" />
        </div>
      </div>
    `}
  </Story>
</Canvas>

# ZDatePicker with only months

<Canvas>
  <Story
    name="ZDatePicker with only months"
    args={{
      mode: "months",
      datePickerId: "picker-03",
      label: "ZDatePicker with only months",
      ariaLabel: "date-picker",
    }}
  >
    {(args) => html`
      <script>
        document
          .getElementById("${args.datePickerId}")
          .addEventListener("dateSelect", (e) => {
            const input = document.getElementById("output");
            input.innerHTML = "[" + e.detail + "]";
          });
      </script>
      <div class="story-container">
        <div class="story-picker-container">
          <z-date-picker
            mode=${args.mode}
            date-picker-id=${args.datePickerId}
            id=${args.datePickerId}
            ariaLabel=${args.ariaLabel}
            label=${args.label}
          ></z-date-picker>
        </div>
        <div class="story-output-container">
          <span>OUTPUT:</span>
          <br />
          <span id="output" />
        </div>
      </div>
    `}
  </Story>
</Canvas>

# ZDatePicker with custom toggle

<Canvas>
  <Story
    name="ZDatePicker with custom toggle"
    args={{
      mode: "date",
      datePickerId: "picker-04",
      label: "date picker",
      ariaLabel: "date-picker",
    }}
  >
    {(args) => html`
      <script>
        document
          .getElementById("${args.datePickerId}")
          .addEventListener("dateSelect", (e) => {
            const input = document.getElementById("output");
            input.innerHTML = "[" + e.detail + "]";
          });
      </script>
      <div class="story-container">
        <div class="story-picker-container">
          <z-date-picker
            mode=${args.mode}
            date-picker-id=${args.datePickerId}
            id=${args.datePickerId}
            ariaLabel=${args.ariaLabel}
            label=${args.label}
            ><z-button slot="toggle">Open ZDatePicker</z-button></z-date-picker
          >
        </div>
        <div class="story-output-container">
          <span>OUTPUT:</span>
          <br />
          <span id="output" />
        </div>
      </div>
    `}
  </Story>
</Canvas>

<ArgsTable of="z-date-picker" />

## Usage

In order to avoid conflits between datepickers, pass a unique id as `datePickerId` prop.

This component emits an event called `dateSelect` with the value of the selected date.

When you manually type a date, make sure to use the correct format: `DD-MM-YYY` for `date` mode and `DD-MM-YYY - HH:MM` for `date-time` mode.
