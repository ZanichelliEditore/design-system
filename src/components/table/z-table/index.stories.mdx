import {html} from "lit-html";
import {styleMap} from "lit-html/directives/style-map.js";
import {Meta, Story, Canvas, ArgsTable} from "@storybook/addon-docs";
import "./index";

<Meta
  title="ZTable"
  component="z-table"
/>

# ZTable

<Canvas>
  <Story
    name="ZTable"
    args={{
      "bordered": true,
      "--z-table--cells-padding": "16px",
    }}
  >
    {(args) => html`<z-table
      .bordered=${args.bordered}
      style=${styleMap({
        "--z-table--cells-padding": args["--z-table--cells-padding"],
      })}
    >
      <z-thead>
        <z-tr>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
        </z-tr>
      </z-thead>
      <z-tbody>
        <z-tr>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
      </z-tbody>
      <z-tfoot>
        <z-tr>
          <z-td colspan="8">Table footer</z-td>
        </z-tr>
      </z-tfoot>
    </z-table>`}
  </Story>
</Canvas>

## Expandable rows

Just set `expandable` prop on the `z-tr` element to make it expandable.

If you put a clickable item as a child cell of a z-tr with `expandable` set to `true`, you need to set a "prevent-expand" class on that item, in order to prevent unwanted row expansions.

<Canvas>
  <Story
    name="Expandable rows"
    args={{
      "bordered": true,
      "--z-table--cells-padding": "16px",
    }}
  >
    {(args) => html`<z-table
      .bordered=${args.bordered}
      style=${styleMap({
        "--z-table--cells-padding": args["--z-table--cells-padding"],
      })}
    >
      <z-thead>
        <z-tr>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
        </z-tr>
      </z-thead>
      <z-tbody>
        <z-tr>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td show-menu>
            <span>Contenuto cella con menu</span>
            <div slot="contextual-menu">Contenuto del popover</div></z-td
          >
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr expandable>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>
            <span>Contenuto cella</span>
            <z-button
              class="prevent-expand"
              onclick="alert('button clicked without expanding the row')"
              icon="plus"
              size="x-small"
            ></z-button
          ></z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto espanso</z-td>
        </z-tr>
        <z-tr>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr expandable>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto espanso</z-td>
        </z-tr>
      </z-tbody>
      <z-tfoot>
        <z-tr>
          <z-td colspan="8">Table footer</z-td>
        </z-tr>
      </z-tfoot>
    </z-table>`}
  </Story>
</Canvas>

## Sticky

To make a column sticky, you need to set the `sticky` prop on the `z-th` and/or `z-td` elements of the same column.
For the header or footer, just set the `sticky` prop on the `z-thead` or `z-tfoot` element.

<Canvas>
  <Story
    name="Sticky"
    args={{
      "bordered": true,
      "--z-table--cells-padding": "16px",
      "stickyHeader": true,
      "stickyFooter": true,
      "stickFirstColumn": true,
    }}
  >
    {(args) => html`<z-table
      .bordered=${args.bordered}
      style=${styleMap({
        "--z-table--cells-padding": args["--z-table--cells-padding"],
        "height": "400px",
      })}
    >
      <z-thead .sticky=${args.stickyHeader}>
        <z-tr>
          <z-th .sticky=${args.stickFirstColumn}>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
          <z-th>Titolo</z-th>
        </z-tr>
      </z-thead>
      <z-tbody>
        <z-tr>
          <z-td .sticky=${args.stickFirstColumn}>Contenuto cella 1</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td show-menu>
            <span>Contenuto cella con menu</span>
            <div slot="contextual-menu">Contenuto del popover</div></z-td
          >
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td .sticky=${args.stickFirstColumn}>Contenuto cella 1</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td .sticky=${args.stickFirstColumn}>Contenuto cella 1</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td .sticky=${args.stickFirstColumn}>Contenuto cella 1</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td .sticky=${args.stickFirstColumn}>Contenuto cella 1</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr>
          <z-td .sticky=${args.stickFirstColumn}>Contenuto cella 1</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
        </z-tr>
        <z-tr expandable>
          <z-td .sticky=${args.stickFirstColumn}>Contenuto cella 1</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>
            <span>Contenuto cella</span>
            <z-button
              class="prevent-expand"
              onclick="alert('button clicked')"
              icon="plus"
              size="x-small"
            ></z-button
          ></z-td>
          <z-td>Contenuto espanso</z-td>
        </z-tr>
        <z-tr expandable>
          <z-td .sticky=${args.stickFirstColumn}>Contenuto cella 1</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto cella</z-td>
          <z-td>Contenuto espanso</z-td>
        </z-tr>
      </z-tbody>
      <z-tfoot .sticky=${args.stickyFooter}>
        <z-tr>
          <z-td colspan="8">Table footer</z-td>
        </z-tr>
      </z-tfoot>
    </z-table>`}
  </Story>
</Canvas>

## Cells with contextual menu

Enable `showMenu` prop on z-td or z-th to show a contextual menu button on the cell. The content of the menu must be placed using the slot `contextual-menu`.

<Canvas>
  <Story name="Cells with contextual menu">
    {() => html`<z-table
      bordered
      style=${styleMap({
        "--z-table--cells-padding": "16px",
      })}
    >
      <z-thead>
        <z-tr>
          <z-th>Titolo</z-th>
          <z-th show-menu>
            <div>Heading con menu</div>
            <div slot="contextual-menu">Contenuto del popover</div>
          </z-th>
          <z-th>Titolo</z-th>
        </z-tr>
      </z-thead>
      <z-tbody>
        <z-tr>
          <z-td show-menu>
            <span>Contenuto cella con menu</span>
            <div>Contenuto cella con menu 2</div>
            <div slot="contextual-menu">Contenuto del popover</div>
          </z-td>
          <z-td>
            <span>Contenuto cella</span>
          </z-td>
          <z-td show-menu>
            <span>Contenuto cella con menu</span>
            <div slot="contextual-menu">Contenuto del popover</div>
          </z-td>
        </z-tr>
        <z-tr>
          <z-td show-menu>
            <span>Contenuto cella con menu</span>
            <div slot="contextual-menu">Contenuto del popover</div>
          </z-td>
          <z-td>
            <span>Contenuto cella</span>
          </z-td>
          <z-td show-menu>
            <span>Contenuto cella con menu</span>
            <div slot="contextual-menu">Contenuto del popover</div>
          </z-td>
        </z-tr>
        <z-tr>
          <z-td show-menu>
            <span>Contenuto cella con menu</span>
            <div slot="contextual-menu">Contenuto del popover</div>
          </z-td>
          <z-td>
            <span>Contenuto cella</span>
          </z-td>
          <z-td show-menu>
            <span>Contenuto cella con menu</span>
            <div slot="contextual-menu">Contenuto del popover</div>
          </z-td>
        </z-tr>
      </z-tbody>
    </z-table>`}
  </Story>
</Canvas>

<ArgsTable of="z-table" />
