import {html} from "lit-html";
import {repeat} from "lit-html/directives/repeat";
import {CarouselArrowsPosition, CarouselProgressMode} from "../../beans";
import {Meta, Canvas, Story, ArgsTable} from "@storybook/addon-docs";

import "./index.stories.css";
import "./index";

<Meta
  title="ZCarousel"
  component="z-carousel"
  argTypes={{
    arrowsPosition: {
      control: {
        type: "inline-radio",
      },
      options: Object.values(CarouselArrowsPosition),
    },
    progressMode: {
      control: {
        type: "inline-radio",
      },
      options: Object.values(CarouselProgressMode),
    },
  }}
/>

# ZCarousel

<Canvas>
  <Story
    name="With arrows over"
    args={{
      "label": "",
      "--z-carousel-gutter": "var(--space-unit)",
      "arrowsPosition": CarouselArrowsPosition.OVER,
      "progressMode": CarouselProgressMode.DOTS,
    }}
  >
    {(args) => html`<z-carousel
      label=${args.label}
      .arrowsPosition=${args.arrowsPosition}
      style="--z-carousel-gutter: ${args["--z-carousel-gutter"]}"
    >
      ${repeat(
        new Array(8),
        () => html`<li>
          <div class="carousel-box"></div>
        </li>`
      )}
    </z-carousel>`}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Single mode"
    parameters={{
      layout: "centered",
    }}
    args={{
      label: "Carousel title",
      progressMode: CarouselProgressMode.DOTS,
      arrowsPosition: CarouselArrowsPosition.BOTTOM,
    }}
  >
    {(args) => html`<z-carousel
      label=${args.label}
      .single=${true}
      .progressMode=${args.progressMode}
      .arrowsPosition=${args.arrowsPosition}
    >
      ${repeat(
        new Array(8),
        () => html`<li>
          <div class="carousel-box"></div>
        </li>`
      )}
    </z-carousel>`}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Loading items"
    args={{
      "label": "Carousel title",
      "--z-carousel-gutter": "8px",
    }}
    parameters={{
      controls: {exclude: ["isLoading", "progressMode", "arrowsPosition"]},
    }}
  >
    {(args) => html`<z-carousel
      label=${args.label}
      style="--z-carousel-gutter: ${args["--z-carousel-gutter"]}"
    >
      ${repeat(
        new Array(8),
        () => html`<li>
          <div class="carousel-box-loading">
            <z-ghost-loading></z-ghost-loading>
          </div>
        </li>`
      )}
    </z-carousel>`}
  </Story>
</Canvas>

<Canvas>
  <Story
    name="Ghost loading"
    args={{
      label: "Carousel title",
      isLoading: true,
      ghostLoadingHeight: 265,
    }}
    parameters={{
      controls: {exclude: ["isLoading", "progressMode", "arrowsPosition"]},
    }}
  >
    {(args) => html`<z-carousel
      label=${args.label}
      .isLoading=${args.isLoading}
      .ghostLoadingHeight=${args.ghostLoadingHeight}
    ></z-carousel>`}
  </Story>
</Canvas>

<ArgsTable of="z-carousel" />

## Description

This component was conceived as a list of elements to respect the rules of accessibility (https://www.w3.org/WAI/tutorials/carousels/working-example/).

## Usage

Pass any number of elements inside its main `slot`.

```html
<z-carousel>
  <li>element</li>
  <li>element</li>
  <li>element</li>
</z-carousel>
```

> Note: always use `li` elements as direct children of `z-carousel`, as it wraps them into an `ul` element.

You can set the gutter between the elements by using the `--z-carousel-gutter` custom property.
From css:

```css
z-carousel {
  --z-carousel-gutter: 16px;
}
```

## Ghost loading notes

You can handle ghost loading for the whole z-carousel passing two properties:

- `isLoading` (boolean) : if `true`, it shows z-ghost-loading element.
- `ghostLoadingHeight` (number): sets the height of the z-carousel ghost loading component.

You can also handle ghost-loading of each single z-carousel element.
You can see an example of use in the preview above (with story's name as ZCarousel-with-elements-loading).
