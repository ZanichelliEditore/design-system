{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../src/components/date-picker/utils.tsx"],"names":[],"mappings":"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","sourcesContent":["import {ZDatePickerMode, ZDatePickerModeValue, ZDatePickerPosition, ZRangePickerMode} from \"../../beans\";\n\nexport function validateDate(dateStr: string, hasTime = false): boolean {\n  const regex = hasTime ? /^\\d{1,2}[/-]\\d{1,2}[/-]\\d{2,4} - \\d{2}:\\d{2}$/ : /^\\d{1,2}[/-]\\d{1,2}[/-]\\d{2,4}$/;\n\n  if (dateStr.match(regex) === null) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function setFlatpickrPosition(\n  element: HTMLElement,\n  mode: ZDatePickerMode | ZRangePickerMode\n): ZDatePickerPosition {\n  const toggleHeight = element.children[0].clientHeight;\n  element.style.setProperty(\"--z-range-picker--toggle-height\", `${toggleHeight}px`);\n\n  const flatpickrHeight =\n    mode === ZDatePickerMode.DATE_TIME\n      ? ZDatePickerModeValue.DATE_TIME\n      : mode === ZDatePickerMode.MONTHS\n        ? ZDatePickerModeValue.MONTHS\n        : ZDatePickerModeValue.DATE;\n\n  const bottom = element.getBoundingClientRect().bottom;\n  const overflowBottom = bottom + flatpickrHeight > window.innerHeight;\n  const overflowTop = bottom - flatpickrHeight - toggleHeight < 0;\n\n  if (!overflowTop && overflowBottom) {\n    return ZDatePickerPosition.TOP;\n  }\n\n  return ZDatePickerPosition.BOTTOM;\n}\n\nexport function setAriaOptions(element: HTMLElement, mode: ZDatePickerMode | ZRangePickerMode): void {\n  const calendar = element.getElementsByClassName(\"flatpickr-calendar\");\n\n  Array.from(calendar).forEach((element) => {\n    element.setAttribute(\"tabindex\", \"0\");\n    const prevMonthArrow = element.getElementsByClassName(\"flatpickr-prev-month\")[0];\n    const nextMonthArrow = element.getElementsByClassName(\"flatpickr-next-month\")[0];\n\n    const tabindexElements = element.querySelectorAll('[tabindex = \"-1\"]');\n    tabindexElements.forEach((element) => element.setAttribute(\"tabindex\", \"0\"));\n\n    Array.from(element.getElementsByClassName(\"flatpickr-day\")).forEach((date: HTMLElement) => {\n      if (date.classList.contains(\"flatpickr-disabled\")) {\n        date.setAttribute(\"tabindex\", \"-1\");\n      }\n    });\n\n    prevMonthArrow.setAttribute(\"tabindex\", \"0\");\n    nextMonthArrow.setAttribute(\"tabindex\", \"0\");\n\n    prevMonthArrow.setAttribute(\"role\", \"button\");\n    nextMonthArrow.setAttribute(\"role\", \"button\");\n\n    element.getElementsByClassName(\"cur-year\")[0].setAttribute(\"aria-label\", \"Anno\");\n\n    if (mode === ZDatePickerMode.DATE) {\n      setDateAriaOptions(element, prevMonthArrow, nextMonthArrow);\n    }\n    if (mode === ZDatePickerMode.DATE_TIME) {\n      setDateTimeAriaOptions(element, prevMonthArrow, nextMonthArrow);\n    }\n    if (mode === ZDatePickerMode.MONTHS) {\n      setMonthsAriaOptions(element, prevMonthArrow, nextMonthArrow);\n    }\n  });\n}\n\nfunction setDateAriaOptions(calendar, prevMonthArrow, nextMonthArrow): void {\n  Array.from(calendar.getElementsByClassName(\"flatpickr-days\")).forEach((element: HTMLElement) =>\n    element.setAttribute(\"tabindex\", \"-1\")\n  );\n\n  Array.from(calendar.getElementsByClassName(\"flatpickr-day\")).forEach((element: HTMLElement) =>\n    element.setAttribute(\"role\", \"button\")\n  );\n\n  calendar.getElementsByClassName(\"flatpickr-monthDropdown-months\")[0].setAttribute(\"aria-label\", \"Mese\");\n\n  prevMonthArrow.setAttribute(\"aria-label\", \"Mese precedente\");\n  nextMonthArrow.setAttribute(\"aria-label\", \"Mese successivo\");\n}\n\nfunction setDateTimeAriaOptions(calendar, prevMonthArrow, nextMonthArrow): void {\n  Array.from(calendar.getElementsByClassName(\"flatpickr-days\")).forEach((element: HTMLElement) =>\n    element.setAttribute(\"tabindex\", \"-1\")\n  );\n\n  Array.from(calendar.getElementsByClassName(\"flatpickr-day\")).forEach((element: HTMLElement) =>\n    element.setAttribute(\"role\", \"button\")\n  );\n\n  calendar.getElementsByClassName(\"flatpickr-monthDropdown-months\")[0].setAttribute(\"aria-label\", \"Mese\");\n\n  prevMonthArrow.setAttribute(\"aria-label\", \"Mese precedente\");\n  nextMonthArrow.setAttribute(\"aria-label\", \"Mese successivo\");\n\n  Array.from(calendar.getElementsByClassName(\"time24hr\")).forEach((element: HTMLElement) =>\n    element.setAttribute(\"tabindex\", \"-1\")\n  );\n\n  calendar.getElementsByClassName(\"flatpickr-hour\")[0].setAttribute(\"aria-label\", \"Ora\");\n  calendar.getElementsByClassName(\"flatpickr-minute\")[0].setAttribute(\"aria-label\", \"Minuti\");\n}\n\nfunction setMonthsAriaOptions(calendar, prevMonthArrow, nextMonthArrow): void {\n  Array.from(calendar.getElementsByClassName(\"flatpickr-monthSelect-months\")).forEach((element: HTMLElement) =>\n    element.setAttribute(\"tabindex\", \"-1\")\n  );\n\n  Array.from(calendar.getElementsByClassName(\"flatpickr-monthSelect-month\")).forEach((element: HTMLElement) =>\n    element.setAttribute(\"role\", \"button\")\n  );\n\n  prevMonthArrow.setAttribute(\"aria-label\", \"Anno precedente\");\n  nextMonthArrow.setAttribute(\"aria-label\", \"Anno successivo\");\n}\n"]}