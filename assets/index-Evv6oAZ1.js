import{s as _,g as T}from"./chunk-L4EGOTBX-BzYVsoCE.js";import"./entry-preview-uRqU0LK7.js";import{d as b,H as k,c as w,h as O,a as F}from"./index-BZ0rSFNp.js";import{P as n,K as $}from"./index-CutM1h2b.js";const I=':host{position:absolute;display:none;min-width:calc(var(--space-unit) * 8);max-width:100%;min-height:calc(var(--space-unit) * 4);max-height:100%;align-items:center;justify-content:center;padding:var(--z-popover-padding, 0);background:var(--z-popover-theme--surface, var(--color-surface01));border-radius:var(--border-radius-small);color:var(--z-popover-theme--text, var(--color-default-text));fill:currentcolor;filter:var(--z-popover-shadow-filter, drop-shadow(0 1px 2px var(--shadow-color-base)));font-family:var(--font-family-sans);text-align:center}:host([open]:not([current-position])){visibility:hidden}:host([open][current-position]),:host([open="true"][current-position]){display:flex}:host([center][current-position="top"]),:host([center][current-position="bottom"]){transform:translateX(-50%)}:host([center][current-position="right"]),:host([center][current-position="left"]){transform:translateY(-50%)}:host([current-position^="top"]){margin:0 0 var(--space-unit)}:host([current-position^="bottom"]){margin:var(--space-unit) 0 0}:host([current-position^="left"]){margin:0 var(--space-unit) 0 0}:host([current-position^="right"]){margin:0 0 0 var(--space-unit)}:host([current-position])::before{--arrow-size:6px;--arrow-edge-offset:calc(100% - var(--space-unit) - (var(--arrow-size) / 2));--arrow-center-x-offset:calc(50% - (var(--arrow-size) / 2));--arrow-center-y-offset:calc(100% - (var(--arrow-size) / 2));position:absolute;display:block;width:var(--arrow-size);height:var(--arrow-size);background:var(--z-popover-theme--surface, var(--color-surface01));content:"";transform:rotate(45deg)}:host([show-arrow="false"])::before,:host(:not([show-arrow]))::before{display:none}:host([current-position^="top"])::before{top:var(--arrow-center-y-offset)}:host([current-position^="bottom"])::before{bottom:var(--arrow-center-y-offset)}:host([current-position="top"])::before,:host([current-position="bottom"])::before{right:var(--arrow-edge-offset)}:host([current-position="right"])::before,:host([current-position="left"])::before{bottom:var(--arrow-edge-offset)}:host([current-position="right"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left"])::before{left:var(--arrow-center-y-offset)}:host([current-position="top_right"])::before,:host([current-position="bottom_right"])::before{right:var(--arrow-edge-offset)}:host([current-position="top_left"])::before,:host([current-position="bottom_left"])::before{left:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="left_top"])::before{top:var(--arrow-edge-offset)}:host([current-position="right_top"])::before,:host([current-position="right_bottom"])::before{right:var(--arrow-center-y-offset)}:host([current-position="left_top"])::before,:host([current-position="left_bottom"])::before{left:var(--arrow-center-y-offset)}:host([current-position="right_bottom"])::before,:host([current-position="left_bottom"])::before{bottom:var(--arrow-edge-offset)}:host([center][current-position="top"])::before,:host([center][current-position="bottom"])::before{right:auto;left:var(--arrow-center-x-offset)}:host([center][current-position="right"])::before,:host([center][current-position="left"])::before{top:var(--arrow-center-x-offset);bottom:auto}::slotted(*){overflow:auto;flex:1 auto}',l=document.documentElement;function x(o){return o.parentNode===o.shadowRoot?o.shadowRoot.host:o.parentElement}function C(o){let t=x(o);for(;t&&t!==l;){const r=window.getComputedStyle(t),{overflow:e,overflowX:s,overflowY:i}=r;if(e==="hidden"||i==="hidden"||s==="hidden")return t;const h=e!=="visible",p=i!=="visible",c=s!=="visible";if(t.scrollHeight>t.clientHeight&&h&&p||t.scrollWidth>t.clientWidth&&h&&c)return t;t=x(t)}return l}function P(o,t){const r=o.getBoundingClientRect(),{width:e,height:s}=r;let i=0,h=0,p=o;for(;p&&p!==t;){if(h+=p.offsetLeft,p===document.body?i+=p.getBoundingClientRect().top+window.scrollY:i+=p.offsetTop,window.DOMMatrix){const H=window.getComputedStyle(p),{transform:m}=H;if(m&&m!=="none"){const u=new DOMMatrix(m);h+=u.m41,p!==document.body&&(i+=u.m42)}}if(!p.offsetParent)break;p=p.offsetParent}let c,a;p===document.body?(c=window.innerWidth,a=window.innerHeight):(c=p.offsetWidth,a=p.offsetHeight);const f=c-h-e,d=a-i-s;return{top:i,right:f,bottom:d,left:h,width:e,height:s}}const g=class extends k{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.positionChange=w(this,"positionChange",7),this.openChange=w(this,"openChange",7),this.position=n.TOP,this.open=!1,this.showArrow=!1,this.center=!1,this.closable=!0,this.spaceTolerance=3}closePopoverWithKeyboard(o){this.closable&&o.key===$.ESC&&(this.open=!1)}handleOutsideClick(o){if(!this.closable||!this.open)return;if(!o.composedPath().includes(this.host)){const r=o.target;let e=!1;typeof this.bindTo=="string"?e=!!r.closest(this.bindTo):this.bindTo&&(e=this.bindTo.contains(r)),e&&o.stopPropagation(),this.open=!1,this.positionChange.emit({position:this.currentPosition})}}validatePosition(o){(!Object.values(n).includes(o)||o===n.AUTO)&&(o=n.TOP),this.position=o,this.currentPosition=o,this.positionChange.emit({position:this.currentPosition}),this.setPosition()}onOpen(){if(cancelAnimationFrame(this.animationFrameRequestId),this.open){const o=()=>{this.open&&(this.setPosition(),this.animationFrameRequestId=requestAnimationFrame(o))};setTimeout(()=>{o()},0)}this.openChange.emit({open:this.open})}hasCenteredHorizontalSpace(o,t,r,e,s){const i=(r-e)*(1-s);return o>=i-this.spaceTolerance&&t>=i-this.spaceTolerance}hasCenteredVerticalSpace(o,t,r,e,s){const i=(r-e)*(1-s);return o>=i-this.spaceTolerance&&t>=i-this.spaceTolerance}hasOffsetSpace(o,t,r,e){return o>=t-r*(1-e)-this.spaceTolerance}getOptimalPopoverPosition(o,t,r,e){const s=this.host.offsetWidth,i=this.host.offsetHeight,h=a=>{switch(a){case n.TOP:return t.top>=i&&this.hasCenteredHorizontalSpace(t.left,t.right,s,r.width,e);case n.TOP_RIGHT:return t.top>=i&&this.hasOffsetSpace(t.right,s,r.width,e);case n.TOP_LEFT:return t.top>=i&&this.hasOffsetSpace(t.left,s,r.width,e);case n.RIGHT:return t.right>=s&&this.hasCenteredVerticalSpace(t.top,t.bottom,i,r.height,e);case n.RIGHT_BOTTOM:return t.right>=s&&this.hasOffsetSpace(t.bottom,i,r.height,e);case n.RIGHT_TOP:return t.right>=s&&this.hasOffsetSpace(t.top,i,r.height,e);case n.BOTTOM:return t.bottom>=i&&this.hasCenteredHorizontalSpace(t.left,t.right,s,r.width,e);case n.BOTTOM_LEFT:return t.bottom>=i&&this.hasOffsetSpace(t.left,s,r.width,e);case n.BOTTOM_RIGHT:return t.bottom>=i&&this.hasOffsetSpace(t.right,s,r.width,e);case n.LEFT:return t.left>=s&&this.hasCenteredVerticalSpace(t.top,t.bottom,i,r.height,e);case n.LEFT_TOP:return t.left>=s&&this.hasOffsetSpace(t.top,i,r.height,e);case n.LEFT_BOTTOM:return t.left>=s&&this.hasOffsetSpace(t.bottom,i,r.height,e);default:return!1}};if(h(o))return o;const p=g.positionOrder,c=p.indexOf(o);if(c===-1)return o;for(let a=1;a<p.length;a++){const f=(c+a)%p.length,d=p[f];if(h(d))return d}return this.findBestFallbackPosition(t)}findBestFallbackPosition(o){const t=o.right>=o.left?n.RIGHT:n.LEFT,r=o.bottom>=o.top?n.BOTTOM:n.TOP,e=Math.max(o.right,o.left),s=Math.max(o.bottom,o.top),i=s>=e?r:t;let h=!1;if(i===r){const c=Math.min(o.right,o.left);h=e>=c*2}else{const c=Math.min(o.bottom,o.top);h=s>=c*2}return h?`${i}_${i===r?t:r}`:i}calculateAvailableSpace(o,t,r){const e=o.top-t.scrollTop,s=r.height-(o.top+o.height)+t.scrollTop,i=o.left-t.scrollLeft,h=r.width-(o.left+o.width)+t.scrollLeft,p=Math.max(0,r.top+r.height-window.innerHeight),c=Math.max(0,r.left+r.width-window.innerWidth);return{top:Math.min(e,e+r.top),bottom:Math.min(s,s-p),left:Math.min(i,i+r.left),right:Math.min(h,h-c)}}calculateRelativeOffsets(o,t){return{top:o.top-t.top,right:o.right-t.right,bottom:o.bottom-t.bottom,left:o.left-t.left}}applyPositionStyles(o,t,r,e,s,i,h){switch(t.top="auto",t.right="auto",t.bottom="auto",t.left="auto",t.maxWidth="",t.maxHeight="",o){case n.TOP:case n.TOP_RIGHT:t.bottom=`${r.bottom+e.height}px`,t.left=`${r.left+e.width*i-(o===n.TOP_RIGHT?h:0)}px`,t.maxHeight=`${s.top-8}px`,o===n.TOP_RIGHT&&(t.maxWidth=`${s.right+e.width*i}px`);break;case n.TOP_LEFT:t.right=`${r.right+e.width*i-h}px`,t.bottom=`${r.bottom+e.height}px`,t.maxWidth=`${s.left}px`,t.maxHeight=`${s.top-8}px`;break;case n.BOTTOM:case n.BOTTOM_RIGHT:t.top=`${r.top+e.height}px`,t.left=`${r.left+e.width*i-(o===n.BOTTOM_RIGHT?h:0)}px`,t.maxHeight=`${s.bottom-8}px`,o===n.BOTTOM_RIGHT&&(t.maxWidth=`${s.right+e.width*i}px`);break;case n.BOTTOM_LEFT:t.top=`${r.top+e.height}px`,t.right=`${r.right+e.width*i-h}px`,t.maxWidth=`${s.left}px`,t.maxHeight=`${s.bottom-8}px`;break;case n.RIGHT:case n.RIGHT_BOTTOM:t.top=`${r.top+e.height*i-(o===n.RIGHT_BOTTOM?h:0)}px`,t.left=`${r.left+e.width}px`,t.maxWidth=`${s.right-8}px`,o===n.RIGHT?t.maxHeight=`${Math.min(s.top+s.bottom+e.height,window.innerHeight-20)}px`:t.maxHeight=`${s.bottom+e.height*i}px`;break;case n.RIGHT_TOP:t.bottom=`${r.bottom+e.height*i-h}px`,t.left=`${r.left+e.width}px`,t.maxWidth=`${s.right-8}px`,o===n.RIGHT_TOP&&(t.maxHeight=`${s.top+e.height*i}px`);break;case n.LEFT:case n.LEFT_BOTTOM:t.top=`${r.top+e.height*i-(o===n.LEFT_BOTTOM?h:0)}px`,t.right=`${r.right+e.width}px`,t.maxWidth=`${s.left-8}px`,o===n.LEFT_BOTTOM&&(t.maxHeight=`${s.bottom+e.height*i}px`);break;case n.LEFT_TOP:t.right=`${r.right+e.width}px`,t.bottom=`${r.bottom+e.height*i-h}px`,t.maxWidth=`${s.left-8}px`,o===n.LEFT_TOP&&(t.maxHeight=`${s.top+e.height*i}px`);break}}setPosition(){let o;if(typeof this.bindTo=="string"?o=this.host.ownerDocument.querySelector(this.bindTo):this.bindTo?o=this.bindTo:o=this.host.parentElement,!o)return;const t=C(o),r=t.getBoundingClientRect(),e=this.host.offsetParent,s=e?P(e,t):{top:0,right:0,bottom:0,left:0},i=P(o,t),h=this.calculateAvailableSpace(i,t,r),p=this.calculateRelativeOffsets(i,s),c=this.center?.5:0,a=this.showArrow&&this.center?8:0,f=this.getOptimalPopoverPosition(this.position,h,{width:i.width,height:i.height},c),d=this.host.style;this.applyPositionStyles(f,d,p,i,h,c,a),this.currentPosition=f}componentWillLoad(){this.validatePosition(this.position),this.onOpen()}componentDidLoad(){this.setPosition()}disconnectedCallback(){cancelAnimationFrame(this.animationFrameRequestId)}render(){return O(F,{key:"8214daf690488a5e446eed61f2b9d7979e371660","current-position":this.currentPosition},O("slot",{key:"f99df52f766286921e2a91ea018ea79e97f95979"}))}get host(){return this}static get watchers(){return{position:["validatePosition"],open:["onOpen"]}}static get style(){return I}};g.positionOrder=[n.TOP_RIGHT,n.TOP,n.TOP_LEFT,n.RIGHT_BOTTOM,n.RIGHT,n.RIGHT_TOP,n.BOTTOM_LEFT,n.BOTTOM,n.BOTTOM_RIGHT,n.LEFT_TOP,n.LEFT,n.LEFT_BOTTOM];b(g,[1,"z-popover",{position:[1544],open:[1540],bindTo:[8,"bind-to"],showArrow:[516,"show-arrow"],center:[516],closable:[4],currentPosition:[32]},[[8,"keyup","closePopoverWithKeyboard"],[18,"click","handleOutsideClick"]],{position:["validatePosition"],open:["onOpen"]}]);const v={schemaVersion:"1.0.0",modules:[{kind:"javascript-module",path:"",declarations:[{kind:"class",name:"ZPopover",tagName:"z-popover",customElement:!0,members:[{kind:"field",name:"position",type:"any",description:"The preferred position to render the popover.\nThe popover will automatically search another position if not enough space is available for the preferred position.\nIf the preferred position is not available, it will try to find the best position starting from `TOP` and going clockwise.",default:"PopoverPosition.TOP"},{kind:"field",name:"open",type:"boolean",description:"The open state of the popover.",default:"false"},{kind:"field",name:"bindTo",type:"any",description:`The selector or the element bound with the popover.
If string css selector is provided make sure to use a valid selector.`},{kind:"field",name:"showArrow",type:"boolean",description:"Whether to show popover's arrow.",default:"false"},{kind:"field",name:"center",type:"boolean",description:'Whether to center the popup on the main side (according to "position").',default:"false"},{kind:"field",name:"closable",type:"boolean",description:"If true, the popover can be closed by clicking outside of it or pressing the escape key.\nOtherwise, it will be closed only programmatically (by setting `open` to `false`).",default:"true"}],events:[{kind:"event",name:"positionChange",description:"Position change event."},{kind:"event",name:"openChange",description:"Open change event."}],cssProperties:[{name:"--z-popover-theme--surface",description:"background color of the popover."},{name:"--z-popover-theme--text",description:"foreground color of the popover."},{name:"--z-popover-padding",description:"padding of the popover."},{name:"--z-popover-shadow-filter",description:"drop-shadow filter of the popover. Defaults to `drop-shadow(0 1px 2px var(--shadow-color-base))`."}]}],exports:[{kind:"js",name:"ZPopover",declaration:{name:"ZPopover",module:"src/components/z-popover/index.tsx"}},{kind:"custom-element-definition",name:"z-popover",declaration:{name:"ZPopover",module:"src/components/z-popover/index.tsx"}}]}]};_({...T()||{},...v,modules:[...(T()||{}).modules||[],...v.modules]});
