import"./index-BfGcbr3R.js";import{s as c,g as i}from"./chunk-L4EGOTBX-lo-pZyle.js";import"./entry-preview-Cx7Tr7Nx.js";import{d,H as r,c as a,h as o,a as h}from"./index-BZ0rSFNp.js";import{K as s}from"./index-Dk5nO_yw.js";const m=':host{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;padding:0;font-family:var(--font-family-sans)}:host,::slotted(*),*{box-sizing:border-box}::slotted(a){text-decoration:none}::slotted(*){color:var(--color-default-text);font-family:var(--font-family-sans);font-weight:var(--font-rg)}.label{display:flex;width:100%;align-items:center;padding:var(--space-unit) 0;border:0;border-bottom:var(--border-size-small) solid var(--color-surface03);margin:0;background:transparent;border-radius:0;cursor:pointer;text-align:left}:host(:last-child:not([open])) .label{border-bottom:none}:host(:is([active],[open])) .label,.label:focus:focus-visible,.label:hover{border-color:var(--color-primary01)}.label:focus:focus-visible{box-shadow:var(--shadow-focus-primary);outline:none}:host(:is([active],[open])) .label ::slotted(*),.label:focus:focus-visible ::slotted(*),.label:hover ::slotted(*){font-weight:var(--font-bd)}::slotted([data-text]){display:inline-flex;flex-direction:column}::slotted([data-text])::after{overflow:hidden;height:0;content:attr(data-text);content:attr(data-text) / "";font-weight:var(--font-bd);pointer-events:none;user-select:none;visibility:hidden}@media speech{::slotted([data-text])::after{display:none}}.label ::slotted(*){width:100%;margin:0;font-size:var(--font-size-3);line-height:1.5}.label z-icon{margin-left:calc(var(--space-unit) * 4);fill:var(--color-default-icon)}.items{display:flex;width:100%;flex-direction:column;padding:calc(var(--space-unit) / 2);padding-bottom:calc(var(--space-unit) * 1.5)}.items[hidden]{display:none}::slotted([slot="section"]){display:inline-flex;padding:calc(var(--space-unit) / 2);margin:0;font-size:var(--font-size-1);line-height:1.333;outline:none}::slotted([slot="section"]:last-of-type){border:none}::slotted([slot="section"]:focus:focus-visible){box-shadow:var(--shadow-focus-primary);color:var(--color-primary01)}::slotted([slot="section"]:hover),::slotted([slot="section"]:focus:focus-visible),::slotted([slot="section"]:active),::slotted([slot="section"][active]),::slotted([slot="section"][data-active]){color:var(--color-primary01);font-weight:var(--font-bd)}',b=class extends r{get focusableItem(){return this.items.find(({tabIndex:e})=>e===0)}toggle(){this.hasItems&&(this.open=!this.open)}setItemsA11yAttrs(){this.hasItems&&this.items.forEach(e=>{e.setAttribute("role","menuitem"),e.tabIndex=-1})}onItemsChange(){this.items=Array.from(this.host.querySelectorAll('[slot="section"]')),this.hasItems=this.items.length>0,this.setItemsA11yAttrs()}onLabelSlotChange(e){const t=e.target.assignedElements()[0];t.dataset.text=t==null?void 0:t.textContent}onLabelClick(){this.toggle(),this.setFocus()}onLabelKeydown(e){(e.key===s.ENTER||e.key===s.SPACE)&&(e.preventDefault(),e.stopPropagation(),this.toggle(),this.open&&this.focustFirstItem())}moveFocus(e,t){e.tabIndex=0,setTimeout(()=>{e.focus()},100),t&&(t.tabIndex=-1)}focustFirstItem(){this.moveFocus(this.items[0])}async focusLastItem(){this.moveFocus(this.items[this.items.length-1])}async setFocus(){this.htmlTabindex=0,setTimeout(()=>{this.label.focus()},100)}onOpenChange(){this.open?this.opened.emit():(this.setItemsA11yAttrs(),this.closed.emit())}onTabindexChange(){this.label&&(this.label.tabIndex=this.htmlTabindex)}onItemsKeydown(e){switch(e.key){case s.ESC:case s.ARROW_LEFT:if(!this.open)break;e.preventDefault(),e.stopPropagation(),this.moveFocus(this.label,this.focusableItem),this.open=!1;break;case s.ARROW_RIGHT:if(this.open)break;e.preventDefault(),e.stopPropagation(),this.open=!0,this.focustFirstItem();break;case s.ARROW_DOWN:{if(!this.open)break;if(document.activeElement===this.host){e.preventDefault(),e.stopPropagation(),this.focustFirstItem();break}const t=this.items.indexOf(this.focusableItem),n=this.items[t+1];n?(e.preventDefault(),e.stopPropagation(),this.moveFocus(n,this.focusableItem)):(this.htmlTabindex=0,this.focusableItem.tabIndex=-1);break}case s.ARROW_UP:{if(!this.open||document.activeElement===this.host)break;const t=this.items.indexOf(this.focusableItem),n=this.items[t-1];e.preventDefault(),e.stopPropagation(),n?this.moveFocus(n,this.focusableItem):(this.focusableItem.tabIndex=-1,this.setFocus());break}}}constructor(){super(),this.__registerHost(),this.__attachShadow(),this.opened=a(this,"opened",7),this.closed=a(this,"closed",7),this.htmlTabindex=-1,this.toggle=this.toggle.bind(this),this.onItemsChange=this.onItemsChange.bind(this),this.onLabelSlotChange=this.onLabelSlotChange.bind(this),this.onLabelClick=this.onLabelClick.bind(this),this.onLabelKeydown=this.onLabelKeydown.bind(this),this.onItemsKeydown=this.onItemsKeydown.bind(this)}connectedCallback(){this.onItemsChange()}render(){return o(h,{key:"a7c8ef67634e912fc6ab5ace5cc0d11e9a6f22ec",open:this.open},o("button",{key:"8e96e1d0840c48b3ed57d3b691b9c44fb15e296c",ref:e=>this.label=e,class:"label","aria-haspopup":`${!!this.hasItems}`,"aria-expanded":`${!!this.open}`,role:"menuitem",tabindex:this.htmlTabindex,onClick:this.onLabelClick,onKeyDown:this.onLabelKeydown},o("slot",{key:"939cabb28fbde8d1f889bf003a116e95811f9e99",onSlotchange:this.onLabelSlotChange}),this.hasItems&&o("z-icon",{key:"f5a4a4ce1ced30aa2eef917d39bcf798b19a31f0",name:this.open?"chevron-up":"chevron-down"})),o("div",{key:"3cb3bcad1ba8c108e26826efba0987e612326bae",class:"items",role:"menu",hidden:!this.open},o("slot",{key:"314dd1c00544f4357164c43199c33c5258a30433",name:"section",onSlotchange:this.onItemsChange})))}get host(){return this}static get watchers(){return{open:["onOpenChange"],htmlTabindex:["onTabindexChange"]}}static get style(){return m}};d(b,[1,"z-menu-section",{active:[516],htmlTabindex:[2,"html-tabindex"],open:[1028],hasItems:[32],items:[32],focusLastItem:[64],setFocus:[64]},[[0,"keydown","onItemsKeydown"]],{open:["onOpenChange"],htmlTabindex:["onTabindexChange"]}]);const l={schemaVersion:"1.0.0",modules:[{kind:"javascript-module",path:"",declarations:[{kind:"class",name:"ZMenuSection",tagName:"z-menu-section",customElement:!0,members:[{kind:"field",name:"active",type:"boolean",description:"Active state"},{kind:"field",name:"htmlTabindex",type:"number",description:`Tabindex value to set on the label button.
Useful to manage keyboard navigation focus with roving tabindex handled by this component's parent (usually ZMenu).`,default:"-1"},{kind:"field",name:"open",type:"boolean",description:"The opening state of the section."}],events:[{kind:"event",name:"opened",description:"The section has been opened."},{kind:"event",name:"closed",description:"The section has been closed."}],slots:[{name:"-",description:"Label of the menu section."},{name:"section",description:"Single entry of the menu section. Set the same slot name to different elements to put many of them. Add the `data-active` attribute to a slotted element to highlight it (`active` also works but `data-active` is preferable)."}]}],exports:[{kind:"js",name:"ZMenuSection",declaration:{name:"ZMenuSection",module:"src/components/z-menu-section/index.tsx"}},{kind:"custom-element-definition",name:"z-menu-section",declaration:{name:"ZMenuSection",module:"src/components/z-menu-section/index.tsx"}}]}]};c({...i()||{},...l,modules:[...(i()||{}).modules||[],...l.modules]});
