import{x as g}from"./lit-element-DGXdXVoE.js";import{x as s,y as n,e as o,K as a,P as p,b}from"./index-CcuDdGyi.js";import"./index-BEj-2O7q.js";import"./index-D2BETxnn.js";import"./index-C8IV02G7.js";import"./index-9W8xm7H6.js";import"./index-B4NmOPtE.js";import"./index-Bkm6skvp.js";import{s as w,g as c}from"./chunk-GKNNPQCW-BkHQSocK.js";import{d as x,H as E,c as y,h as i,a as O}from"./index-8h8udRzn.js";import{g as d,a as L}from"./utils-B_2tKo6T.js";import"./breakpoints-C5kxgyOu.js";const z=":host{font-family:var(--font-family-sans);font-weight:var(--font-rg);--line-clamp-popover:0;--line-clamp-mobile:1}*{box-sizing:border-box}button{padding:0;border:none;margin:0;background-color:transparent}nav{display:flex;align-items:center}ol{display:flex;align-items:center;padding:0;margin:0;column-gap:var(--space-unit);list-style:none}li{display:flex;align-items:center;justify-content:flex-start;column-gap:var(--space-unit)}ol li>a,ol li>button{font-size:var(--font-size-2);letter-spacing:0.16px;line-height:1.4}a:focus,button:focus{box-shadow:var(--shadow-focus-primary);outline:none}a{color:var(--color-link-primary);white-space:nowrap}a.missing-path{color:var(--color-default-text)}.text-ellipsis{display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:var(--line-clamp-mobile);text-overflow:ellipsis;white-space:initial}nav.semibold>ol>li>a:not(.missing-path),nav.semibold>ol>li>button{font-weight:var(--font-sb);text-decoration:none}nav.underlined a,nav.underlined button{text-decoration:underline}z-icon{--z-icon-width:16px;--z-icon-height:16px;display:block;fill:var(--color-link-primary)}z-icon.separator{--z-icon-width:10px;--z-icon-height:10px;fill:var(--gray500)}button.dots{display:inline-block;color:var(--color-link-primary);cursor:pointer}.hidden-paths-popover .popover-content{max-width:302px;padding:calc(var(--space-unit) / 2) var(--space-unit);text-align:left}.hidden-paths-popover .popover-content a{font-weight:var(--font-rg);text-decoration:none}.hidden-paths-popover{--z-popover-theme--surface:var(--color-surface02);--z-popover-padding:0}.hidden-paths-popover::before,.full-path-tooltip::before{--arrow-edge-offset:calc(100% - (var(--space-unit) * 2.55))}.full-path-tooltip{--z-popover-theme--surface:var(--color-surface05);--z-popover-theme--text:var(--color-text-inverse);--z-popover-padding:0}.tooltip-content{padding:0 var(--space-unit);font-size:var(--font-size-2)}@media (min-width: 768px){.text-ellipsis{-webkit-line-clamp:var(--line-clamp-popover)}}@media (max-width: 767px){li a{display:flex;align-items:center;column-gap:var(--space-unit)}}",k=class extends E{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.clickOnNode=y(this,"clickOnNode",7),this.collapsedElements=[],this.currentIndex=0,this.truncatePosition=null,this.pathStyle=s.UNDERLINED,this.homepageVariant=n.ICON,this.maxNodesToShow=5,this.preventFollowUrl=!1,this.overflowMenuItemRows=0,this.truncateChar=30,this.viewPortWidth=void 0,this.hasOverflow=!1,this.popoverEllipsisOpen=!1}handleResize(){this.viewPortWidth=d(),this.viewPortWidth!==o.MOBILE&&this.wrapElement&&this.wrapElement.scrollWidth>this.wrapElement.clientWidth&&(this.hasOverflow=!0)}handlePropChange(){this.initializeBreadcrumb()}handleResizeUp(e,t){(e===o.MOBILE||t===o.MOBILE&&e===o.TABLET||t===o.MOBILE&&e===o.DESKTOP||t===o.MOBILE&&e===o.DESKTOP_WIDE||t===o.TABLET&&e===o.DESKTOP||t===o.TABLET&&e===o.DESKTOP_WIDE||t===o.DESKTOP&&e===o.DESKTOP_WIDE)&&this.initializeBreadcrumb()}componentWillLoad(){this.viewPortWidth=d(),this.initializeBreadcrumb()}componentWillRender(){this.viewPortWidth!==o.MOBILE&&this.hasOverflow&&(this.checkEllipsisOrOverflowMenu(),this.hasOverflow=!1)}componentDidRender(){this.collapsedElementsRef&&(this.anchorElements=Array.from(this.hostElement.shadowRoot.querySelectorAll("z-list-group a"))),this.viewPortWidth!==o.MOBILE&&this.wrapElement.scrollWidth>this.wrapElement.clientWidth&&(this.hasOverflow=!0)}initializeBreadcrumb(){this.viewPortWidth===o.MOBILE?this.pathsList=this.getPathsItemsList().filter(e=>!!e.path):this.pathsList=this.getPathsItemsList(),this.homepageNode=this.pathsList.shift(),this.pathListCopy=[...this.pathsList],this.collapsedElements=[],this.pathsList.length>this.maxNodesToShow&&(this.collapsedElements=this.pathsList.splice(0,this.pathsList.length-2))}checkEllipsisOrOverflowMenu(){for(let e=0;e<this.pathsList.length;e++)if(!(this.pathsList[e].text.length<=this.truncateChar)){if(this.truncatePosition>0){this.collapsedElements.push(...this.pathListCopy.splice(0,this.truncatePosition)),this.pathsList.splice(0,this.truncatePosition),this.truncatePosition=0;return}else if(this.truncatePosition===0){this.collapsedElements.push(...this.pathListCopy.splice(0,this.truncatePosition+1)),this.pathsList.splice(0,this.truncatePosition+1),this.truncatePosition=null;return}if(e!==this.pathsList.length-1){const t=this.truncateWithEllipsis(this.pathsList[e].text,this.truncateChar);this.currentEllipsisText=this.pathsList[e].text,this.pathsList[e].text=t,this.pathsList[e].hasTooltip=!0,this.truncatePosition=e;return}}}truncateWithEllipsis(e,t){return e.length<=t?e:e.substring(0,t-1)+"&mldr;"}getPathsItemsList(){return Array.from(this.hostElement.children).map(e=>({text:e.textContent,path:e.href,hasTooltip:!1}))}renderHomepageNode(){return i("li",null,i("a",{class:{"homepage-text":this.homepageVariant===n.TEXT},href:this.homepageNode.path,onClick:e=>this.handlePreventFollowUrl(e,this.homepageNode),innerHTML:this.homepageVariant===n.ICON?'<z-icon name="home" />':this.homepageNode.text||"Home"}),this.pathsList.length>0&&i("z-icon",{class:"separator",name:"chevron-right"}))}togglePopover(){this.collapsedElementsRef.open||(this.collapsedElementsRef.open=!0)}handlePreventFollowUrl(e,t){this.preventFollowUrl&&(e.preventDefault(),this.clickOnNode.emit(t.path))}handleOverflowMenuAccessibility(e){const t=this.anchorElements.length;if(e.key===a.TAB){e.preventDefault();return}e.stopPropagation(),[a.ARROW_DOWN,a.ARROW_UP].includes(e.key)&&(e.preventDefault(),e.key===a.ARROW_DOWN&&(this.currentIndex=t===this.currentIndex+1?0:this.currentIndex+1),e.key===a.ARROW_UP&&(this.currentIndex=this.currentIndex<=0?t-1:this.currentIndex-1),this.anchorElements[this.currentIndex].focus()),e.key===a.ESC&&this.triggerButton.focus()}renderOverflowMenu(){return i("li",null,i("z-popover",{class:"hidden-paths-popover",ref:e=>this.collapsedElementsRef=e,bindTo:this.triggerButton,position:p.BOTTOM_RIGHT,closable:!0,showArrow:!0},i("div",{class:"popover-content"},i("z-list",null,i("z-list-group",{size:b.SMALL},this.collapsedElements.map((e,t,l)=>i("div",null,i("z-list-element",{clickable:!0},i("a",{class:"text-ellipsis",href:e.path,onClick:r=>this.handlePreventFollowUrl(r,e),onKeyDown:r=>this.handleOverflowMenuAccessibility(r),innerHTML:e.text})),t<l.length-1&&i("z-divider",{color:"color-surface03"}))))))),i("button",{class:"dots",ref:e=>this.triggerButton=e,"aria-label":"Mostra piÃ¹ breadcrumb","aria-haspopup":"true",onClick:()=>{this.togglePopover()},onKeyDown:e=>{L(e,this.togglePopover.bind(this)),setTimeout(()=>{this.anchorElements[0].focus()},100)},innerHTML:"&mldr;"}),this.pathsList.length>0&&i("z-icon",{class:"separator",name:"chevron-right"}))}renderMobileItems(){const e=this.pathsList[this.pathsList.length-1];if(e)return i("li",null,i("a",{"aria-current":e.path?void 0:"page",href:e.path,onClick:t=>this.handlePreventFollowUrl(t,e)},i("z-icon",{name:"chevron-left"}),i("span",{class:{"missing-path":!e.path,"text-ellipsis":!0}},e.text)))}renderItems(){let e;return[this.renderHomepageNode(),this.collapsedElements.length>0&&this.renderOverflowMenu(),...this.pathsList.map((t,l)=>i("li",null,t.hasTooltip&&i("z-popover",{class:"full-path-tooltip",bindTo:e,open:this.popoverEllipsisOpen,position:p.BOTTOM_RIGHT,closable:!1,showArrow:!0},i("span",{class:"tooltip-content"},this.currentEllipsisText)),i("a",{class:{"missing-path":!t.path},ref:r=>e=r,"aria-current":t.path?void 0:"page",href:t.path,onClick:r=>this.handlePreventFollowUrl(r,t),onMouseOver:()=>{t.hasTooltip&&(this.popoverEllipsisOpen=!0)},onMouseLeave:()=>{t.hasTooltip&&(this.popoverEllipsisOpen=!1)},innerHTML:t.text}),l!==this.pathsList.length-1&&i("z-icon",{class:"separator",name:"chevron-right"})))]}render(){return i(O,{key:"1064660727dc0e227a0bb6392de30778e65f5f47",style:{"--line-clamp-popover":`${this.overflowMenuItemRows}`}},i("nav",{key:"f8ef59997d57e6022c016be638f64a8a0b90a47b",ref:e=>this.wrapElement=e,"aria-label":"Breadcrumb",class:{semibold:this.pathStyle===s.SEMIBOLD,underlined:this.pathStyle===s.UNDERLINED}},i("ol",{key:"a53274c782ad76fe0aaa9331bfab6b0e5fef3988"},this.viewPortWidth===o.MOBILE?this.renderMobileItems():this.renderItems())))}get hostElement(){return this}static get watchers(){return{maxNodesToShow:["handlePropChange"],viewPortWidth:["handleResizeUp"]}}static get style(){return z}};x(k,[1,"z-breadcrumb",{pathStyle:[520,"path-style"],homepageVariant:[8,"homepage-variant"],maxNodesToShow:[2,"max-nodes-to-show"],preventFollowUrl:[4,"prevent-follow-url"],overflowMenuItemRows:[2,"overflow-menu-item-rows"],truncateChar:[2,"truncate-char"],viewPortWidth:[32],hasOverflow:[32],popoverEllipsisOpen:[32]},[[9,"resize","handleResize"]],{maxNodesToShow:["handlePropChange"],viewPortWidth:["handleResizeUp"]}]);const m={schemaVersion:"1.0.0",modules:[{kind:"javascript-module",path:"",declarations:[{kind:"class",name:"ZBreadcrumb",tagName:"z-breadcrumb",customElement:!0,members:[{kind:"field",name:"pathStyle",type:"any",description:"[optional] Sets the path style",default:"BreadcrumbPathStyle.UNDERLINED"},{kind:"field",name:"homepageVariant",type:"any",description:"[optional] Variant of first node",default:"BreadcrumbHomepageVariant.ICON"},{kind:"field",name:"maxNodesToShow",type:"number",description:"[optional] Sets max number of element to show",default:"5"},{kind:"field",name:"preventFollowUrl",type:"boolean",description:"[optional] Controls the behaviour on <a> tag click/enter",default:"false"},{kind:"field",name:"overflowMenuItemRows",type:"number",description:"[optional] Sets max number of row for each path inside the popover. Zero equals unlimited",default:"0"},{kind:"field",name:"truncateChar",type:"number",description:"[optional] Sets the maximun number of chars per single node",default:"30"}],events:[{kind:"event",name:"clickOnNode",description:"Emitted when preventFollowUrl=true to handle custom page transition"}]}],exports:[{kind:"js",name:"ZBreadcrumb",declaration:{name:"ZBreadcrumb",module:"src/components/z-breadcrumb/index.tsx"}},{kind:"custom-element-definition",name:"z-breadcrumb",declaration:{name:"ZBreadcrumb",module:"src/components/z-breadcrumb/index.tsx"}}]}]};w({...c()||{},...m,modules:[...(c()||{}).modules||[],...m.modules]});const A={title:"ZBreadcrumb",component:"z-breadcrumb",argTypes:{pathStyle:{options:Object.values(s),control:{type:"select"}},homepageVariant:{options:Object.values(n),control:{type:"select"}}},args:{pathStyle:s.SEMIBOLD,homepageVariant:n.ICON,maxNodesToShow:5,preventFollowUrl:!1,overflowMenuItemRows:0,truncateChar:30},parameters:{docs:{description:{component:`Breadcrumb is a relevant component for SEO oriented applications.
As the crawlers flatten the light dom and the shadow dom, it is important to move all the relevant SEO content in the light DOM, to not affect indexability.

The component will handle the logic for generating the proper markup inside the shadow dom.
No slot is rendered inside the latter.
Like the other use case, don't pass a custom label to the first child because it will be overwritten by the default home value.
This mode can be also used by SEO non-relevant application.
@example\`\`\`html
<z-breadcrumb>
 <a href="./home_link"></a>
 <a href="./link1">link1</a>
 <a href="./link2">link2</a>
 <a href="./link3">link3</a>
</z-breadcrumb>\`\`\`

This component follows the accessibility guidelines provided by W3C https://www.w3.org/WAI/ARIA/apg/patterns/breadcrumb/examples/breadcrumb/`}}}},h={render:e=>g`<div class="z-breadcrumb-story-container">
      <z-breadcrumb
        .pathStyle=${e.pathStyle}
        .homepageVariant=${e.homepageVariant}
        .maxNodesToShow=${e.maxNodesToShow}
        .preventFollowUrl=${e.preventFollowUrl}
        .overflowMenuItemRows=${e.overflowMenuItemRows}
        .truncateChar=${e.truncateChar}
      >
        <a href="https://www.zanichelli.it"></a>
        <a href="./link1">Lingua inglese - Scuola secondaria di primo grado</a>
        <a href="./link2">Lingua Inglese - Lessico e funzioni linguistiche e comunicative</a>
        <a href="./link3">Il tempo libero e i luoghi del tempo libero</a>
        <a href="./link4">Chiedere di descrivere le proprie vacanze</a>
      </z-breadcrumb>
    </div>`};var u,f,v;h.parameters={...h.parameters,docs:{...(u=h.parameters)==null?void 0:u.docs,source:{originalSource:`{
  render: args => html\`<div class="z-breadcrumb-story-container">
      <z-breadcrumb
        .pathStyle=\${args.pathStyle}
        .homepageVariant=\${args.homepageVariant}
        .maxNodesToShow=\${args.maxNodesToShow}
        .preventFollowUrl=\${args.preventFollowUrl}
        .overflowMenuItemRows=\${args.overflowMenuItemRows}
        .truncateChar=\${args.truncateChar}
      >
        <a href="https://www.zanichelli.it"></a>
        <a href="./link1">Lingua inglese - Scuola secondaria di primo grado</a>
        <a href="./link2">Lingua Inglese - Lessico e funzioni linguistiche e comunicative</a>
        <a href="./link3">Il tempo libero e i luoghi del tempo libero</a>
        <a href="./link4">Chiedere di descrivere le proprie vacanze</a>
      </z-breadcrumb>
    </div>\`
} satisfies StoryObj<ZBreadcrumb>`,...(v=(f=h.parameters)==null?void 0:f.docs)==null?void 0:v.source}}};const _=["Breadcrumb"];export{h as Breadcrumb,_ as __namedExportsOrder,A as default};
