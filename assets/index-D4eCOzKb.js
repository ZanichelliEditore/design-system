import"./index-BEj-2O7q.js";import"./index-f6Hhwb0p.js";import{s as l,g as o}from"./chunk-GKNNPQCW-BkHQSocK.js";import{d,H as c,c as p,h as i}from"./index-8h8udRzn.js";import{P as h}from"./index-CcuDdGyi.js";import{a as f}from"./utils-B_2tKo6T.js";const u=':host{width:100%;font-family:var(--font-family-sans);font-weight:var(--font-rg)}:host>div{position:relative;display:grid;width:calc(100% + calc(var(--space-unit) * 2));height:402px;box-sizing:border-box;padding:calc(var(--space-unit) * 2) calc(var(--space-unit) * 3);border:var(--border-size-small) solid var(--color-primary01);margin-left:calc(-1 * var(--space-unit));background:var(--color-surface01);border-radius:0;box-shadow:0 2px 4px 0 rgb(66 69 72 / 35%)}:host>div>z-icon{position:absolute;top:var(--space-unit);right:var(--space-unit);cursor:pointer;fill:var(--color-primary01)}:host>div>div.cta-wrapper{display:flex;flex-flow:column nowrap;align-self:end;justify-content:space-between}:host>div>div.content-wrapper{position:relative;overflow:hidden;align-self:stretch}:host>div>div.content-wrapper>section{box-sizing:border-box;padding:var(--space-unit) 0;border-bottom:var(--border-size-small) solid var(--color-surface04);color:var(--color-surface05);font-size:14px;line-height:20px}:host>div>div.content-wrapper>section:last-child{border-bottom:none}:host>div>div.content-wrapper>section.info-wrapper{position:relative;overflow:hidden;box-sizing:border-box}:host>div>div.content-wrapper>section.info-wrapper.hidden::after{position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(180deg, rgb(255 0 0 / 0%), rgb(255 0 0 / 0%) 60%, white);content:"";pointer-events:none}:host>div>div.content-wrapper>section>span.license-heading{display:flex;justify-content:space-between}:host>div>div.content-wrapper>section>span.license-heading>span.expired{color:var(--color-secondary02);font-size:12px;font-weight:600}:host>div>div.content-wrapper>section>span.license-heading>span.expiring{color:var(--color-warning01);font-size:12px;font-weight:600}:host>div>div.content-wrapper>z-popover{position:absolute;top:0;left:calc(var(--space-unit) * 4)}',v=class extends c{emitFlipCard(e=!1){this.flipCard.emit(e)}constructor(){super(),this.__registerHost(),this.__attachShadow(),this.flipCard=p(this,"flipCard",7),this.data=void 0,this.htmltabindex=0,this.hiddenContent=!1,this.tooltip=!1,this.emitFlipCard=this.emitFlipCard.bind(this)}componentWillLoad(){this.setStringOrArray()}componentWillUpdate(){this.setStringOrArray()}componentDidRender(){this.handleContentHeight()}handleContentHeight(){if(!this.contentWrapper&&!this.infoWrapper){this.hiddenContent=!1;return}if(this.contentWrapper.scrollHeight>this.contentWrapper.offsetHeight||this.infoWrapper.scrollHeight>this.infoWrapper.offsetHeight){const e=this.contentWrapper.offsetHeight-this.onlineLicenseWrapper.offsetHeight-this.offlineLicenseWrapper.offsetHeight;this.infoWrapper.style.height=`${e}px`,this.hiddenContent=!0;return}this.hiddenContent=!1}setStringOrArray(){typeof this.data=="string"?this.cardData=JSON.parse(this.data):this.cardData=this.data}renderCloseIcon(){return i("z-icon",{name:"multiply-circled-filled",height:18,width:18,onClick:()=>this.emitFlipCard(!1),tabindex:this.htmltabindex,onKeyUp:e=>{f(e,this.emitFlipCard,!1)}})}renderGeneralSection(){var e,t;const n=(e=this===null||this===void 0?void 0:this.cardData)===null||e===void 0?void 0:e.title,r=(t=this===null||this===void 0?void 0:this.cardData)===null||t===void 0?void 0:t.description;return i("section",{class:`info-wrapper ${this.hiddenContent?"hidden":""}`,onClick:()=>{this.hiddenContent&&(this.tooltip=!this.tooltip)},ref:s=>this.infoWrapper=s},this.renderAuthor(),this.renderYear(),n,i("br",null),r)}renderAuthor(){var e;const t=(e=this===null||this===void 0?void 0:this.cardData)===null||e===void 0?void 0:e.author;return t?i("span",null,"Autore: ",i("b",null,t),i("br",null)):null}renderYear(){var e;const t=(e=this===null||this===void 0?void 0:this.cardData)===null||e===void 0?void 0:e.year;return t?i("span",null,"Anno: ",i("b",null,t),i("br",null)):null}renderTooltip(){if(!this.tooltip||!this.cardData)return;const{title:e,year:t,author:n,description:r}=this.cardData;return i("z-popover",{position:h.RIGHT,onClick:()=>this.tooltip=!1},`${e} ${t} ${n} ${r}`)}setExpirationLicenseMessage(e){if(e==="online"&&this.cardData.onlineLicense.expired||e==="offline"&&this.cardData.offlineLicense.expired)return i("span",{class:"expired"},"SCADUTA");if(e==="online"&&this.cardData.onlineLicense.expiring||e==="offline"&&this.cardData.offlineLicense.expiring)return i("span",{class:"expiring"},"IN SCADENZA")}renderOnlineLicenseSection(){var e;if(!((e=this===null||this===void 0?void 0:this.cardData)===null||e===void 0)&&e.onlineLicense)return i("section",{ref:t=>this.onlineLicenseWrapper=t},i("span",{class:"license-heading"},i("span",null,"Licenza online"),this.setExpirationLicenseMessage("online")),"Scadenza il ",i("b",null,this.cardData.onlineLicense.expiration),i("br",null))}renderOfflineLicenseSection(){var e;if(!((e=this===null||this===void 0?void 0:this.cardData)===null||e===void 0)&&e.offlineLicense)return i("section",{ref:t=>this.offlineLicenseWrapper=t},i("span",{class:"license-heading"},i("span",null,"Licenza offline"),this.setExpirationLicenseMessage("offline")),"Scadenza il ",i("b",null,this.cardData.offlineLicense.expiration),i("br",null),"Installazioni disponibili: ",i("b",null,this.cardData.offlineLicense.installations))}render(){return i("div",{key:"75304e108278c0d2ea117c5726ec8e33fb2e1a0b"},this.renderCloseIcon(),i("div",{key:"d22253eb6e98b3a31cec42c30b1fbe3e49612d6c",class:"content-wrapper",ref:e=>this.contentWrapper=e},this.renderGeneralSection(),this.renderTooltip(),this.renderOnlineLicenseSection(),this.renderOfflineLicenseSection()),i("div",{key:"c0635b3ce10330bc8654c1f2efa2ecaa939ea743",class:"cta-wrapper"},i("slot",{key:"122b78701ef0854d4658c61ba32a1cf976d7cff4"})))}static get style(){return u}};d(v,[1,"z-myz-card-info",{data:[8],htmltabindex:[2],hiddenContent:[32],tooltip:[32]}]);const a={schemaVersion:"1.0.0",modules:[{kind:"javascript-module",path:"",declarations:[{kind:"class",name:"ZMyzCardInfo",tagName:"z-myz-card-info",customElement:!0,members:[{kind:"field",name:"data",type:"any",description:"dictionary info"},{kind:"field",name:"htmltabindex",type:"number",description:"tabindex link attribute (optional)",default:"0"}],events:[{kind:"event",name:"flipCard",description:"flip card to front"}],slots:[{name:"-",description:"content"}]}],exports:[{kind:"js",name:"ZMyzCardInfo",declaration:{name:"ZMyzCardInfo",module:"src/snowflakes/myz/card/z-myz-card-info/index.tsx"}},{kind:"custom-element-definition",name:"z-myz-card-info",declaration:{name:"ZMyzCardInfo",module:"src/snowflakes/myz/card/z-myz-card-info/index.tsx"}}]}]};l({...o()||{},...a,modules:[...(o()||{}).modules||[],...a.modules]});
