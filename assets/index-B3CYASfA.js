import"./index-BbgZ1BUD.js";import"./index-Dt79e7yh.js";import"./index-HnVcxhiK.js";import"./index-BEj-2O7q.js";import"./index-CMQ6GmVl.js";import"./index-CscvWlCS.js";import{s as I,g as h}from"./chunk-GKNNPQCW-BkHQSocK.js";import{d as v,H as y,c as m,h as l}from"./index-8h8udRzn.js";import{C as d,K as r,L as a,b as u}from"./index-CcuDdGyi.js";import{r as w,b as p,c as S,d as L,a as x}from"./utils-B_2tKo6T.js";const k='.sc-z-select-h{display:inline-block;width:inherit;color:var(--color-default-text);font-family:var(--font-family-sans);font-size:var(--font-size-3);font-weight:var(--font-rg)}[size="small"].sc-z-select-h,[size="x-small"].sc-z-select-h{font-size:var(--font-size-2)}.select-wrapper.sc-z-select>z-input.sc-z-select{width:100%}.select-wrapper.sc-z-select>div.sc-z-select{position:relative}.select-wrapper.sc-z-select>div.closed.sc-z-select{overflow:hidden;height:0}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select{position:absolute;width:100%;box-sizing:border-box;padding:calc(var(--space-unit) * 0.5) var(--space-unit);border:var(--border-size-small) solid var(--gray200);border-top:none;background:var(--color-surface01);outline:none}.select-wrapper.sc-z-select .closed.sc-z-select .ul-scroll-wrapper.sc-z-select{z-index:10}.select-wrapper.sc-z-select .open.sc-z-select .ul-scroll-wrapper.sc-z-select{z-index:20}.select-wrapper.sc-z-select .ul-scroll-wrapper.fixed.sc-z-select{position:static}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select>z-list.sc-z-select{position:relative;overflow:auto;max-height:240px;padding:calc(var(--space-unit) * 0.5);outline:none;scrollbar-color:var(--color-primary01) transparent}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select>z-list.sc-z-select::-webkit-scrollbar{width:10px;background:linear-gradient(to right, transparent 0 3px, var(--gray200) 3px 7px, transparent 7px 10px);border-radius:var(--border-radius)}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select>z-list.sc-z-select::-webkit-scrollbar-track{background-color:transparent}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select>z-list.sc-z-select::-webkit-scrollbar-thumb{width:10px;background-color:var(--color-primary01);border-radius:var(--border-radius)}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select>z-list.sc-z-select::-webkit-scrollbar-thumb:hover{background-color:var(--color-hover-primary)}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select .list-element-container.sc-z-select{display:flex;align-items:center;padding-left:calc(var(--space-unit) * 1.5)}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select .list-element-container.sc-z-select .list-element-content.sc-z-select{display:block;padding:calc(var(--space-unit) * 0.5) 0}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select .list-element-container.sc-z-select>z-icon.sc-z-select+.list-element-content.sc-z-select{display:block;padding:calc(var(--space-unit) * 0.5) var(--space-unit)}[size="x-small"].sc-z-select-h .select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select .list-element-container.sc-z-select .list-element-content.sc-z-select{padding:0}[size="small"].sc-z-select-h .select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select .list-element-container.sc-z-select>z-icon.sc-z-select{--z-icon-width:16px;--z-icon-height:16px}[size="x-small"].sc-z-select-h .select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select .list-element-container.sc-z-select>z-icon.sc-z-select{--z-icon-width:14px;--z-icon-height:14px}[size="x-small"].sc-z-select-h .select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select .list-element-container.sc-z-select>z-icon.sc-z-select+.list-element-content.sc-z-select{padding:0 var(--space-unit)}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select z-list.sc-z-select z-list-element.sc-z-select .list-element-container.sc-z-select .list-element-content.selected.sc-z-select{font-weight:bold}.select-wrapper.sc-z-select .ul-scroll-wrapper.sc-z-select .no-results.sc-z-select z-icon.sc-z-select{margin-right:var(--space-unit)}.z-list-group-title.sc-z-select{color:var(--gray800)}.reset-item.sc-z-select{color:var(--color-primary01);fill:var(--color-primary01)}.reset-item-content.sc-z-select{display:flex;align-items:center}.reset-item.reset-item-margin.sc-z-select .reset-item-content.sc-z-select{margin-left:calc(var(--space-unit))}.reset-item.sc-z-select .reset-item-content.sc-z-select>z-icon.sc-z-select{margin-right:var(--space-unit)}.reset-item.hide.sc-z-select{display:none}',O=class extends y{constructor(){super(),this.__registerHost(),this.optionSelect=m(this,"optionSelect",7),this.resetSelect=m(this,"resetSelect",7),this.itemsList=[],this.htmlid=`id-${w()}`,this.items=void 0,this.name=void 0,this.label=void 0,this.ariaLabel="",this.disabled=!1,this.readonly=!1,this.placeholder=void 0,this.htmltitle=void 0,this.status=void 0,this.message=!0,this.autocomplete=!1,this.noresultslabel="Nessun risultato",this.hasGroupItems=void 0,this.isfixed=!1,this.resetItem=void 0,this.size=d.BIG,this.isOpen=!1,this.selectedItem=null,this.focusedItemId=void 0,this.searchString=void 0,this.toggleSelectUl=this.toggleSelectUl.bind(this),this.selectItem=this.selectItem.bind(this),this.handleSelectFocus=this.handleSelectFocus.bind(this)}watchItems(){this.itemsList=this.getInitialItemsArray(),this.selectedItem=this.itemsList.find(e=>e.selected)}getFocusedItemHandler(e){this.focusedItemId=e.target.id}async getSelectedItem(){return this.selectedItem}async getValue(){return this.getSelectedValue()}async setValue(e){let t=[];typeof e=="string"?t.push(e):t=e,this.selectedItem=this.itemsList.find(s=>t.includes(s.id))}emitOptionSelect(){this.optionSelect.emit({id:this.htmlid,selected:this.getSelectedValue()})}emitResetSelect(){this.resetSelect.emit({id:this.htmlid})}componentWillLoad(){this.watchItems()}componentWillRender(){this.filterItems(this.searchString)}getInitialItemsArray(){return typeof this.items=="string"?JSON.parse(this.items):this.items}mapSelectedItemToItemsArray(){return this.getInitialItemsArray().map(t=>{var s;return t.selected=t.id===((s=this.selectedItem)===null||s===void 0?void 0:s.id),t})}getSelectedValue(){var e;return(e=this.selectedItem)===null||e===void 0?void 0:e.id}filterItems(e){const t=this.mapSelectedItemToItemsArray();e!=null&&e.length?this.itemsList=t.filter(s=>s.name.toUpperCase().includes(e.toUpperCase())).map(s=>{const i=s.name.toUpperCase().indexOf(e.toUpperCase()),c=i+e.length,n=s.name.substring(0,i)+`<strong>${s.name.substring(i,c)}</strong>`+s.name.substring(c,s.name.length);return s.name=n,s}):this.itemsList=t}hasAutocomplete(){return p(this.autocomplete)===!0}handleInputChange(e){this.searchString=e.detail.value,this.isOpen||this.toggleSelectUl()}selectItem(e,t){e&&e.disabled||(this.itemsList=this.mapSelectedItemToItemsArray(),this.itemsList=this.itemsList.map(s=>(s.selected=!1,s.id===(e==null?void 0:e.id)&&(s.selected=t),s)),this.selectedItem=this.itemsList.find(s=>s.selected),this.emitOptionSelect(),this.searchString&&(this.searchString=null))}arrowsSelectNav(e,t){const s=this.resetItem&&!!this.selectedItem;if(![r.ARROW_DOWN,r.ARROW_UP].includes(e.key))return;e.preventDefault(),e.stopPropagation(),this.isOpen||this.toggleSelectUl();let c;this.resetItem&&(e.key===r.ARROW_DOWN?c=t+1===this.itemsList.length+1?+!s:t+1:e.key===r.ARROW_UP&&(c=t<=+!s?this.itemsList.length:t-1)),this.resetItem||(e.key===r.ARROW_DOWN?c=t+1===this.itemsList.length?0:t+1:e.key===r.ARROW_UP&&(c=t<=0?this.itemsList.length-1:t-1)),this.focusSelectItem(c)}focusSelectItem(e){const t=this.element.querySelector(`#${this.htmlid}_${e}`);t&&t.focus()}toggleSelectUl(e=!1){this.disabled||this.readonly||(this.isOpen?(document.removeEventListener("click",this.handleSelectFocus),document.removeEventListener("keyup",this.handleSelectFocus),e&&this.element.querySelector(`#${this.htmlid}_input`).focus()):(document.addEventListener("click",this.handleSelectFocus),document.addEventListener("keyup",this.handleSelectFocus)),this.focusedItemId="",this.isOpen=!this.isOpen)}handleInputClick(e){if(e.composedPath().find(i=>i.classList&&i.classList.contains("reset-icon"))){e.stopPropagation();return}this.toggleSelectUl()}handleSelectFocus(e){if(e instanceof KeyboardEvent&&e.key===r.ESC)return e.stopPropagation(),this.toggleSelectUl(!0);if(e instanceof KeyboardEvent&&e.key!==r.TAB&&e.key!==r.ENTER)return;S(L()).find(i=>i.nodeName.toLowerCase()==="z-input"&&i.id===`${this.htmlid}_input`)||this.toggleSelectUl(e instanceof MouseEvent)}scrollToLetter(e){const t=this.itemsList.find(s=>s.name.charAt(0)===e);t&&this.focusSelectItem(this.itemsList.indexOf(t))}renderInput(){return l("z-input",{class:{"active-select":this.isOpen,"cursor-select":!this.autocomplete},id:`${this.htmlid}_input`,htmlid:`${this.htmlid}_select_input`,placeholder:this.placeholder,value:!this.isOpen&&this.selectedItem?this.selectedItem.name.replace(/<[^>]+>/g,""):null,label:this.label,"aria-expanded":this.isOpen?"true":"false","aria-label":this.ariaLabel,"aria-controls":`${this.htmlid}_list`,"aria-autocomplete":this.hasAutocomplete()?"list":"none","aria-activedescendant":this.isOpen?this.focusedItemId:"",icon:this.isOpen?"caret-up":"caret-down",hasclearicon:this.hasAutocomplete(),message:!1,disabled:this.disabled,readonly:this.readonly||!this.hasAutocomplete()&&this.isOpen,status:this.isOpen?void 0:this.status,role:"combobox",size:this.size,onClick:e=>{this.handleInputClick(e)},onKeyUp:e=>{e.keyCode!==13&&e.preventDefault(),x(e,this.toggleSelectUl)},onKeyDown:e=>this.arrowsSelectNav(e,this.selectedItem?this.itemsList.indexOf(this.selectedItem):this.resetItem?0:-1),onInputChange:e=>{this.handleInputChange(e)},onKeyPress:e=>{this.hasAutocomplete()||(e.preventDefault(),this.scrollToLetter(String.fromCharCode(e.keyCode)))}})}renderSelectUl(){return l("div",{class:this.isOpen?"open":"closed",tabindex:"-1"},l("div",{class:{"ul-scroll-wrapper":!0,fixed:this.isfixed},tabindex:"-1"},l("z-list",{role:"listbox","aria-label":this.ariaLabel||this.label,tabindex:this.disabled||this.readonly||!this.isOpen?-1:0,id:`${this.htmlid}_list`,"aria-multiselectable":!1,size:this.listSizeType(),class:{disabled:this.disabled,readonly:this.readonly,filled:!!this.selectedItem,[`input-${this.status}`]:!this.isOpen&&!!this.status}},this.resetItem&&this.renderResetItem(),this.renderSelectUlItems())))}renderResetItem(){return l("z-list-element",{class:{hide:!this.selectedItem||!this.resetItem,"reset-item":!0,"reset-item-margin":!this.hasGroupItems},clickable:!0,disabled:!1,dividerType:a.ELEMENT,role:"option",tabindex:"0","aria-selected":"false",id:`${this.htmlid}_${this.resetItem?"0":"none"}`,size:this.listSizeType(),onClickItem:()=>{this.selectedItem=null,this.searchString=null,this.emitResetSelect()},onKeyDown:e=>this.arrowsSelectNav(e,0)},l("div",{class:"reset-item-content"},l("z-icon",{name:"multiply-circled"}),l("span",null,this.resetItem)))}renderItem(e,t,s){return l("z-list-element",{clickable:!e.disabled,disabled:e.disabled,dividerType:s?a.HEADER:a.ELEMENT,role:"option",tabindex:e.disabled||!this.isOpen?-1:0,"aria-selected":e.selected?"true":"false",id:`${this.htmlid}_${t}`,size:this.listSizeType(),onClickItem:()=>this.selectItem(e,!0),onKeyDown:i=>this.arrowsSelectNav(i,t)},l("div",{class:"list-element-container"},e.icon&&l("z-icon",{name:e.icon}),l("span",{class:{selected:!!e.selected,"list-element-content":!0},innerHTML:e.name})))}listSizeType(){return this.size===d.SMALL||this.size===d.X_SMALL?u.SMALL:u.MEDIUM}renderSelectUlItems(){return this.itemsList.length?this.hasGroupItems?this.renderSelectGroupItems():this.itemsList.map((e,t,s)=>{const i=s.length===t+1,c=this.resetItem?t+1:t;return this.renderItem(e,c,i)}):this.renderNoSearchResults()}renderSelectGroupItems(){const e=this.itemsList.reduce((t,s,i,c)=>{var n;const{category:o}=s,f=c.length===i+1,g=this.resetItem?i+1:i,b=this.renderItem(s,g,f);return t[o]=(n=t[o])!==null&&n!==void 0?n:[],t[o].push(b),t},{});return Object.entries(e).map(([t,s])=>l("z-list-group",{"divider-type":a.ELEMENT},l("span",{class:"body-3-sb z-list-group-title",slot:"header-title"},t),s.map(i=>i)))}renderNoSearchResults(){return l("z-list-element",{color:"blue500",class:"no-results",size:this.listSizeType()},l("z-icon",{name:"multiply-circle",fill:"blue500"}),this.noresultslabel)}renderMessage(){if(p(this.message)!==!1)return l("z-input-message",{message:p(this.message)===!0?void 0:this.message,status:this.status,class:this.size})}render(){return l("div",{key:"940436df191c4471aa306fd505273b40c1158436",class:"select-wrapper"},this.renderInput(),this.renderSelectUl(),this.renderMessage())}get element(){return this}static get watchers(){return{items:["watchItems"]}}static get style(){return k}};v(O,[2,"z-select",{htmlid:[1],items:[1],name:[1],label:[1],ariaLabel:[1,"aria-label"],disabled:[4],readonly:[4],placeholder:[1],htmltitle:[1],status:[8],message:[8],autocomplete:[4],noresultslabel:[1],hasGroupItems:[4,"has-group-items"],isfixed:[4],resetItem:[1,"reset-item"],size:[8],isOpen:[32],selectedItem:[32],focusedItemId:[32],searchString:[32],getSelectedItem:[64],getValue:[64],setValue:[64]},[[0,"ariaDescendantFocus","getFocusedItemHandler"]],{items:["watchItems"]}]);const z={schemaVersion:"1.0.0",modules:[{kind:"javascript-module",path:"",declarations:[{kind:"class",name:"ZSelect",tagName:"z-select",customElement:!0,members:[{kind:"field",name:"htmlid",type:"string",description:"the id of the input element",default:"`id-${randomId()}`"},{kind:"field",name:"items",type:"string",description:"the input select options"},{kind:"field",name:"name",type:"string",description:"the input name"},{kind:"field",name:"label",type:"string",description:"the input label"},{kind:"field",name:"ariaLabel",type:"string",description:"the input aria-label",default:'""'},{kind:"field",name:"disabled",type:"boolean",description:"the input is disabled",default:"false"},{kind:"field",name:"readonly",type:"boolean",description:"the input is readonly",default:"false"},{kind:"field",name:"placeholder",type:"string",description:"the input placeholder (optional)"},{kind:"field",name:"htmltitle",type:"string",description:"the input html title (optional)"},{kind:"field",name:"status",type:"any",description:"the input status (optional)"},{kind:"field",name:"message",type:"any",description:"input helper message (optional) - if set to `false` message won't be displayed",default:"true"},{kind:"field",name:"autocomplete",type:"boolean",description:"the input has autocomplete option",default:"false"},{kind:"field",name:"noresultslabel",type:"string",description:"no result text message",default:'"Nessun risultato"'},{kind:"field",name:"hasGroupItems",type:"boolean",description:""},{kind:"field",name:"isfixed",type:"boolean",description:"When fixed, it occupies space and pushes down next elements.",default:"false"},{kind:"field",name:"resetItem",type:"string",description:""},{kind:"field",name:"size",type:"any",description:"Available sizes: `big`, `small` and `x-small`. Defaults to `big`.",default:"ControlSize.BIG"}],events:[{kind:"event",name:"optionSelect",description:"Emitted on select option selection, returns select id, selected item id"},{kind:"event",name:"resetSelect",description:"Emitted on reset selected item, returns select id, selected item id"}]}],exports:[{kind:"js",name:"ZSelect",declaration:{name:"ZSelect",module:"src/components/z-select/index.tsx"}},{kind:"custom-element-definition",name:"z-select",declaration:{name:"ZSelect",module:"src/components/z-select/index.tsx"}}]}]};I({...h()||{},...z,modules:[...(h()||{}).modules||[],...z.modules]});
