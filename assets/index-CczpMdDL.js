import"./index-DlGlwqHM.js";import{s as r,g as i}from"./chunk-GKNNPQCW-BkHQSocK.js";import{d,H as h,c as a,h as s,a as u}from"./index-BJyMe-bF.js";import{K as n}from"./index-C_NTAvuu.js";const f=':host{display:inline-flex;flex-direction:column;align-items:flex-start;justify-content:center;padding:0;font-family:var(--font-family-sans)}:host,::slotted(*),*{box-sizing:border-box}::slotted(a){text-decoration:none}::slotted(*){color:var(--color-default-text);font-family:var(--font-family-sans);font-weight:var(--font-rg)}:host(:is([active],[open])) .label,.label:hover{border-color:var(--color-secondary01)}:host(:is([active],[open])) .label ::slotted(*),.label:focus:focus-visible ::slotted(*),.label:hover ::slotted(*){font-weight:var(--font-bd)}.label{display:flex;width:100%;align-items:center;padding:calc(var(--space-unit) * 2) calc(var(--space-unit) / 2);border:0;border-bottom:var(--border-size-small) solid var(--color-surface05);margin:0;background:transparent;border-radius:0;cursor:pointer;text-align:left}::slotted([data-text]){display:inline-flex;flex-direction:column}::slotted([data-text])::after{overflow:hidden;height:0;content:attr(data-text);content:attr(data-text) / "";font-weight:var(--font-bd);pointer-events:none;user-select:none;visibility:hidden}@media speech{::slotted([data-text])::after{display:none}}.label ::slotted(*){width:100%;margin:0;font-size:var(--font-size-3);line-height:1.25}.label:focus:focus-visible{box-shadow:var(--shadow-focus-primary);outline:none}.label z-icon{margin-left:calc(var(--space-unit) * 4);fill:var(--color-default-icon)}.items{display:flex;width:100%;flex-direction:column;padding:calc(var(--space-unit) / 2);padding-bottom:calc(var(--space-unit) * 1.5)}.items>::slotted([slot="section"]){display:inline-flex;padding:calc(var(--space-unit) / 2);margin:0;font-size:var(--font-size-2);line-height:1.4;outline:none}.items>::slotted([slot="section"]:focus:focus-visible){box-shadow:var(--shadow-focus-primary);color:var(--color-secondary01)}.items>::slotted([slot="section"]:hover),.items>::slotted([slot="section"]:focus:focus-visible),.items>::slotted([slot="section"][active]){color:var(--color-secondary01);font-weight:var(--font-bd)}',m=class extends h{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.opened=a(this,"opened",7),this.closed=a(this,"closed",7),this.currentIndex=-1,this.currentCanvasOpenStatus=!1,this.active=void 0,this.open=void 0,this.hasContent=void 0}canvasOpenStatusChanged(e){this.currentCanvasOpenStatus=e.detail}handleKeyDown(e){e.code!==n.ENTER&&(this.open&&!this.currentCanvasOpenStatus&&this.handleNavigationSideArrow(e),this.handleArrowsNav(e))}handleNavigationSideArrow(e){if(!(e.code!==n.ARROW_RIGHT&&e.code!==n.ARROW_LEFT)){if(e.code===n.ARROW_RIGHT){const t=this.hostElement.parentElement.nextElementSibling;if(t){const o=t.shadowRoot.querySelector(".menu-label");console.log(this.hostElement.parentElement),o.focus()}this.open=!1,t.setAttribute("open","true")}else if(e.code===n.ARROW_LEFT){const t=this.hostElement.parentElement.previousElementSibling;t&&t.shadowRoot.querySelector(".menu-label").focus(),t.setAttribute("open","true"),this.open=!1}}}handleArrowsNav(e){const t=Array.from(this.hostElement.querySelectorAll('[slot="section"]'));if(this.open)if(e.preventDefault(),e.stopPropagation(),e.code===n.ARROW_DOWN||e.code===n.ARROW_UP){let o;t.forEach(c=>c.setAttribute("tabindex","-1")),e.code===n.ARROW_DOWN?o=this.getNextItem(t,1):e.code===n.ARROW_UP&&(o=this.getNextItem(t,-1)),o&&(o.setAttribute("tabindex","0"),o.focus())}else e.code===n.ESC?this.focusToParentAndCloseMenu():e.shiftKey&&e.code===n.TAB&&this.focusToParentAndCloseMenu()}getNextItem(e,t){return this.currentIndex===-1?(this.currentIndex=t===1?0:e.length-1,e[this.currentIndex]):(this.currentIndex=(this.currentIndex+t+e.length)%e.length,e[this.currentIndex])}focusToParentAndCloseMenu(){this.hostElement.shadowRoot.querySelector("button").focus(),this.currentIndex=-1,this.open=!1}toggle(){this.hasContent&&(this.open=!this.open,this.open?this.opened.emit():this.closed.emit())}handleClick(e){!this.open||this.hostElement.contains(e.target)||(this.open=!1,this.closed.emit())}checkContent(){this.hasContent=this.hostElement.querySelectorAll('[slot="section"]').length>0}onLabelSlotChange(e){const t=e.target.assignedElements()[0];t.dataset.text=(t==null?void 0:t.innerText)||null}focusFirstSectionItemOnKeyUp(){const e=this.hostElement.querySelectorAll('[slot="section"]')[0];e&&(e.focus(),this.currentIndex=0)}componentWillLoad(){this.checkContent()}render(){return s(u,{key:"ee37981a99004c5b5bcfc603ed43329defec0ca9",role:"menu",open:this.open},s("button",{key:"f03af106cba7c45f9a96673b5e0ec31ca4ca18d4",class:"label","aria-pressed":this.open?"true":"false",onClick:this.toggle.bind(this),onKeyUp:this.focusFirstSectionItemOnKeyUp.bind(this)},s("slot",{key:"090044ba60415b2b8f0c3f0a7ecfb985f213c84a",onSlotchange:this.onLabelSlotChange.bind(this)}),this.hasContent&&s("z-icon",{key:"84fb5a4f795c215728a5aafd0a1108e423bd613f",name:this.open?"chevron-up":"chevron-down"})),this.open&&s("div",{key:"78b4853111ac345156c79c7a37ca024483a93793",class:"items"},s("slot",{key:"f88cba18aec30569492163cef119e2138b31de72",name:"section",onSlotchange:this.checkContent.bind(this)})))}get hostElement(){return this}static get style(){return f}};d(m,[1,"z-menu-section",{active:[516],open:[32],hasContent:[32]},[[4,"canvasOpenStatusChanged","canvasOpenStatusChanged"],[0,"keydown","handleKeyDown"],[4,"click","handleClick"]]]);const l={schemaVersion:"1.0.0",modules:[{kind:"javascript-module",path:"",declarations:[{kind:"class",name:"ZMenuSection",tagName:"z-menu-section",customElement:!0,members:[{kind:"field",name:"active",type:"boolean",description:"Active state"}],events:[{kind:"event",name:"opened",description:"The section has been opened."},{kind:"event",name:"closed",description:"The section has been closed."}],slots:[{name:"-",description:"Label of the menu section."},{name:"item",description:"Single entry of the section. Set the same slot name to different items to put many of them. Add the `active` attribute to a slotted item to highlight it."}]}],exports:[{kind:"js",name:"ZMenuSection",declaration:{name:"ZMenuSection",module:"src/components/z-menu-section/index.tsx"}},{kind:"custom-element-definition",name:"z-menu-section",declaration:{name:"ZMenuSection",module:"src/components/z-menu-section/index.tsx"}}]}]};r({...i()||{},...l,modules:[...(i()||{}).modules||[],...l.modules]});
