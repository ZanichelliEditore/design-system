import"./index-DG5VvcyV.js";import{s as d,g as l}from"./chunk-L4EGOTBX-lo-pZyle.js";import"./entry-preview-Cx7Tr7Nx.js";import{d as u,H as m,c as r,h as n,a as f}from"./index-BZ0rSFNp.js";import{K as s}from"./index-CjlG6izv.js";const p=':host,::slotted(*),*{box-sizing:border-box;outline:none}:host{position:relative;display:inline-flex;flex-direction:column;flex-shrink:0;--z-menu-label-color:var(--color-default-text)}::slotted(a){text-decoration:none}::slotted(*){color:var(--color-default-text);font-family:var(--font-family-sans);font-weight:var(--font-rg)}.menu-label{width:100%;padding:0;border:0;margin:0;background:transparent;border-radius:0;color:inherit;outline:none;text-align:left}.menu-wrapper{display:flex;align-items:center}.menu-wrapper:focus-visible,.menu-label-content:focus-visible,button:focus-visible{outline:none}button.menu-label{cursor:pointer}.menu-label:focus-within{z-index:1;box-shadow:var(--shadow-focus-primary)}.menu-label .menu-label-content{position:relative;display:flex;height:30px;align-items:center}:host(:is([active],[open])) .menu-label-content,.menu-label:focus-within .menu-label-content{color:var(--color-primary01);font-weight:var(--font-bd)}:host(:is([active],[open])) .menu-label-content ::slotted(*),.menu-label:focus-within .menu-label-content ::slotted(*),.menu-label:focus-within .menu-label-content z-icon{color:var(--color-primary01);letter-spacing:normal}:host .menu-label .menu-label-content ::slotted(*:not([slot]):focus:focus-visible){box-shadow:none !important}:host(:is([active],[open],[vertical-context])) .menu-label .menu-label-content::after,.menu-label .menu-label-content:hover::after,.menu-label:focus-within .menu-label-content::after{position:absolute;bottom:0;left:0;width:100%;content:"";pointer-events:none}:host([vertical-context]) .menu-label-content::after{height:var(--border-size-small);background-color:var(--color-surface03)}:host(:is([active],[open])) .menu-label .menu-label-content::after,.menu-label .menu-label-content:hover::after,.menu-label:focus-within .menu-label-content::after{height:var(--border-size-large);background-color:var(--color-secondary01)}::slotted([data-text])::after{height:0;content:attr(data-text);content:attr(data-text) / "";font-weight:var(--font-bd);letter-spacing:normal;pointer-events:none;user-select:none;visibility:hidden}@media speech{::slotted([data-text])::after{display:none}}::slotted([data-text]){display:inline-flex;flex-direction:column}.menu-label .menu-label-content ::slotted(*){display:inline-flex;width:100%;min-width:fit-content;margin:0;appearance:none;color:var(--z-menu-label-color);font-family:var(--font-family-sans);font-size:var(--font-size-3);font-weight:inherit;outline:none}.menu-label .menu-label-content ::slotted(*),.menu-label .menu-label-content z-icon{padding:var(--space-unit) 0}.menu-label .menu-label-content z-icon{margin-left:calc(var(--space-unit) * 1.5);fill:currentcolor}.content{background:var(--color-surface01)}:host(:not([open])) .content{display:none}:host([floating]) .content{position:absolute;top:100%;left:0;width:375px;min-width:100%;max-width:100vw;padding:var(--space-unit) var(--space-unit) calc(var(--space-unit) * 2);box-shadow:var(--shadow-2)}:host(:not([floating])) .content{width:100%}.header{display:flex;align-items:center;padding:var(--space-unit) 0 calc(var(--space-unit) * 2)}.header ::slotted(img[slot="header"]){width:calc(var(--space-unit) * 11.25);height:auto;object-fit:contain}.header ::slotted([slot="header"]:not(:first-child)){margin:auto 0;margin-left:calc(var(--space-unit) * 2.5);font-size:var(--font-size-3);font-weight:var(--font-sb);line-height:1.5}.items{display:flex;flex-direction:column;align-items:flex-start;background:inherit}.items>::slotted([slot="item"]){width:100%;margin:0;font-size:var(--font-size-3);line-height:1.25;outline:none}.items>::slotted([slot="item"]:focus:focus-visible){box-shadow:var(--shadow-focus-primary)}.items>::slotted([slot="item"]:not(z-menu-section)){padding:calc(var(--space-unit) * 2) calc(var(--space-unit) * 0.5);border-bottom:var(--border-size-small) solid var(--color-surface05)}.items>::slotted([slot="item"]:hover),.items>::slotted([slot="item"]:focus:focus-visible),.items>::slotted([slot="item"]:active){border-color:var(--color-secondary01);font-weight:var(--font-bd)}',b=class extends m{toggle(){this.hasContent&&(this.open=!this.open,this.open?this.opened.emit():this.closed.emit())}handleClick(e){!this.floating||!this.open||this.hostElement.contains(e.target)||(this.reflow(),this.open=!1,this.closed.emit())}canvasOpenStatusChanged(e){this.currentCanvasOpenStatus=e.detail}handleKeyDown(e){e.code!==s.ENTER&&(this.open&&!this.currentCanvasOpenStatus&&this.handleNavigationSideArrow(e),this.handleArrowsNav(e))}handleNavigationSideArrow(e){if(!(e.code!==s.ARROW_RIGHT&&e.code!==s.ARROW_LEFT)){if(e.code===s.ARROW_RIGHT){const t=this.hostElement.nextElementSibling;t||(this.firstElMenu.shadowRoot.querySelector(".menu-label").focus(),this.open=!1),t&&t.tagName==="Z-MENU"&&(t.shadowRoot.querySelector(".menu-label").focus(),t.children.length>1&&t.setAttribute("open","true"),this.open=!1)}else if(e.code===s.ARROW_LEFT){const t=this.hostElement.previousElementSibling;t.tagName!=="Z-MENU"&&(this.lastElMenu.shadowRoot.querySelector(".menu-label").focus(),this.open=!1),t&&t.tagName==="Z-MENU"&&(t.shadowRoot.querySelector(".menu-label").focus(),t.children.length>1&&t.setAttribute("open","true"),this.open=!1)}}}handleArrowsNav(e){const a=Array.from(this.hostElement.querySelectorAll("[slot='item']")).map(o=>o.tagName==="Z-MENU-SECTION"?o.shadowRoot.querySelector("button"):o);if(this.open)if(e.preventDefault(),e.stopPropagation(),e.code===s.ARROW_DOWN||e.code===s.ARROW_UP){let o;a.forEach(i=>i.setAttribute("tabindex","-1")),e.code===s.ARROW_DOWN?o=this.getNextItem(a,1):e.code===s.ARROW_UP&&(o=this.getNextItem(a,-1)),o&&(o.setAttribute("tabindex","0"),o.focus())}else e.code===s.ESC?this.focusToParentAndCloseMenu():e.shiftKey&&e.code===s.TAB&&this.focusToParentAndCloseMenu()}getNextItem(e,t){return this.currentIndex===-1?(this.currentIndex=t===1?0:e.length-1,e[this.currentIndex]):(this.currentIndex=(this.currentIndex+t+e.length)%e.length,e[this.currentIndex])}focusToParentAndCloseMenu(){this.hostElement.shadowRoot.querySelector(".menu-label").focus(),this.currentIndex=-1,this.open=!1}onOpenChanged(){this.open?this.reflow(!0):cancelAnimationFrame(this.raf)}constructor(){super(),this.__registerHost(),this.__attachShadow(),this.opened=r(this,"opened",7),this.closed=r(this,"closed",7),this.currentIndex=-1,this.currentCanvasOpenStatus=!1,this.active=void 0,this.floating=!0,this.open=!1,this.verticalContext=!1,this.hasHeader=void 0,this.hasContent=void 0,this.toggle=this.toggle.bind(this),this.checkContent=this.checkContent.bind(this),this.onLabelSlotChange=this.onLabelSlotChange.bind(this),this.onItemsChange=this.onItemsChange.bind(this)}componentWillLoad(){const e=Array.from(this.hostElement.parentElement.querySelectorAll('[slot="menu"]'));this.firstElMenu=e[0],this.lastElMenu=e[e.length-1],this.checkContent()}onLabelSlotChange(e){const t=e.target.assignedElements()[0];t.dataset.text=t==null?void 0:t.textContent}reflow(e=!1){if(this.content){const{style:t}=this.content,{left:a}=this.hostElement.getBoundingClientRect(),o=getComputedStyle(this.content).width,i=o?parseFloat(o.replace("px","")):375,h=30;t.left=`${Math.min(window.innerWidth-a-i-h,0)}px`}e&&(this.raf=requestAnimationFrame(this.reflow.bind(this,e)))}checkContent(){this.hasHeader=!!this.hostElement.querySelectorAll("[slot=header]").length,this.hasContent=!!this.hostElement.querySelectorAll("[slot=item]").length||this.hasHeader}onItemsChange(){this.checkContent(),this.hostElement.querySelectorAll("[slot=item]").forEach(t=>{t.setAttribute("role","menuitem"),t.setAttribute("tabindex","-1"),t.dataset.text=t.textContent})}focusFirstItemOnKeyUp(){const e=this.hostElement.querySelectorAll("[slot='item']")[0];e&&(e.focus(),this.currentIndex=0)}renderMenuLabel(){return this.hasContent?n("div",{class:"menu-wrapper"},n("button",{class:"menu-label","aria-expanded":this.open?"true":"false","aria-label":this.open?"Chiudi menù":"Apri menù",onClick:this.toggle,onKeyUp:this.focusFirstItemOnKeyUp.bind(this)},n("div",{class:"menu-label-content"},n("slot",{onSlotchange:this.onLabelSlotChange}),n("z-icon",{name:this.open?"chevron-up":"chevron-down"})))):n("div",{class:"menu-wrapper"},n("div",{class:"menu-label"},n("div",{class:"menu-label-content"},n("slot",{onSlotchange:this.onLabelSlotChange}))))}render(){return n(f,{key:"a483aa6ffb4cf15cb99eb4e6d387015d3eaa02c5"},this.renderMenuLabel(),this.hasContent&&n("div",{key:"c0e8a2a28c1b4f0e0c410997ce76ae43b1c8956b",class:"content",ref:e=>this.content=e},this.hasHeader&&n("header",{key:"b33b90980972bb148c52476c69ad0b8644125799",class:"header"},n("slot",{key:"0f5c3962dd55bff36082dce796e4c042b4ae3b8d",name:"header",onSlotchange:this.checkContent})),n("div",{key:"4a41aa00912e3f4a62e598ed4c00382a324725a2",class:"items",role:"menu"},n("slot",{key:"7f72058b2b80c73a32dd1bc42892ba17a285ad9b",name:"item",onSlotchange:this.onItemsChange}))))}get hostElement(){return this}static get watchers(){return{open:["onOpenChanged"]}}static get style(){return p}};u(b,[1,"z-menu",{active:[516],floating:[516],open:[1540],verticalContext:[516,"vertical-context"],hasHeader:[32],hasContent:[32]},[[4,"click","handleClick"],[4,"canvasOpenStatusChanged","canvasOpenStatusChanged"],[0,"keydown","handleKeyDown"]],{open:["onOpenChanged"]}]);const c={schemaVersion:"1.0.0",modules:[{kind:"javascript-module",path:"",declarations:[{kind:"class",name:"ZMenu",tagName:"z-menu",customElement:!0,members:[{kind:"field",name:"active",type:"boolean",description:"Flag to set the active status of the menu."},{kind:"field",name:"floating",type:"boolean",description:`Flag to set the display mode of the list.
If true, the list will be absolutely positioned under the menu label,
stacked beneath it otherwise.`,default:"true"},{kind:"field",name:"open",type:"boolean",description:"The opening state of the menu.",default:"false"},{kind:"field",name:"verticalContext",type:"boolean",description:"Tells the component that it's placed in a vertical context with other `ZMenu`s (e.g. in the ZAppHeader's offcanvas).\nA small border is placed under it as a separator from other elements.",default:"false"}],events:[{kind:"event",name:"opened",description:"The menu has been opened."},{kind:"event",name:"closed",description:"The menu has been closed."}],cssProperties:[{name:"--z-menu-label-color",description:"Color of the label's text."}],slots:[{name:"-",description:"Menu label"},{name:"header",description:"Header to display as the first entry of the open menu."},{name:"item",description:"Single entry of the section. Can be slotted multiple times to insert items onto the menu. Use `z-menu-section` for submenus."}]}],exports:[{kind:"js",name:"ZMenu",declaration:{name:"ZMenu",module:"src/components/z-menu/index.tsx"}},{kind:"custom-element-definition",name:"z-menu",declaration:{name:"ZMenu",module:"src/components/z-menu/index.tsx"}}]}]};d({...l()||{},...c,modules:[...(l()||{}).modules||[],...c.modules]});
