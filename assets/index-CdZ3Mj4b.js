import"./index-DG5VvcyV.js";import{s as d,g as i}from"./chunk-L4EGOTBX-lo-pZyle.js";import"./entry-preview-Cx7Tr7Nx.js";import{d as c,H as r,c as a,h as o,a as h}from"./index-BZ0rSFNp.js";import{K as s}from"./index-CjlG6izv.js";const m=':host{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;padding:0;font-family:var(--font-family-sans)}:host,::slotted(*),*{box-sizing:border-box}::slotted(a){text-decoration:none}::slotted(*){color:var(--color-default-text);font-family:var(--font-family-sans);font-weight:var(--font-rg)}.label{display:flex;width:100%;align-items:center;padding:var(--space-unit) 0;border:0;border-bottom:var(--border-size-small) solid var(--color-surface03);margin:0;background:transparent;border-radius:0;cursor:pointer;text-align:left}:host(:is([active],[open])) .label,.label:focus:focus-visible,.label:hover{border-color:var(--color-secondary01)}.label:focus:focus-visible{box-shadow:var(--shadow-focus-primary);outline:none}:host(:is([active],[open])) .label ::slotted(*),.label:focus:focus-visible ::slotted(*),.label:hover ::slotted(*){font-weight:var(--font-bd)}::slotted([data-text]){display:inline-flex;flex-direction:column}::slotted([data-text])::after{overflow:hidden;height:0;content:attr(data-text);content:attr(data-text) / "";font-weight:var(--font-bd);pointer-events:none;user-select:none;visibility:hidden}@media speech{::slotted([data-text])::after{display:none}}.label ::slotted(*){width:100%;margin:0;font-size:var(--font-size-3);line-height:1.5}.label z-icon{margin-left:calc(var(--space-unit) * 4);fill:var(--color-default-icon)}.items{display:flex;width:100%;flex-direction:column;padding:calc(var(--space-unit) / 2);padding-bottom:calc(var(--space-unit) * 1.5)}::slotted([slot="section"]){display:inline-flex;padding:calc(var(--space-unit) / 2);margin:0;font-size:var(--font-size-1);line-height:1.333;outline:none}::slotted([slot="section"]:last-of-type){border:none}::slotted([slot="section"]:focus:focus-visible){box-shadow:var(--shadow-focus-primary);color:var(--color-secondary01)}::slotted([slot="section"]:hover),::slotted([slot="section"]:focus:focus-visible),::slotted([slot="section"][active]){color:var(--color-secondary01);font-weight:var(--font-bd)}',f=class extends r{get focusableItem(){return this.items.find(({tabIndex:e})=>e===0)}toggle(){this.hasItems&&(this.open=!this.open,this.setFocus())}setItemsA11yAttrs(){this.hasItems&&this.items.forEach((e,t)=>{e.setAttribute("role","menuitem"),e.setAttribute("tabindex",t===0?"0":"-1")})}onItemsChange(){this.items=Array.from(this.host.querySelectorAll('[slot="section"]')),this.hasItems=this.items.length>0,this.setItemsA11yAttrs()}onLabelSlotChange(e){const t=e.target.assignedElements()[0];t.dataset.text=t==null?void 0:t.textContent}onLabelKeydown(e){(e.key===s.ENTER||e.key===s.SPACE)&&(e.preventDefault(),e.stopPropagation(),this.toggle())}moveFocus(e,t){e.tabIndex=0,setTimeout(()=>{e.focus()},100),t&&(t.tabIndex=-1)}async setFocus(){this.htmlTabindex=0,setTimeout(()=>{this.label.focus()},100)}async focusLastItem(){this.htmlTabindex=0,this.moveFocus(this.items[this.items.length-1])}onOpenChange(){this.open?this.opened.emit():(this.closed.emit(),this.setItemsA11yAttrs())}onTabindexChange(){this.label.tabIndex=this.htmlTabindex}onItemsKeydown(e){switch(e.key){case s.ESC:case s.ARROW_LEFT:if(!this.open)break;e.preventDefault(),e.stopPropagation(),this.label.focus(),this.open=!1;break;case s.ARROW_RIGHT:if(this.open)break;e.preventDefault(),e.stopPropagation(),this.open=!0;break;case s.ARROW_DOWN:{if(!this.open)break;if(document.activeElement===this.host){e.preventDefault(),e.stopPropagation(),this.moveFocus(this.items[0]);break}const t=this.items.indexOf(this.focusableItem),n=this.items[t+1];n&&(e.preventDefault(),e.stopPropagation(),this.moveFocus(n,this.focusableItem));break}case s.ARROW_UP:{if(!this.open||document.activeElement===this.host)break;const t=this.items.indexOf(this.focusableItem),n=this.items[t-1];e.preventDefault(),e.stopPropagation(),n?this.moveFocus(n,this.focusableItem):this.setFocus();break}}}constructor(){super(),this.__registerHost(),this.__attachShadow(),this.opened=a(this,"opened",7),this.closed=a(this,"closed",7),this.active=void 0,this.htmlTabindex=-1,this.open=void 0,this.hasItems=void 0,this.items=void 0,this.toggle=this.toggle.bind(this),this.onItemsChange=this.onItemsChange.bind(this),this.onLabelSlotChange=this.onLabelSlotChange.bind(this),this.onLabelKeydown=this.onLabelKeydown.bind(this),this.onItemsKeydown=this.onItemsKeydown.bind(this)}connectedCallback(){this.onItemsChange()}render(){return o(h,{key:"fca7ed5f80a5ddec1f5b3dd0ebf60d6e8ea5a5b3",open:this.open},o("button",{key:"1154e4751c7c70de94c92b9136042a9feade2b51",ref:e=>this.label=e,class:"label","aria-haspopup":`${this.hasItems}`,"aria-expanded":`${!!this.open}`,role:"menuitem",tabindex:this.htmlTabindex,onClick:this.toggle,onKeyDown:this.onLabelKeydown},o("slot",{key:"58460444b898ce94fcb7c712d1a45b264b006418",onSlotchange:this.onLabelSlotChange}),this.hasItems&&o("z-icon",{key:"fe26662f087680056759d7496730e9c928befb37",name:this.open?"chevron-up":"chevron-down"})),this.open&&o("div",{key:"1bcfdbaf5721a7e9d74cf175f1e83d422da7d753",class:"items",role:"menu"},o("slot",{key:"4c36daa8e2463bf6cf3e61b7ad149a98a89cc7b1",name:"section",onSlotchange:this.onItemsChange})))}get host(){return this}static get watchers(){return{open:["onOpenChange"],htmlTabindex:["onTabindexChange"]}}static get style(){return m}};c(f,[1,"z-menu-section",{active:[516],htmlTabindex:[2,"html-tabindex"],open:[1028],hasItems:[32],items:[32],setFocus:[64],focusLastItem:[64]},[[0,"keydown","onItemsKeydown"]],{open:["onOpenChange"],htmlTabindex:["onTabindexChange"]}]);const l={schemaVersion:"1.0.0",modules:[{kind:"javascript-module",path:"",declarations:[{kind:"class",name:"ZMenuSection",tagName:"z-menu-section",customElement:!0,members:[{kind:"field",name:"active",type:"boolean",description:"Active state"},{kind:"field",name:"htmlTabindex",type:"number",description:`Tabindex value to set on the label button.
Useful to manage keyboard navigation focus with roving tabindex handled by this component's parent (usually ZMenu).`,default:"-1"},{kind:"field",name:"open",type:"boolean",description:"The opening state of the section."}],events:[{kind:"event",name:"opened",description:"The section has been opened."},{kind:"event",name:"closed",description:"The section has been closed."}],slots:[{name:"-",description:"Label of the menu section."},{name:"item",description:"Single entry of the section. Set the same slot name to different items to put many of them. Add the `active` attribute to a slotted item to highlight it."}]}],exports:[{kind:"js",name:"ZMenuSection",declaration:{name:"ZMenuSection",module:"src/components/z-menu-section/index.tsx"}},{kind:"custom-element-definition",name:"z-menu-section",declaration:{name:"ZMenuSection",module:"src/components/z-menu-section/index.tsx"}}]}]};d({...i()||{},...l,modules:[...(i()||{}).modules||[],...l.modules]});
